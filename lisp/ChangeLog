2000-08-26  Miles Bader  <miles@gnu.org>

	* faces.el (set-face-attribute): Update doc string.
	(face-attribute-name-alist): Add :inherit.
	(face-valid-attribute-values): Handle :inherit.
	(face-read-string): Rephrase prompt to be less confusing.
	Assume that DEFAULT is a string, since we must return a string.
	(face-read-integer): Use `format' to turn DEFAULT into an
	acceptable default for face-read-string.  Match NEW-VALUE against
	the string "unspecified", not the symbol `unspecified', since
	that's what face-read-string returns.
	(read-face-attribute): Lookup a name for old-value in valid, and
	use it as a default if we find one.  Treat all values from
	face-read-string as strings.  If the default is used, don't do any
	more processing on the value, just use the old value directly.
	(read-face-and-attribute, modify-face): Tweak prompt.
	(read-face-name): Don't assume prompt ends with a space.

	* faces.el (describe-face): Add support for :inherit attribute.

2000-08-25  Kenichi Handa  <handa@etl.go.jp>

	* terminal.el (terminal-emulator): Fix args to `concat'.  Now
	concat doesn't accept interger.

	* international/kkc.el: Remove SKK from Keywords.  Require
	ja-dic-utl instead of skkdic-utl.

	* international/ja-dic-cnv.el: Renamed from skkdic-cnv.el.
	Provide ja-dic-cnv instead of skkdic-cnv.
	(ja-dic-filename): Renamed from skkdic-filename.  Referers changed
	(iso-2022-7bit-short): Add safe-charsets property.
	(skkdic-convert-postfix): Search Japanese chou-on character in
	addition to Hiragana character.
	(skkdic-convert-prefix, skkdic-collect-okuri-nasi): Likewise.
	(skkdic-convert): Change file names from skkdic.el to ja-dic.el
	(batch-skkdic-convert): Likewise.

	* international/ja-dic-utl.el: Renamed from skkdic-utl.el.
	Provide ja-dic-utl instead of skkdic-utl.
	(skkdic-lookup-key): Load ja-dic/ja-dic, not skkdic/skkdic.

2000-08-24  Dave Love  <fx@gnu.org>

	* disp-table.el (standard-display-default): Make the test of `l'
	useful.

	* language/european.el ("Latin-8", "Latin-9"): Add input methods,
	mod sample text.

	* international/iso-ascii.el: Make pilcrow convenient string
	consistent with section.
	(iso-ascii-display): Set up multibyte characters as well as
	unibyte.

2000-08-24  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el (reset-language-environment): Set
	default-process-coding-system to '(undecided . iso-latin-1), which
	makes process I/O almost consistent with file I/O.   Call this
	function when mule-cmds.el[c] is loaded.

2000-08-22  Andrew Innes  <andrewi@gnu.org>

	* makefile.w32-in: New file.

2000-08-22  Miles Bader  <miles@lsi.nec.co.jp>

	* comint.el (comint-output-filter): Compare end of
	comint-last-output-overlay with the start of the newly inserted
	text, not the end, when deciding whether to extend it.
	Set saved-point's insertion type to advance after insertion.  

	* shell.el (shell-font-lock-keywords): Remove prompt highlighting,
	since this is now done independently of font-lock mode.

2000-08-21  Gerd Moellmann  <gerd@gnu.org>

	* server.el (server-kill-new-buffers): New user option.
	(server-existing-buffer): New buffer-local variable.
	(server-visit-files): When using an existing buffer, set
	server-existing-buffer to t.
	(server-buffer-done): If server-kill-new-buffers is t, kill the
	buffer, unless it was already present before visiting it with
	Emacs server.
	
2000-08-21  Eli Zaretskii  <eliz@is.elta.co.il>

	* man.el (Man-init-defvars): Don't reset Man-fontify-manpage-flag,
	even if the display doesn't support colors: some displays will
	support bold/underline faces.

2000-08-21  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/cl.el (cl-macroexpand): Doc fix.

	* startup.el (command-line): If user's init file had an error,
	add explanatory text to *Messages*.

2000-08-21  Kenichi Handa  <handa@etl.go.jp>

	* man.el (Man-getpage-in-background): Decode the process output by
	the system locale coding system.

2000-08-20  Dave Love  <fx@gnu.org>

	* wid-edit.el (widget-choose, widget-choice-mouse-down-action):
	Don't test x-popup-menu.
	(function) <complete-function>: Complete only fbound symbols.
	<validate, value>: New.
	(variable) <complete-function>: Complete only bound symbols.
	(coding-system): Add :base-only, :complete-function, :validate,
	:value, :prompt-match.
	(widget-coding-system-prompt-value): Use read-coding-system and
	act on :base-only.
	(editable-field): Add :help-echo.
	(widget-push-button-gui, widget-push-button-cache)
	(widget-gui-action, widget-editable-list-gui): COmment out, along
	with uses.
	(widget-at): Make arg optional.
	(widget-echo-help): Adjust for current help-echo calling sequence.
	(widget-specify-field, widget-specify-button)
	(widget-specify-insert, widget-get-sibling, widget-image-find)
	(widget-convert, widget-insert, widget-leave-text)
	(widget-beginning-of-line, widget-end-of-line, widget-kill-line)
	(widget-setup, widget-field-find, widget-before-change)
	(widget-after-change, widget-default-complete)
	(widget-default-create, widget-default-delete)
	(widget-push-button-value-create, editable-field)
	(widget-field-prompt-value, widget-field-validate)
	(widget-choice-value-create, widget-choice-action)
	(widget-choice-validate, widget-checklist-add-item)
	(widget-radio-add-item, widget-radio-chosen)
	(widget-radio-value-inline, widget-editable-list-value-create)
	(widget-editable-list-entry-create)
	(widget-documentation-link-add)
	(widget-documentation-string-value-create)
	(widget-regexp-validate, widget-file-complete)
	(widget-sexp-validate, widget-plist-convert-widget)
	(widget-plist-convert-widget, widget-alist-convert-widget)
	(widget-alist-convert-widget, widget-color-complete): Simplify,
	particularly to avoid bindings which aren't optimized out.

	* emacs-lisp/lisp.el (defun-prompt-regexp, parens-require-spaces):
	Doc fix.
	(down-list, backward-up-list, up-list, kill-sexp)
	(backward-kill-sexp, mark-sexp): Make arg optional.
	(lisp-complete-symbol): Add optional arg PREDICATE.

	* cus-start.el: Add display-buffer-reuse-frames,
	file-coding-system-alist.

2000-08-20  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (command-line): Clear realized faces after
	modifying TTY color mappings.

2000-08-20  Miles Bader  <miles@gnu.org>

	* faces.el (face-attr-match-p): Don't return true if ATTRS are
	merely a subset of FACE's attributes.

2000-08-19  Miles Bader  <miles@gnu.org>

	* comint.el (comint-output-filter): Save the point with a marker,
	not just a buffer position.

	* international/mule.el (set-buffer-process-coding-system): Make
	interactive prompt less confusing.

2000-08-19  Gerd Moellmann  <gerd@gnu.org>

	* hilit-chg.el: General cleanup of doc strings, comments and
	code formatting.

2000-08-19  Miles Bader  <miles@gnu.org>

	* emacs-lisp/bytecomp.el (byte-compile-beginning-of-line):
	Compiler macro removed; beginning-of-line is no longer always
	equivalent to forward-line, in the presence of fields.

	* comint.el (comint-output-filter): Remove ad-hoc saving of
	restriction, and just use save-restriction, now that it works
	correctly.  Don't adjust comint-last-input-start to account for
	our insertion; it shouldn't have moved because we don't use
	insert-before-markers anymore.  Comment out call to
	`force-mode-line-update'; why is it here?

	* gud.el (gud-basic-call): Temporarily widen gud comint buffer
	while checking for prompt to delete.  Use `forward-line 0'
	instead of beginning-of-line.
	(gud-filter): Temporarily widen gud comint buffer while
	examining output.

2000-08-18  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/sh-script.el: Big bag of typos.

	* textmodes/ispell.el (ispell-menu-map-needed): Put back the boundp
	check since ispell-process is not bound when ispell is not yet loaded.

2000-08-18  Dave Love  <fx@gnu.org>

	* image.el (find-image): Copy `spec' before using plist-put.

2000-08-18  Gerd Moellmann  <gerd@gnu.org>

	* textmodes/ispell.el (ispell-dictionary-alist-6): Add
	`portugues'.

	* bindings.el (esc-map): Bind `C-delete' and `C-backspace' to
	backward-kill-sexp, analogous to kill-sexp.

	* progmodes/icon.el (icon-indent-line)
	(icon-is-continuation-line): Handle comments specially.

2000-08-17  Ken Stevens <k.stevens@ieee.org>

	* ispell.el: Set to standard author/maintainer/keyword fields.
	Fine tuning to menu map appearance and operation, and added help.
	Remove `start' and `end' error messages when compiling.
	(ispell-choices-win-default-height): Fixed comment string.
	(ispell-dictionary-alist-1): Fixed regexp in castellano and
	castellano8 dictionaries.
	(ispell-dictionary-alist-3): Fixed regexp in francais dictionary.
	(ispell-dictionary-alist-4): Fixed regexp in francais-tex
	dictionary, added italiano dictionary.
	(ispell-skip-region-alist): Removed regexp thrashing when `-' is a
	word character
	(ispell-tex-skip-alists): Added psfig support.
	(ispell-skip-html): Renamed from ispell-skip-sgml.
	(ispell-begin-skip-region-regexp, ispell-skip-region)
	(ispell-minor-check): Improved html skipping support to skip across
	code, and recognize `&' commands without propper `;' syntax;
	(ispell-process-line): Fix alignment error when manually
	correcting spelling.
	(ispell): Fix comment string.
	(ispell-add-per-file-word-list): Always put word list on new line.

2000-08-17  Gerd Moellmann  <gerd@gnu.org>

	* format.el (format-encode-run-method): Fix error message to say
	`encode' instead of `decode'.  Use save-window-excursion around
	shell-command-on-region as in format-decode-run-method because
	shell-command-on-region can display a buffer with error output.
	(format-decode): Don't record undo information for the decoding.
	(format-annotate-function): Add parameter FORMAT-COUNT.  Make
	that number part of the temporary buffer name so that more than
	one decoding using a temporary buffer can happen safely.

	* enriched.el (enriched-annotation-regexp): Use `A-Z' instead
	of `A-z' in the regexp.

	* hilit-chg.el: Fix typos in commentary.

	* help.el (view-emacs-news): Rewritten for new naming scheme
	for old NEWS files.

	* startup.el (command-line): Pop to *Messages* in case an error
	is signaled while loading user-init-file.

2000-08-17  Andreas Schwab  <schwab@suse.de>

	* files.el (insert-directory): Don't lose original file name,
	undoing an undocumented change.

2000-08-17  Alex Schroeder  <alex@gnu.org>

	* sql.el (sql-magic-go): Use comint-bol.
	(sql-copy-column): Use comint-line-beginning-position.
	(comint-line-beginning-position): Define a replacement for
	comint-line-beginning-position if it is not fboundp.

2000-08-17  Alex Schroeder  <alex@gnu.org>

	* sql.el (sql-mode-map): TAB is no longer defined in sql-mode-map;
	it didn't have any effect anyway.

2000-08-17  Alex Schroeder  <alex@gnu.org>

	* sql.el (sql-postgres): Jason Beegan's patch uses the parameters
	--pset and pager=off instead of sending \\o|cat at the beginning
	of the session.

2000-08-17  Miles Bader  <miles@gnu.org>

	* progmodes/octave-inf.el: Add compatibility definition of
	comint-line-beginning-position.

2000-08-17  Kenichi Handa  <handa@etl.go.jp>

	* startup.el (normal-top-level): Look in each dir in load-path for
	a leim-list.el file too.  This assures of loading leim-list.el
	that is created at Emacs installation time even if a user have his
	own leim-list.el.

2000-08-17  Miles Bader  <miles@gnu.org>

	* hi-lock.el (hi-yellow, hi-pink, hi-green, hi-blue): Force the
	foreground color to black if the background is dark.

2000-08-16  Stefan Monnier  <monnier@cs.yale.edu>

	* loadhist.el (unload-feature): Typo.

	* finder.el (finder-compile-keywords): 
	* cus-dep.el (custom-make-dependencies): Add local-variable settings
	to the generated file.

	* mail/mh-e.el (mh-make-local-vars):
	Replace make-variable-buffer-local with make-local-variable.

	* play/landmark.el:
	* options.el (Edit-options-{set,toggle,t,nil}):
	* mail/mailabbrev.el (mail-abbrevs-mode): 
	* textmodes/tex-mode.el (tex-expand-files): 
	* textmodes/outline.el (outline-minor-mode): Don't quote lambda.

	* term/bg-mouse.el (bg-mouse-report): screen-height -> frame-height.

	* emacs-lisp/ewoc.el (ewoc-locate): Default POS to (point).
	(ewoc-goto-prev, ewoc-goto-next): Remove arg POS.
	Allow going past the last element.
	* pcvs.el (cvs-mode-previous-line, cvs-mode-next-line, cvs-mode-mark) 
	(cvs-mode-unmark-up, cvs-get-marked): Update calls to ewoc.
	(cvs-mouse-toggle-mark): Don't move point.
	(cvs-revert-if-needed): Avoid re-eval of local variables and modes.

	* progmodes/compile.el (grep): Provide a default set of files.
	(next-error): Docstring fix.
	(compilation-find-file): Avoid find-file (fails in a dedicated window).

	* emacs-lisp/easy-mmode.el (define-minor-mode):
	Use `symbol-value' to keep the byte-compiler quiet.

	* diff-mode.el (diff-mode-map): Bind diff-apply-hunk.
	(diff-find-source-location): New fun, extracted from diff-goto-source.
	(diff-goto-source): Use it.
	(diff-next-complex-hunk, diff-filter-lines): New function.
	(diff-apply-hunk): New command.

	* smerge-mode.el (smerge-mode-menu): Doc fix.

	* msb.el (msb-mode): Define it in terms of define-minor-mode.

2000-08-16  Dave Love  <fx@gnu.org>

	* windmove.el (windmove) <defgroup>: Add :version.

	* net/goto-addr.el: Don't require browse-url.  Require thingatpt.
	(goto-address-fontify-p, goto-address-highlight-p)
	(goto-address-url-face, goto-address-url-mouse-face)
	(goto-address-mail-face, goto-address-mail-mouse-face): Doc fix.
	(goto-address-url-regexp): Use thing-at-point-url-regexp.
	(goto-address-fontify, goto-address-at-mouse): Simplify,
	(goto-address-at-point): browse-url-url-at-point,
	goto-address-find-address-at-point can return nil.
	(goto-address-find-address-at-point): Return nil on failure.

	* align.el (align) <defgroup>: Add :version.

	* calculator.el (calculator): Add :version.
	(calculator): Use two lines for calculator window if `modeline'
	face is boxed.

	* play/5x5.el: Doc fixes.
	(5x5) <defgroup>: Add :version.

	* play/fortune.el (fortune) <defgroup>: Add :version.
	(fortune-append): Fix error message.
	(fortune-from-region): Doc fix.

	* play/pong.el (pong): Doc fix.

	* play/morse.el: Keywords, commentary, autoloads.

2000-08-16  Eli Zaretskii  <eliz@is.elta.co.il>

	* desktop.el (desktop-save): Don't look at symbol-value of a
	member of minor-mode-alist, unless it is boundp.

2000-08-16  Sam Steingold  <sds@gnu.org>

	* buff-menu.el (list-buffers-noselect): Use `dolist' instead Of
	`while'; use `with-current-buffer' instead of `save-excursion'.
	Removed unnecessary kludges now that "*Buffer List*" is excluded.

2000-08-16  Kenichi Handa  <handa@etl.go.jp>

	* international/ccl.el (declare-ccl-program): Docstring modified.
	(ccl-execute-with-args): Likewise.

2000-08-16  Miles Bader  <miles@gnu.org>

	* progmodes/sql.el: Add compatibility definition of
	comint-line-beginning-position.

2000-08-15  Gerd Moellmann  <gerd@gnu.org>

	* buff-menu.el (list-buffers-noselect): Set `buffer' as well as
	'buffer-menu' property.
	(Buffer-menu-buffer): Use `buffer' property if `buffer-name'
	fails.
	(Buffer-menu-execute): When deleting, test `(and buf (buffer-name
	buf))', instead of `(Buffer-menu-buffer nil)', to see if buffer
	wasn't killed.

	* buff-menu.el (list-buffers-noselect): Don't display the
	*Buffer List* buffer.

	* font-lock.el: Require jit-lock to prevent a very late
	`Loading jit-lock' message.

	* emacs-lisp/cust-print.el, emacs-lisp/cl-specs.el
	* emacs-lisp/edebug.el, progmodes/hideif.el: Change authors'
	mail address.

2000-08-15  Miles Bader  <miles@gnu.org>

	* textmodes/ispell.el (ispell-graphic-p): New constant.
	(ispell-choices-win-default-height, ispell-help): Use
	`ispell-graphic-p' instead of `xemacsp'.

2000-08-15  Dave Love  <fx@gnu.org>

	* simple.el: Autoload widget-convert when compiling.
	(mail-user-agent): Doc fix.

	* help.el (function-called-at-point, variable-at-point): Use
	with-syntax-table.
	(help-manyarg-func-alist): Add insert-and-inherit.

	* thingatpt.el (thing-at-point-url-regexp): Prepend `\<'.

	* delsel.el (delsel-unload-hook): New function.

	* find-file.el: Doc fixes.  Move provide to end.
	(ff) <defgroup>: Add :link.
	(ff-goto-click): Deleted.
	(ff-mouse-find-other-file, ff-mouse-find-other-file-other-window):
	Use mouse-set-point.

	* textmodes/tildify.el: Doc fixes.
	(tildify) <defgroup>: Add:version.

	* progmodes/glasses.el (glasses) <defgroup>: Add :version.
	(glasses-custom-set): Use set-default, not set.
	(minor-mode-alist): Propertize the lighter.
	(glasses-mode): Provide optional arg.

	* progmodes/cwarn.el (cwarn) <defgroup>: Add :version, :link.
	(global-cwarn-mode): Don't make it a user option.  Unquote lambda.
	(cwarn-font-lock-feature-keywords-alist): Don't make it a user
	option.  Provide :type.
	(cwarn-configuration): Provide :type.
	(cwarn-mode): Doc fix.

	* add-log.el (change-log-merge): Doc fix.
	(change-log-redate): New command.

	* net/browse-url.el (browse-url-filename-alist): Add a clause for
	Doze and Dog.
	(browse-url): Use dolist, not mapcar.
	(browse-url-at-point): Check for null url.
	(browse-url-event-buffer, browse-url-event-point): Functions
	deleted.
	(browse-url-at-mouse, browse-url-netscape): Simplify.

	* msb.el (msb--few-menus, msb--very-many-menus): Use current Gnus
	modes.
	(msb--init-file-alist, msb--aggregate-alist, msb--add-separators):
	Fix previous change to mapcan.
	(msb--init-file-alist, msb--add-separators)
	(msb--make-keymap-menu): Simplify.
	(msb--choose-file-menu): Use copy-sequence.
	(msb-mode-map): Add title to keymap.
	(msb-unload-hook): New function.

	* bs.el: Fix indentation.
	(bs) <defgroup>: Add :links.
	(bs-show): Doc fix.
	(bs-apply-sort-faces): Don't use window-system.
	(bs-mode-font-lock-keywords): Avoid testing for XEmacs.

2000-08-15  Eli Zaretskii  <eliz@is.elta.co.il>

	* calendar/timeclock.el (timeclock-file): Run .timelog through
	convert-standard-filename.

2000-08-14  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/authors.el: New file.

	* paren.el (show-paren-priority): New user option.
	(show-paren-function): Set overlay priorities to
	show-paren-priority.

2000-08-14  Miles Bader  <miles@gnu.org>

	* comint.el (comint-bol): Use `forward-line 0' instead of calling
	beginning-of-line with inhibit-field-text-motion bound.

2000-08-14  Gerd Moellmann  <gerd@gnu.org>

	* calendar/timeclock.el: New file.

2000-08-14  David Ponce  <david@dponce.com>

	* recentf.el (recent-dialog-mode-map): Bind down-mouse-1 to
	`widget-button-click'. so that one can use left mouse button to
	click on dialog buttons.

2000-08-14  Emmanuel Briot  <briot@gnat.com>

	* xml.el (xml-parse-tag, xml-parse-attlist): Do not downcase
        identifiers, since XML is case sensitive

2000-08-12  Miles Bader  <miles@gnu.org>

	* comint.el (comint-output-filter): Don't bother frobbing
	window-start, it doesn't seem to be necessary.

	* comint.el (comint-send-string, comint-send-region): Make into
	real functions.  Snapshot the prompt before sending.

2000-08-11  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (Info-find-emacs-command-nodes): Rewrite to use
	technique similar to Info-index, instead of relying on specific
	names of relevant Index nodes.
	(Info-goto-emacs-command-node): Bind Info-history to nil when
	going to the first node found by Info-find-emacs-command-nodes.

2000-08-11  Eli Zaretskii  <eliz@is.elta.co.il>

	* menu-bar.el (menu-bar-help-menu): Add a :help string.

2000-08-10  Miles Bader  <miles@gnu.org>

	* comint.el (comint-output-filter): Doc fixes & misc code cleanup.

2000-08-10  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (Info-file-list-for-emacs): More elements for the
	autotype, vip, ebrowse, cl, idlwave, reftex, widget, pcl-cvs,
	and woman manuals.

2000-08-10  Miles Bader  <miles@lsi.nec.co.jp>

	* comint.el (comint-send-input): Make the newline boundary overlay
	rear-nonsticky.  Use `insert' instead of `insert-before-markers'.
	(comint-output-filter): Use `insert' instead of
	`insert-before-markers'.  Extend comint-last-output-overlay when
	necessary since we can't rely on insert-before-markers to do it.
	* gud.el (gud-filter): Use `with-current-buffer' instead of
	save-excursion when inserting the output, so that point gets
	updated correctly; the old method relied on a rather dodgy
	side-effect of comint-output-filter to avoid the effect of
	save-excursion.

2000-08-10  Eli Zaretskii  <eliz@is.elta.co.il>

	* files.el (recover-file): Call insert-directory instead of
	invoking `ls' directly.

2000-08-10  Miles Bader  <miles@gnu.org>

	* comint.el (comint-highlight-prompt, comint-highlight-prompt-face)
	(comint-last-prompt-overlay): New variables.
	(comint-output-filter): Implement prompt highlighting.
	(comint-snapshot-last-prompt): New function.
	(comint-send-input): Snapshot the last prompt.
	Use comint-highlight-input-face.
	(comint-highlight-input-face): Renamed from `comint-highlight-face'.
	Use defface instead of defcustom.
	(send-invisible, comint-send-eof): Snapshot the last prompt.
	(comint-delchar-or-maybe-eof): Use comint-send-eof.
	(comint-mode): Make `comint-last-prompt-overlay' buffer-local.

2000-08-09  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/regexp-opt.el (make-bool-vector): Remove.
	(regexp-opt-group): Use a list of chars for `letters'.
	(regexp-opt-charset): `chars' is now a list of chars.
	Use a char-table rather than a vector so it works for multibyte chars.

	* pcvs.el (cvs-menu): Don't move point.  Use popup-menu.
	Set cvs-minor-current-files to the selected fileinfo.
	(cvs-get-marked): Accept fileinfos in cvs-minor-current-files.
	(cvs-mode-insert): Manually macroexpand `ignore-errors'.

2000-08-09  Eli Zaretskii  <eliz@is.elta.co.il>

	* files.el (insert-directory): Don't call access-file on
	directories on DOS and Windows.

2000-08-09  Kenichi Handa  <handa@etl.go.jp>

	* international/ccl.el (ccl-embed-data): Make ccl-program-vector
	longer if necessary.
	(ccl-embed-code): Call ccl-embed-data to store CODE in
	ccl-program-vector.

2000-08-09  Miles Bader  <miles@gnu.org>

	* comint.el (comint-output-filter): Properly handle the case where
	the text surrounded by comint-last-output-overlay was deleted.

2000-08-08  Gerd Moellmann  <gerd@gnu.org>

	* info.el (Info-insert-dir): Use Info-additional-directory-list if
	non-nil.
	(Info-file-list-for-emacs): Remove "info" from the list because
	that leads to trying to use the documentation from file `info'
	in various situations where it isn't appropriate, for instance
	C-h C-k C-h i.

	* ffap.el (ffap-read-file-or-url-internal): Handle case that
	DIR and/or STRING are nil.

	* progmodes/compile.el (compilation-setup): Make variable
	compilation-error-screen-columns buffer-local, as some comment
	in the code suggests it should be.

	* files.el (auto-mode-interpreter-regexp): New variable.
	(set-auto-mode): Use it.

	* indent.el (indent-for-tab-command): Doc fix.

	* mouse-sel.el (mouse-sel-mode): Doc fix.

	* emacs-lisp/lisp-mode.el (eval-last-sexp-1): Handle `#N='
	labels.

	* help.el (print-help-return-message): When
	display-buffer-reuse-frames is set, let the help window been quit,
	instead of deleting it, which might delete a reused frame.

2000-08-08  Eli Zaretskii  <eliz@is.elta.co.il>

	* dired-aux.el (dired-do-create-files): On DOS/Windows, allow to
	rename a directory to a name that differs only by its letter case.

2000-08-08  Kenichi Handa  <handa@etl.go.jp>

	* international/quail.el (quail-define-rules): Handle Quail decode
	map correctly.  Add code for supporting annotations.
	(quail-install-decode-map): New function.
	(quail-defrule-internal): New optional arguments decode-map and
	props.
	(quail-advice): New function.

2000-08-07  Sam Steingold  <sds@gnu.org>

	* emacs-lisp/cl-indent.el (toplevel): Indent `defclass',
	`defconst', `define-condition', `with-slots'.
	* font-lock.el (lisp-font-lock-keywords-2): Added `with-' and `do-'.

2000-08-03  Miles Bader  <miles@gnu.org>

	* comint.el (comint-use-prompt-regexp-instead-of-fields):
	New variable.
	(comint-prompt-regexp, comint-get-old-input): Document dependence on
	comint-use-prompt-regexp-instead-of-fields.
	(comint-send-input): Add `input' field property to stuff we send to
	the process, if comint-use-prompt-regexp-instead-of-fields is nil.
	(comint-output-filter): Add `output' field property to process
	output, if comint-use-prompt-regexp-instead-of-fields is nil.
	(comint-replace-by-expanded-history)
	(comint-get-old-input-default, comint-show-output)
	(comint-backward-matching-input, comint-forward-matching-input)
	(comint-next-prompt, comint-previous-prompt):  Use field
	properties if comint-use-prompt-regexp-instead-of-fields is nil.
	(comint-line-beginning-position): New function.
	(comint-bol): Use comint-line-beginning-position.  Make ARG optional.
	(comint-replace-by-expanded-history-before-point): Use
	comint-line-beginning-position and line-end-position.
	(comint-last-output-overlay): New variable.
	(comint-mode): Make `comint-last-output-overlay' buffer-local.

	* shell.el (shell-prompt-pattern): Doc change.
	(shell-backward-command): Use line-beginning-position.

	* gud.el (gud-gdb-complete-command): Use
	comint-line-beginning-position.

	* ielm.el (ielm-indent-line): Detect a "prompt" line by seeing if
	comint-bol doesn't actually go to the beginning of the line.

	* hippie-exp.el (try-expand-line): Only use comint-prompt-regexp
	if comint-use-prompt-regexp-instead-of-fields is non-nil.
	(try-expand-line-all-buffers): Likewise.

	* progmodes/sql.el (sql-magic-go): Use comint-bol instead of
	explicitly matching comint-prompt-regexp.
	(sql-copy-column): Use comint-line-beginning-position instead of
	explicitly matching comint-prompt-regexp.

	* progmodes/octave-inf.el (inferior-octave-complete): Use
	comint-line-beginning-position.

	* progmodes/inf-lisp.el (inferior-lisp-prompt): Doc change.

	* progmodes/idlw-shell.el (idlwave-shell-send-command): When
	looking for a prompt, use `forward-line 0' instead of
	`beginning-of-line', to avoid getting caught by an input field.

2000-08-07  Gerd Moellmann  <gerd@gnu.org>

	* files.el (shell-quote-wildcard-pattern): Make sure to return
	PATTERN, in the Unix case.

2000-08-07  Eli Zaretskii  <eliz@is.elta.co.il>

	* play/zone.el (zone): Discard any pending input before running
	the randomly-chosen pgm.

2000-08-07  Kenichi Handa  <handa@etl.go.jp>

	* emacs-lisp/bytecomp.el (byte-compile-fix-header): Fix the way of
	checking the existence of any multibyte characters.

2000-08-06  Gerd Moellmann  <gerd@gnu.org>

	* help.el (describe-mode): Test minor-mode symbol for being
	bound before testing its value for being nil.

	* pcvs-util.el, cvs-status.el, pcvs.el: Use `nth' instead of
	`first', `second', and `third'.

	* emacs-lisp/cl.el (third...tenth): Undo change of 2000-08-05.
	(second): Make it an alias for `cadr'.

2000-08-06  Eli Zaretskii  <eliz@is.elta.co.il>

	* bs.el (bs-apply-sort-faces): Don't use window-system, since all
	types of display support faces now.

2000-08-05  Gerd Moellmann  <gerd@gnu.org>

	* pcvs.el (require): Require `cl' during compilation, only.

	* emacs-lisp/cl.el (first, ..., tenth): Make them macros.
	(toplevel): Remove `remq' and `remove' from autoloads.
	(cl-fake-autoloads): New variable.  If set, arrange for an error
	when CL functions etc. are autoloaded.

2000-08-04  Eli Zaretskii  <eliz@is.elta.co.il>

	* play/zone.el (zone, zone-pgm-stress): Don't use window-system.

	* hi-lock.el (hi-lock-unface-buffer): If a menu of regexps is
	popped up, but the user clicks outside the menu, return an empty
	regexp (that causes unhighlight-regexp to have no effect).

	* menu-bar.el (menu-bar-games-menu): Add Zone.

	* hi-lock.el (toplevel): Require font-lock.

2000-08-03  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ebnf2ps.el: Get around a bug on skip-chars-forward.
	(ebnf-8-bit-chars): New var for bug fix.
	(ebnf-string): Bug fix.

2000-08-03  Sam Steingold  <sds@gnu.org>

	* pcvs.el (cvs-do-commit): Use `buffer-substring-no-properties'
	instead of `buffer-string'.
	(require 'cl): Always, not just when compiling.
	`ignore-errors' in `interactive', `list*', `defun*' &c make this
	necessary.

2000-08-03  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/mule-cmds.el (select-safe-coding-system): Make
	the message text about selecting a safe coding system more clear.

2000-08-02  Gerd Moellmann  <gerd@gnu.org>

	* hi-lock.el: New file.

	* play/zone.el: New file.

	* replace.el (occur): Set tab-width in the *Occur* buffer to the
	value of tab-width in the original buffer.  Choose a line number
	format that's a multiple of the original buffer's tab width, so
	that lines appear right.

	* textmodes/ispell.el (ispell): New function, replacing an alias.
	Spell-check active region if in transient-mark-mode and mark
	is active; otherwise spell-check buffer.

2000-08-02  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-mule.el: Fix a customization problem on
	ps-mule-font-info-database-default.

2000-08-02  Eli Zaretskii  <eliz@is.elta.co.il>

	* progmodes/ebrowse.el (ebrowse-tree-mode-map): Use
	display-mouse-p instead of window-system.
	(ebrowse-member-mode-map): Ditto.

2000-08-01  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ebnf2ps.el: Update ps-print functions call.  Indentation fix.  Doc
	fix.
	(ebnf-version): New version number (3.2).
	(ebnf-format-color, ebnf-begin-job): Code fix.

2000-08-01  Eli Zaretskii  <eliz@is.elta.co.il>

	* net/net-utils.el (nslookup-font-lock-keywords): Don't condition
	font lock support on window-system.
	(ftp-font-lock-keywords, smbclient-font-lock-keywords): Likewise.

	* textmodes/ispell.el (ispell-highlight-spelling-error): Use
	display-color-p, if fboundp, instead of window-system.

2000-07-31  Eli Zaretskii  <eliz@is.elta.co.il>

	* calendar/appt.el (appt-disp-window): Use display-multi-frame-p
	instead of window-system.

	* wid-edit.el (widget-choose): Use display-mouse-p instead of
	window-system.
	(widget-choice-mouse-down-action): Use display-popup-menus-p
	instead of window-system.

	* strokes.el (strokes-file): Run the file name through
	convert-standard-filename.
	(strokes-mode): Call display-mouse-p instead of looking at
	window-system.  Change the error message accordingly.

	* progmodes/cpp.el (toplevel): Support faces on tty's.

	* play/landmark.el (lm-font-lock-face-O, lm-font-lock-face-X)
	(lm-plot-square, lm-init-display): Don't use window-system.

	* play/gomoku.el (gomoku-font-lock-O-face, gomoku-font-lock-X-face)
	(gomoku-plot-square, gomoku-init-display): Don't use window-system.

	* mail/rmail.el (rmail-start-mail): Use display-multi-frame-p
	instead of looking at window-system.

2000-07-30  Gerd Moellmann  <gerd@gnu.org>

	* iswitchb.el (iswitchb-entryfn-p): Test this-command instead
	of testing if iswitchb-prepost-hooks is bound, because the
	latter will always be true when invoking a recursive minibuffer
	from an active Iswitchb buffer.

2000-07-30  Eli Zaretskii  <eliz@is.elta.co.il>

	* files.el (shell-quote-wildcard-pattern): New function.
	(insert-directory): Call it.  Only prepend "\" to command on Unix
	and GNU/Linux systems.

2000-07-30  Gerd Moellmann  <gerd@gnu.org>

	* eshell/esh-groups.el: Change custom :link file names
	from `eshell.info' to `eshell'.

2000-07-30  Francis Wright  <fjw@maths.qmw.ac.uk>

	* dired.el (dired-build-subdir-alist): Expand subdirectory names
	correctly in recursive ange-ftp listings.

2000-07-30  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Fix bug 1: if ps-font-size-internal,
	ps-header-font-size-internal and
	ps-header-title-font-size-internal variables are not set,
	ps-nb-pages and ps-line-lengths-internal crashes.  Fix bug 2: if
	face text property is (foreground-color . COLOR) or
	`(background-color . COLOR)', ps-print crashes.  Doc fix.
	(ps-print-version): New version number (5.2.4).
	(ps-plot-region): Code fix.
	(ps-nb-pages, ps-line-lengths-internal): Bug fix 1.
	(ps-face-attribute-list, ps-face-attributes, ps-face-background):
	Bug fix 2.

2000-07-30  Milan Zamazal  <pdm@freesoft.cz>

	* glasses.el (glasses-make-readable): Fix uncapitalization of
	identifiers like `myXMLDocument'.

2000-07-28  Karl Fogel  <kfogel@red-bean.com>

	* mail/mail-hist.el (mail-hist-previous-input)
	(mail-hist-next-input): Do the obvious code factorization.
	(mail-hist-retrieve-and-insert): New func, contains common
	code of above two.
	If inserting a message body, leave point at top.

2000-07-28  Sam Steingold  <sds@gnu.org>

	* net/ange-ftp.el (ange-ftp-verify-visited-file-modtime):
	Use `<=', not `<' to compare times!
	(ange-ftp-ls): Remove.

2000-07-27  Gerd Moellmann  <gerd@gnu.org>

	* play/cookie1.el: Add explanation of how to make cookie.el
	compatible with strfile(1) to comment.

	* subr.el (remove, remq): New functions.

	* midnight.el (clean-buffer-list-kill-never-regexps): Correctly
	escape `*' in regexps.
	(midnight-find): Reverse order of arguments in the funcall of
	TEST.

	* bindings.el (completion-ignored-extensions): Add `.la', `.lo',
	and `.class'.

	* play/meese.el: Add Commentary section.

2000-07-27  Alex Schroeder  <alex@gnu.org>

	* sql.el (sql-ms): Added autoload cookie.
	(sql-ingres, sql-solid, sql-mysql, sql-informix, sql-sybase)
	(sql-oracle): Ditto.
	(sql-help): Doc change.

	(sql-mode-oracle-font-lock-keywords): Added PL/SQL keywords, data
	types and exceptions.

2000-07-27  Alex Schroeder  <alex@gnu.org>

	* sql.el (sql-placeholder-history): New variable.
	(sql-query-placeholders-and-send): New function that will query
	the user and replace placeholders with user input.
	(sql-oracle): If running on NT, set comint-input-sender to
	sql-query-placeholders-and-send.

	(sql-stop): If in the SQLi buffer, insert stop notification, else
	present it as a message.

2000-07-27  Alex Schroeder  <alex@gnu.org>

	* sql.el (sql-input-ring-separator): Doc change.
	(sql-input-ring-file-name): Doc change.
	(sql-interactive-mode): Use `sql-input-ring-separator' and
	`sql-input-ring-file-name' to set the comint-mode equivalents
	without making them local variables.
	(sql-stop): Don't bind `sql-input-ring-separator' and
	`sql-input-ring-file-name' dynamically to their comint-mode
	equivalents.

2000-07-27  Kenichi Handa  <handa@etl.go.jp>

	* international/mule.el (register-char-codings): New function.
	(make-coding-system): Handle `safe-chars' specification in the arg
	PROPERTY.

	* international/mule-cmds.el
	(find-coding-systems-region-subset-p): This function deleted.
	(sort-coding-systems-predicate): New variable.
	(sort-coding-systems): New function.
	(find-coding-systems-region): Use
	find-coding-systems-region-internal.
	(find-coding-systems-string): Use find-coding-systems-region.
	(find-coding-systems-for-charsets): Check
	char-coding-system-table.
	(select-safe-coding-system-accept-default-p): New variable.
	(select-safe-coding-system): Mostly rewritten.  New argument
	ACCEPT-DEFAULT-P.
	(select-message-coding-system): Call select-safe-coding-system
	with ACCEPT-DEFAULT-P arg.
	(reset-language-environment): Reset default-sendmail-coding-system
	to the default value iso-latin-1.
	(set-language-environment): Don't set the obsolete variable
	charset-origin-alist.

	* international/codepage.el (cp-coding-system-for-codepage-1):
	Give `safe-chars' property to make-coding-system.

	* mail/sendmail.el (sendmail-send-it): Improve the way to avoid
	calling select-message-coding-system twice.

	* language/cyrillic.el (cyrillic-koi8): Use `safe-chars' property
	instead of `safe-charsets'.
	(cyrillic-alternativnyj): Likewise.
	(ccl-encode-alternativnyj): Don't check the charset
	cyrillic-iso8859-5.

2000-07-27  Kenichi Handa  <handa@etl.go.jp>

	* composite.el (compose-chars-after): Preserve match data.

2000-07-26  Sam Steingold  <sds@gnu.org>

	* net/ange-ftp.el (ange-ftp-file-newer-than-file-p): New function.
	(ange-ftp-real-file-newer-than-file-p): New function.
	(ange-ftp-verify-visited-file-modtime): Use `float-time'.
	(ange-ftp-dot-to-slash): Removed (use `subst-char-in-string').

	* tooltip.el (tooltip-float-time): Removed (use `float-time').
	* midnight.el (midnight-float-time): Ditto.

2000-07-26  Andreas Schwab  <schwab@suse.de>

	* files.el (normal-backup-enable-predicate): Correct
	interpretation of the return value of compare-strings.

2000-07-26  Gerd Moellmann  <gerd@gnu.org>

	* isearch.el (isearch-resume): New function.
	(isearch-done): Add something to command-history to resume
	the search.
	(isearch-yank-line, isearch-yank-word): Use
	buffer-substring-no-properties instead of buffer-substring.

	* textmodes/flyspell.el (flyspell-mouse-map): Use `map' instead
	of flyspell-mouse-map.

	* progmodes/make-mode.el (makefile-mode-abbrev-table): Remove
	duplicate definition.
	(makefile-mode): Remove duplicate setting of local-abbrev-table.

	* progmodes/m4-mode.el (m4-mode-abbrev-table): New variable.
	(m4-mode): Set local-abbrev-table to m4-mode-abbrev-table.

2000-07-25  Sam Steingold  <sds@gnu.org>

	* net/ange-ftp.el: Get modtime over the net.
	(ange-ftp-file-modtime): New function.
	(ange-ftp-write-region, ange-ftp-insert-file-contents)
	(ange-ftp-file-attributes, ange-ftp-verify-visited-file-modtime):
	Use it.
	(ange-ftp-dot-to-slash): New function.
	(ange-ftp-fix-name-for-vms): Use it.

	* midnight.el (midnight-buffer-display-time): Use
	`with-current-buffer'.

2000-07-25  Gerd Moellmann  <gerd@gnu.org>

	* find-dired.el: Update copyright notice.
	(find-dired): Offer to kill a running `find'.

	* enriched.el (enriched-face-ans): For a `foreground-color'
	property, return '(("x-color" COLOR))' so that COLOR will be
	output as a parameter of the x-color annotation.  Likewise for the
	`background-color' property.  In the case of normal face
	properties, don't return annotations for unspecified foreground
	and background face attributes.

2000-07-25  Kenichi Handa  <handa@etl.go.jp>

	* language/japan-util.el (japanese-katakana-region): Fix handling
	HANKAKU argument.

2000-07-25  Miles Bader  <miles@gnu.org>

	* simple.el (line-move): Pass INHIBIT-CAPTURE-PROPERTY argument to
	constrain-to-field.  Pass nil ESCAPE-FROM-EDGE argument to
	constrain-to-field.

2000-07-24  Andrew Innes  <andrewi@gnu.org>

	* timer.el (timer-activate-when-idle): Add optional parameter
	DONT-WAIT.  Update docstring.
	(run-with-idle-timer): Specify extra parameter to
	timer-activate-when-idle, so that timer will be activated
	immediately if Emacs is already idle.

	* w32-fns.el (w32-using-nt): Fix docstring.

2000-07-24  Dave Love  <fx@gnu.org>

	* mouse.el (popup-menu): Set last-command-event.
	(mouse-major-mode-menu-prefix): Declare.

2000-07-24  Gerd Moellmann  <gerd@gnu.org>

	* textmodes/flyspell.el: Update to author's version 1.5d.

	* progmodes/hideshow.el: Update copyright notice.

	* vcursor.el: Set maintainer to FSF, since author cannot
	be reached.

2000-07-24  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (Info-goto-emacs-key-command-node): Leave a space after
	the prompt.

	* mouse.el (popup-menu): Run the keymap through indirect-function,
	in case it was defined with define-prefix-key.  If the menu is a
	list of keymaps, look up the binding of user's choice in each one
	of the keymaps.
	(mouse-popup-menubar): If the global and local menu-bar keymaps
	don't have a prompt string, create one and insert it into the
	keymap.  Don't barf if current-local-map returns nil.

2000-07-24  Francis Wright  <fjw@maths.qmw.ac.uk>

	* dired.el (dired-sort-R-check): Added to allow recursive listing
	to be undone.
	(dired-sort-other): Use it.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* Release of cc-mode 5.27

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-engine.el (c-looking-at-inexpr-block): Replaced a call to
	c-beginning-of-statement-1 that caused a bad case of recursion
	which could consume a lot of CPU in large classes in languages
	that have in-expression classes (i.e. Java and Pike).

	* cc-engine.el (c-guess-basic-syntax): Check for in-expression
	statements before top level constructs (i.e. case 6 is moved
	before case 5 and is now case 4) to catch in-expression
	classes in top level expressions correctly.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-engine.el (c-guess-basic-syntax): Less naive handling of
	objc-method-intro. Case 4 removed and case 5I added.

	* cc-langs.el (c-append-paragraph-start): New variable used by
	c-common-init to get paragraph-start correct.
	* cc-langs.el (c-common-init): Use c-append-paragraph-start to
	initialize paragraph-start to make it correct both with and
	without the javadoc special case.

	* cc-mode.el (java-mode): Use c-append-paragraph-start to
	initialize paragraph-start for javadoc markup.

	* cc-vars.el (c-style-variables-are-local-p): Incompatible
	change by defaulting this to t.  It's motivated by the
	confusing behavior that otherwise arise from the style system
	when editing both java and non-java files at the same time
	(see the comments about style setting in c-common-init).

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-cmds.el (c-indent-new-comment-line): Added a kludge
	similar to the one in c-fill-paragraph to check the fill
	prefix from the adaptive fill function for sanity.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-defs.el (c-end-of-defun-1): Fixed forward scanning into
	defun block.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-mode.texi Documented the change of cpp-macro.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-align.el (c-lineup-multi-inher): Handle lines with
	leading comma nicely. Extended to handle member initializers
	too.

	* cc-engine.el: (c-beginning-of-inheritance-list,
	c-guess-basic-syntax): Fixed recognition of inheritance lists
	when the lines begins with a comma.

	* cc-mode.texi: Updated doc for c-lineup-multi-inher.

	* cc-vars.el (c-offsets-alist): Changed default for
	member-init-cont to c-lineup-multi-inher since it now handles
	member initializers and indents better for leading commas.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-cmds.el (c-electric-brace): Fixed some bugs in the state
	handling that caused class open lines to be recognized as
	statement-conts in some cases.

	* cc-cmds.el (c-indent-new-comment-line): Keep the fill prefix
	guessed by the adaptive fill function unless point is on the
	first line of a block comment.

	* cc-engine.el (c-forward-syntactic-ws): Fixed an infloop bug
	when the buffer ends with a macro continuation char.

	* cc-engine.el (c-guess-basic-syntax): Added support for
	function definitions as statements in Pike.  The first
	statement in a lambda block is now labeled defun-block-intro
	instead of statement-block-intro.

	* cc-engine.el (c-narrow-out-enclosing-class): Whack the state
	so that the class surrounding point is selected, not the one
	innermost in the state.

	* cc-engine.el (c-guess-basic-syntax): Fixed bug in
	recognition of switch labels having hanging multiline
	statements.

	* cc-engine.el (c-beginning-of-member-init-list): Broke out
	some code in c-guess-basic-syntax to a separate function.
	* cc-engine.el (c-just-after-func-arglist-p): Fixed
	recognition of member inits with multiple line arglists.
	* cc-engine.el (c-guess-basic-syntax): New case 5B.3 to detect
	member-init-cont when the commas are in funny places.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-defs.el (c-auto-newline): Removed this macro since it's
	not used anymore.

	* cc-engine.el (c-looking-at-bos): New helper function.
	* cc-engine.el (c-looking-at-inexpr-block): More tests to tell
	inexpr and toplevel classes apart in Pike.

	* cc-engine.el (c-guess-basic-syntax): Fixed bogus recognition
	of case 9A.

	* cc-langs.el, cc-mode.el (c-Pike-inexpr-class-key): New
	constant, since "class" can introduce an in-expression class
	in Pike nowadays.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-align.el (c-gnu-impose-minimum): Don't impose minimum
	indentation on cpp-macro lines.

	* cc-engine.el (c-guess-basic-syntax): Made the cpp-macro
	a syntax modifier like comment-intro, to make it possible to
	get syntactic indentation for preprocessor directives.  It's
	incompatible wrt to lineup functions on cpp-macro, but it has
	no observable effect in the 99.9% common case where cpp-macro
	is set to -1000.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-engine.el (c-guess-basic-syntax): Fixed bug with missed
	member-init-cont when the preceding arglist is several lines.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-styles.el (c-style-alist): The basic offset for the BSD
	style corrected to 8.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-styles.el (c-style-alist): Adjusted the indentation of
	brace list openers in the gnu style.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-cmds.el (c-indent-command): Obey c-syntactic-indentation.

	* cc-cmds.el (c-electric-brace, c-electric-slash,
	c-electric-star, c-electric-semi&comma, c-electric-colon,
	c-electric-lt-gt, c-electric-paren): Don't reindent old lines
	when c-syntactic-indentation is nil.

	* cc-engine.el (c-beginning-of-statement-1): Fixed bug where
	we were left at comments preceding the first statement when
	reaching the beginning of the buffer.

	* cc-vars.el (c-syntactic-indentation): New variable to turn
	off all syntactic indentation.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-cmds.el (c-fill-paragraph): Keep one or two spaces
	between the text and the block comment ender when it hangs,
	depending on how many there are before the fill.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-engine.el (c-beginning-of-closest-statement): New helper
	function to go back to the closest preceding statement start,
	which could be inside a conditional statement.
	* cc-engine.el (c-guess-basic-syntax): Use
	c-beginning-of-closest-statement in cases 10B.2, 17B and 17C.

	* cc-engine.el (c-guess-basic-syntax): Better handling of
	arglist-intro, arglist-cont-nonempty and arglist-close when
	the arglist is nested inside parens.  Cases 7A, 7C and 7F
	changed.

	* cc-langs.el (c-Java-javadoc-paragraph-start): Brought
	up-to-date with javadoc 1.2.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-engine.el (c-beginning-of-statement-1): Fixed handling of
	multiline Pike type decls.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-cmds.el (c-indent-new-comment-line): Always break
	multiline comments in multiline mode, regardless of
	comment-multi-line.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-engine.el (c-guess-basic-syntax): Fixed bug with
	fully::qualified::names in C++ member init lists.  Preamble in
	case 5D changed.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-langs.el (c-common-init): Handling of obsolete variables
	moved to c-initialize-cc-mode.  More compatible style override
	when using global style variables.
	* cc-mode.el (c-initialize-cc-mode): Handling of obsolete
	variables moved here.

	* cc-mode.texi: Documented the special behavior of
	c-special-indent-hook as a style variable.  Don't talk about
	doing (c-make-styles-buffer-local t) in a mode hook, since
	that's already too late to work right.

	* cc-styles.el (c-make-styles-buffer-local): Flag style
	variable localness in c-style-variables-are-local-p to make
	the compatibility measure in c-common-init work well.

	* cc-styles.el (c-set-style-1): c-special-indent-hook can no
	longer contain set-from-style.
	* cc-styles.el (c-initialize-builtin-style): Don't check for
	set-from-style on c-special-indent-hook.
	* cc-styles.el (c-copy-tree): Obsolete.  The standard function
	copy-alist is sufficient now.

	* cc-styles.el (c-set-style, c-set-style-1,
	c-get-style-variables): Fixes to variable initialization so
	that duplicate entries in styles have the same effect
	regardless of DONT-OVERRIDE.

	* cc-styles.el (c-set-style-2): Fixed bug where the
	initialization of inheriting styles failed when the
	dont-override flag is set.

	* cc-vars.el (c-special-indent-hook): Don't use set-from-style
	on this.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-defs.el (c-forward-comment): Removed the workaround
	introduced in 5.38 since it had worse side-effects.  If a line
	contains the string "//\"", it regarded the // as a comment
	start since the \ temporarily doesn't have escape syntax.

2000-07-17 Emmanuel Briot <briot@act-europe.fr>

	* ada-mode.el Got rid of all byte-compiler warnings on Emacs Load
	ada-xref.el before ada-prj.el, so that the Project menu is created
	when ada-prj tries to add to it.
	(ada-activate-keys-for-case): Suppress the characters that are not
	part of the Ada syntax. Better compatibility with else-mode
	(ada-adjust-case-interactive): When auto-casing is not active,
	correctly insert newlines (used to insert only ^M).  Prevent the
	syntax table from being changed in case of an error
        (or '_' becomes part of a word and some commands are confused).
	Do nothing if ada-auto-case is nil.
	(ada-after-keyword-p): Ignore keywords that are also attributes
	(ada-batch-reformat): Update usage comment
	(ada-call-from-contextual-menu): New function
	(ada-case-read-exceptions): Reinitialize the casing exception list
	first to nil first, so that the casing exception file can be
	shared.
	(ada-check-defun-name): Handles "configure" keyword for gnatdist
	files.
	(ada-compile-goto-error): Fix regexp used to detect a file:line
	anywhere in the error message
	(ada-contextual-menu-last-point): New variable
	(ada-create-keymap): If the variable delete-key-deletes-forward is
	t on XEmacs, it means that DEL should delete one character
	forward.
	(ada-create-menu): Use :included instead of :visible for XEmacs.
	New submenu "Options".
	(ada-end-stmt-re): Correctly indent "select ... then abort"
	statements.
	(ada-fill-comment-paragraph): Correctly delete all leading '--'
	even if they don't match ada-fill-comment-prefix Fix handling of
	paragraphs on the first or last line of a file.
	(ada-format-paramlist): Fix handling of default parameter values.
	(ada-get-body-name): New function.
	(ada-get-current-indent): Optimized by searchling directly for an
	existing generic part or a statement outside of it.  Handle
	ada-indent-align-comments when indenting comments Replaced some
	regexps by testing directly the next character. This results in a
	huge speedup on some files.  New indentation scheme for renames
	statements.  Stop looking for the 'while' or 'for' associated with
	a 'loop' at the first semicolon encountered.  A "return" can also
	match an anonymous access subprogram declaration.
	(ada-get-indent-noindent): Ignore strings and comments when
	looking for the keywords "record" and "private".
	(ada-goto-matching-decl-start): When matching "if", make sure we
	are not in fact seeing "end if".  Ignore "when" statements except
	when initial keyword was "begin".  Fix handling of nested
	procedures.  Add a recursive call to this function to skip over
	other 'end' statmts.  Fix indentation for "when .. => begin"
	(ada-in-open-paren-p): Fix indentation for complex boolean
	expressions, where 'and then', 'or else' and parenthesis
	statements are mixed up.
	(ada-in-paramlist-p): Skip comments while searching for the
	beginning Fix handling of operator declarations.
	(ada-indent-align-comments): New variable
	(ada-indent-current): Change the syntax table only in the
	protected section, so that we are sure it is restored correctly.
	(ada-indent-on-previous-lines): Use ada-use-indent and
	ada-with-indent Correctly indent "select ... then"
	(ada-indent-region): Slight speedup.
	(ada-indent-renames): New variable.
	(ada-last-which-function-subprog, ada-last-which-function-line):
	New variables
	(ada-looking-at-semi-private): Correctly indent the 'private'
	keyword when it is the first word in a package declaration.
	(ada-loose-case-word): Stop searching if at the end of the buffer.
	(ada-loose-case-word, ada-capitalize-word): Recase the whole word
	even if point is not initially at the end of the word.
	(ada-matching-decl-start-re): Add "when".
	(ada-mode): Add support for abbrev-mode, outline-mode and
	which-func-mode Override the old find-file.el entry in
	ff-special-constructs since it is using the obsolete
	ada-spec-suffix variable
	(ada-no-auto-case): New function
	(ada-scan-paramlist): When parsing the argument type, accept
	spaces (as in "X 'Class", generated by Rational Rose).
	(ada-other-file-name): No longer loads the other file.
	(ada-popup-menu): Save and restore the current buffer and cursor
	position before and after displaying the menu.
	(ada-search-ignore-complex-boolean): New function.
	(ada-uncomment-region): Emacs21 already knows how to delete
	comments not starting in the first column.
	(ada-use-indent): New variable
	(ada-which-function): New function.
	(ada-with-indent): New variable
	(ada-xemacs): evaluate it at compile time too, so that ada-mode.el
	can be batch-compiled from the command line.

	* ada-xref.el: Got rid of all byte-compiler warnings on Emacs.
	Add to the menu when the file is loaded, not in ada-mode-hook.
	Add -toolbar to the default ddd command Switches moved from
	ada-prj-default-comp-cmd and ada-prj-default-make-cmd to
	ada-prj-default-comp-opt
	(ada-add-ada-menu): Remove the map and name parameters Add the Ada
	Reference Manual to the menu
	(ada-check-current): rewritten as a call to ada-compile-current
	(ada-compile): Removed.
	(ada-compile-application, ada-compile-current, ada-check-current):
	Set the compilation-search-path so that compile.el automatically
	finds the sources in src_dir.  Automatic scrollong of the
	compilation buffer.  C-uC-cC-c asks for confirmation before
	compiling
	(ada-compile-current): New parameter, prj-field
	(ada-complete-identifier): Load the .ali file before doing
	processing
	(ada-find-ali-file-in-dir): prepend build_dir to obj_dir to
	conform to gnatmake's behavior.
	(ada-find-file-in-dir): New function
	(ada-find-references): Set the environment variables for gnatfind
	(ada-find-src-file-in-dir): New function.
	(ada-first-non-nil): Removed
	(ada-gdb-application): Add support for jdb, the java debugger.
	(ada-get-ada-file-name): Load the original-file first if not done
	yet.
	(ada-get-all-references): Handles the new ali syntax (parent types
	are found between <>).
	(ada-initialize-runtime-library): New function
	(ada-mode-hook): Always load a project file when a file is opened,
	so that the casing exceptions are correctly read.
	(ada-operator-re): Add all missing operators ("abs", "rem", "**").
	(ada-parse-prj-file): Use find-file-noselect instead of find-file
	to open the project file, since the latter does not work with
	speedbar Get default values before loading the prj file, or the
	default executable file name is wrong.  Use the absolute value of
	src_dir to initialize ada-search-directories and
	compilation-search-path,...  Add the standard runtime library to
	the search path for find-file.
	(ada-prj-default-debugger): Was missing an opening '{'
	(ada-prj-default-bind-opt, ada-prj-default-link-opt): New
	variables.
	(ada-prj-default-gnatmake-opt): New variable
	(ada-prj-find-prj-file): Handles non-file buffers For non-Ada
	buffers, the project file is the default one Save the windows
	configuration before displaying the menu.
	(ada-prj-src-dir, ada-prj-obj-dir, ada-prj-comp-opt,...): Removed
	(ada-read-identifier): Fix xrefs on operators (for "mod", "and",
	...)  regexp-quote identifiers names to support operators +,
	-,... in regexps.
	(ada-remote): New function.
	(ada-run-application): Erase the output buffer before starting the
	run Support remote execution of the application.  Use
	call-process, or the arguments are incorrectly parsed
	(ada-set-default-project-file): Reread the content of the active
	project file, not the one from the current buffer When a project
	file is set as the default project, all directories are
	automatically associated with it.
	(ada-set-environment): New function
	(ada-treat-cmd-string): New special variable ${current}
	(ada-treat-cmd-string): Revised.  The substitution is now done for
	any ${...} substring
	(ada-xref-current): If no body was found, compiles the spec
	instead.  Setup ADA_{SOURCE,OBJECTS}_PATH before running the
	compiler to get rid of command line length limitations.
	(ada-xref-get-project-field): New function
	(ada-xref-project-files): New variable
	(ada-xref-runtime-library-specs-path)
	(ada-xref-runtime-library-ali-path): New variables
	(ada-xref-set-default-prj-values): Default run command now does a
	cd to the build directory.  New field: main_unit Provide a default
	file name even if the current buffer has no prj file.

	* ada-prj.el:
	Rewritten to show a tabbed-dialog.
	(ada-prj-add-ada-menu): Remove the map and name parameters.
	(ada-prj-display-page, ada-prj-field, ada-prj-initialize-values):
	New function
	(ada-prj-load-directory, ada-prj-subdirs-of): New functions
	(ada-prj-load-from-file): New function
	(ada-prj-save): Always save fields that depend on the current buffer
	(ada-prj-show-value): New function

	* ada-stmt.el (ada-stmt-add-to-ada-menu): Hide the menu if not in
	Ada mode. This will allow us to display the Ada menu in any buffer
	we want (for project items).
	(ada-header-tmpl): Use ada-fill-comment-prefix to put the correct
	number of spaces in the header.

2000-07-24  Dave Love  <fx@gnu.org>

	* ediff-init.el (ediff-region-help-echo): Bind face-help.

2000-07-23  Noah Friedman  <friedman@splode.com>

	* type-break.el (type-break): perform autosave.
	Suggested by Stephen Gildea <gildea@intouchsys.com>.
	(type-break-do-query): Cancel query schedule while performing
	actual query, to avoid possibility of a second query being made
	while first one is already in progress.
	(type-break-time-stamp-format): New variable.
	(type-break-time-stamp): New function.
	(type-break-time-warning): Use it.
	(type-break-keystroke-warning): Use it.
	(type-break-noninteractive-query): Use it.

	* emacs-lisp/eldoc.el (eldoc-minor-mode-string): Add autoload
	cookie.
	Use add-minor-mode to set minor-mode-alist, if available.
	(eldoc-echo-area-use-multiline-p): New user option.
	(eldoc-echo-area-multiline-supported-p): New variable.
	(eldoc-docstring-format-sym-doc): Use them.
	(eldoc-mode): If not using idle timers, append to local post and
	pre command hooks.  Suggested by David Byers <davby@ida.liu.se>.
	(eldoc-display-message-no-interference-p): Don't interfere with
	edebug.
	Add autoload cookie for eldoc-mode minor-mode-alist initialization.
	(eldoc-function-arglist): New function.
	(eldoc-function-argstring): Use it.

	* menu-bar.el (menu-bar-files-menu [recover-session]): Make sure
	auto save directory exists before calling directory-files.

2000-07-23  Dave Love  <fx@gnu.org>

	* international/iso-transl.el (iso-transl-char-map): Fix ^e, ^i,
	^o, ^u.

2000-07-21  Dave Love  <fx@gnu.org>

	* ediff-init.el (ediff-region-help-echo): Modify to use overlay
	now passed to the function.  It now works properly.

	* smerge-mode.el (smerge-mode-menu): Fill it out.

2000-07-20  Gerd Moellmann  <gerd@gnu.org>

	* info-look.el (info-lookup): If *info* is shown in another frame
	on the same display, select that frame, instead of switching to
	the Info buffer in another window of the selected frame.

	* simple.el (universal-argument-map): Bind numeric keypad keys
	kp-0 to kp-9 and kp-subtract.
	(digit-argument): Handle these keys.

2000-07-20  Dave Love  <fx@gnu.org>

	* net/goto-addr.el (goto-address-fontify): Don't bother with
	buffer-modified and read-only stuff -- irrelevant with overlays.
	Put an extra property on the overlays and use it to clean up in
	case goto-address is re-run.

2000-07-19  Richard M. Stallman  <rms@gnu.org>

	* timer.el (run-with-idle-timer): Doc fix.

	* mail/mail-utils.el (mail-strip-quoted-names):
	Handle case where <...> appears inside "...".
	Use replace-match to edit the string more simply.
	(rmail-dont-reply-to): Cope with an unmatched ".

2000-07-19  Dave Love  <fx@gnu.org>

	* ediff-init.el (ediff-region-help-echo): Partially fix for Emacs
	implementation.

	* mouse.el (popup-menu): Allow a list of keymaps for menu arg.
	(mouse-popup-menubar, mouse-popup-menubar-stuff): New functions.
	(global-map): Bind c-down-mouse-3 to mouse-popup-menubar-stuff.

2000-07-19  Gerd Moellmann  <gerd@gnu.org>

	* textmodes/refer.el: Correct maintainer's email address.

	* progmodes/hideif.el: Correct author's email address.
	Fix typo in comment.

	* xml.el: New file.

	* mail/mailheader.el: Correct author's mail address.

	* gnus/parse-time.el: Correct author's mail address.

2000-07-19  Colin Walters <walters@cis.ohio-state.edu>

	* comint.el (comint-highlight-input, comint-highlight-face):
	New user options.
	(comint-input-ring-file-name): Change custom type.
	(comint-mode-map): Bind mouse-2.
	(comint-insert-clicked-input): New function.
	(comint-send-input): Handle input highlighting.

2000-07-18  Stefan Monnier  <monnier@cs.yale.edu>

	* mouse.el (popup-menu): New function.
	(mouse-major-mode-menu): Use it.

2000-07-18  Dave Love  <fx@gnu.org>

	* bindings.el (mode-line-mule-info, mode-line-modified): help-echo
	improvements.

2000-07-18  Gerd Moellmann  <gerd@gnu.org>

	* faces.el (face-font-selection-order)
	(face-font-family-alternatives): Add custom type.

2000-07-18  Dave Love  <fx@gnu.org>

	* cus-edit.el (custom-variable-reset-saved)
	(custom-variable-reset-standard): Remove unused bindings.

	* rect.el (open-rectangle-line): Remove unused let.

	* hl-line.el (hl-line-highlight): Check hl-line-mode.

2000-07-18  Gerd Moellmann  <gerd@gnu.org>

	* cdl.el: Fix `Maintainer' keyword.

	* play/pong.el: Add author's email address.

2000-07-17  Sam Steingold  <sds@gnu.org>

	* files.el (insert-directory): Call `split-string' instead of
	re-implementing it.

2000-07-18  Gerd Moellmann  <gerd@gnu.org>

	* mail/vms-pmail.el: Change maintainer to FSF.

	* net/goto-addr.el: Change maintainer to FSF.

	* recentf.el: Update from author.

	* info.el (Info-title-face-alist): Removed.

2000-07-18  Eli Zaretskii  <eliz@is.elta.co.il>

	* eshell/eshell.el (eshell): Replace links to eshell.info with
	links to eshell, to avoid problems on systems where the manual is
	installed as `eshell'.
	* eshell/esh-cmd.el (eshell-cmd): Ditto.
	* eshell/em-smart.el (eshell-smart): Ditto.
	* eshell/em-banner.el (eshell-banner): Ditto.
	* eshell/em-alias.el (eshell-alias, eshell-bad-command-tolerance): Ditto.

	* eshell/em-unix.el (eshell-shuffle-files): Don't disable
	same-file check in the MS-DOS version (it does support inodes).

	* eshell/em-alias.el (eshell-maybe-replace-by-alias): Doc fix.

	* eshell/eshell.el (eshell-directory-name):
	Run default directory name through convert-standard-filename.

2000-07-18  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el (select-safe-coding-system):
	Fix typo in the comment.

	* language/european.el (compound-text):
	Force katakana-jisx0201 to be designated to G1.

	* international/mule-conf.el (oldjis-newjis-jisroman-ascii):
	Don't translate some national variant characters of latin-jisx0201.
	(x-ctext): Force katakana-jisx0201 to be designated to G1.

	* international/kkc.el (kkc-after-update-conversion-functions):
	New variable.
	(kkc-update-conversion): Run functions in it at the tail.

2000-07-16  John Wiegley  <johnw@gnu.org>

	* lisp/align.el (align-newline-and-indent):
	Adding new function.  for auto-aligning blocks of code on RET.
	(align-region): Fixed badly formatted minibuffer message.

2000-07-17  Kenichi Handa  <handa@etl.go.jp>

	* international/kkc.el (kkc-show-conversion-list-count): Customize it.
	(kkc-region): Update kkc-next-count and kkc-prev-count here.  Show
	the conversion list at first if appropriate.
	(kkc-next): Don't update kkc-next-count here.
	(kkc-prev): Don't update kkc-prev-count here.
	(kkc-show-conversion-list-update): Fix setting up of conversion
	list message.

2000-07-16  Stefan Monnier  <monnier@cs.yale.edu>

	* mouse.el (mouse-major-mode-menu-1): Get the submenu with lookup-key.

2000-07-16  Dave Love  <fx@gnu.org>

	* cus-edit.el (custom-buffer-create-internal): Use a help-echo
	function to be more specific.

	* wid-edit.el (widget-specify-field, widget-specify-button): Allow
	non-string help-echo.
	(widget-types-convert-widget): Defsubst it.
	(widget-echo-help): Try to cope with a help-echo function of two
	possible sorts.

2000-07-15  Jason Rumney  <jasonr@gnu.org>

	* w32-fns.el (w32-enable-italics, w32-charset-to-codepage-alist):
	Declare as obsolete.

	* term/w32-win.el: Make FONTNAME arg to set-fontset-font a cons.

2000-07-14  Gerd Moellmann  <gerd@gnu.org>

	* hilit-chg.el: Fix typo.

2000-07-14  Dave Love  <fx@gnu.org>

	* info.el (Info-mode-menu): Fix use of :help, :enable.

2000-07-14  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/easymenu.el (easy-menu-convert-item-1): Intern the label.

2000-07-13  Dave Love  <fx@gnu.org>

	* emacs-lisp/easymenu.el: Doc fixes.
	(easy-menu-remove): Defalias to ignore.

	* textmodes/reftex-cite.el (reftex-bibtex-selection-callback):
	Call throw correctly.

2000-07-13  Gerd Moellmann  <gerd@gnu.org>

	* faces.el (frame-background-mode): Doc fix.

	* simple.el (eval-expression-print-length): Change custom type to
	allow entering nil as value.

2000-07-13  Dave Love  <fx@gnu.org>

	* progmodes/fortran.el (fortran-imenu-generic-expression):
	Change definition layout.
	(fortran-mode-menu): Reinstate customize entries.

	* cus-edit.el (custom-group-menu-create, customize-menu-create):
	Use :filter, per old XEmacs code.

2000-07-12  Gerd Moellmann  <gerd@gnu.org>

	* term.el (term-send-raw-meta): Strip modifiers from the keyboard
	event when deciding what to send to the terminal.

2000-07-12  Dave Love  <fx@gnu.org>

	* cus-start.el: Add optional version as 4th element of specs and
	use it for several things new in v21.  Remove load-path.  Fix type
	of line-number-display-limit.

2000-07-11  Dave Love  <fx@gnu.org>

	* progmodes/fortran.el: Don't require easymenu.
	Use repeat counts in various regexps.
	(fortran-mode-syntax-table): Defvar directly.
	(fortran-font-lock-keywords-1, fortran-font-lock-keywords-2)
	(fortran-font-lock-keywords-3, fortran-font-lock-syntactic-keywords):
	Use defvar, not defconst.
	(fortran-mode-map): Change locals in `let'.  Use `fortran-auto-fill'.
	(fortran-mode): Set fortran-comment-line-start-skip,
	fortran-comment-line-start-skip, dabbrev-case-fold-search.
	(fortran-comment-indent): Use defsubst.
	(fortran-indent-comment, fortran-indent-to-column, fortran-break-line):
	Use fortran-comment-indent, not fortran-comment-indent-function.
	(fortran-comment-region, fortran-electric-line-number): Simplify.
	(fortran-auto-fill): New function.
	(fortran-do-auto-fill): Deleted.
	(fortran-find-comment-start-skip):
	Check for non-null comment-start-skip.
	(fortran-auto-fill-mode, fortran-fill-statement):
	Use fortran-auto-fill.
	(fortran-fill): Use fortran-auto-fill.  Check for null
	comment-start-skip.  Simplify final clause and use end-of-line finally.

	* widget.el (widget-plist-member): New alias.

2000-07-11  Eli Zaretskii  <eliz@is.elta.co.il>

	* eshell/esh-module.el (toplevel): Reference
	byte-compile-current-file only if it is bound.

2000-07-10  Gerd Moellmann  <gerd@gnu.org>

	* dired.el: Don't require `dired-aux'.

2000-07-10  Miles Bader  <miles@lsi.nec.co.jp>

	* dired-aux.el (dired-show-file-type): New function.
	* dired.el (dired-mode-map): Bind `w' to dired-show-file-type.
	(dired-show-file-type): Add autoload.

2000-07-10  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-diag.el (describe-font): Adjusted for the
	change of fontset-info.
	(print-fontset): Likewise.

2000-07-09  Stefan Monnier  <monnier@cs.yale.edu>

	* mouse.el (mouse-drag-region): Use functionp rather than fboundp.

2000-07-07  Gerd Moellmann  <gerd@gnu.org>

	* bindings.el: Bind `[delete]' to delete-char.

	* dired.el (dired-find-alternate-file): New function.
	(dired-mode-map): Bind `a' to dired-find-alternate-file.
	(toplevel): Require dired-aux when compiling.
	(dired-buffers): Move defvar within file to avoid compiler warning.

	* info.el (Info-last-search): Variable removed.
	(Info-search-history): New variable.
	(Info-search): New Info-search-history.

	* battery.el, info-look.el: Change author's mail address.

2000-07-07  Jonathan I. Kamens  <jik@kamens.brookline.ma.us>

	* mail/rmail.el (rmail-clear-headers): Don't throw an error
	if rmail-ignored-headers is nil.
	(rmail-retry-failure): Bind rmail-ignored-headers and
	rmail-displayed-headers to nil.

2000-07-06  Gerd Moellmann  <gerd@gnu.org>

	* lpr.el (lpr-page-header-switches): Add `-h' switch.
	(print-region-1): Don't hard code `-h' here.

	* Makefile.in (TAGS-LISP): Don't use `$(lispsource)'.

2000-07-01  Francesco Potorti`  <pot@gnu.org>

	* rmail.el (mail-unsent-separator): Changed "the" to "\\w+", as
	exim can use "your message" instead of "the message".

2000-07-06  Stefan Monnier  <monnier@cs.yale.edu>

	* facemenu.el: Docstrings fixes.
	(facemenu-get-face): Don't use internal-find-face.
	(facemenu-iterate): Rename arg to match the docstring.

	* newcomment.el (uncomment-region): Be more careful when skipping
	backwards over `=' not to bump into BOBP.

2000-07-05  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff-diff.el (ediff-wordify): Use syntax table.
	* ediff-init.el (ediff-has-face-support-p): Use
	ediff-color-display-p.
	(ediff-color-display-p): Use display-color-p, changed to defun
	from defsubst.
	Got rid of special cases for NeXT and OS/2.
	* ediff-wind.el (ediff-setup-control-frame): Set proper modeline
	face.

2000-07-05  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/lucid.el: Require CL.
	(copy-tree, remprop): Remove, it's provided by CL.
	(map-keymap): Define in terms of cl-map-keymap.
	(extent-property, set-extent-end-glyph): New functions.

	* emacs-lisp/cl-extra.el (cl-map-keymap): Handle char-tables.

2000-07-05  Gerd Moellmann  <gerd@gnu.org>

	* Makefile.in (DONTCOMPILE): Add comment that the name may
	not be changed without changing the make-dist script.

	* emacs-lisp/cl-extra.el (cl-old-mapc): Removed; don't defalias mapc.
	(cl-mapc): Use mapc instead of cl-old-mapc.

2000-07-05  Andrew Innes  <andrewi@gnu.org>

	* makefile.nt: Add support for `bootstrap' and related targets.

2000-07-05  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/easymenu.el (easy-menu-define): Docstring fix.
	(easy-menu-do-define): Use `menu-item' format.
	Handle case where easy-menu-create-menu returns a symbol.
	Manually call the potential top-level filter in the function binding.
	(easy-menu-filter-return): New arg NAME.
	Convert to a keymap if MENU is an XEmacs menu.
	(easy-menu-convert-item-1): New.  Extracted from easy-menu-do-add-item.
	(easy-menu-converted-items-table, easy-menu-convert-item):
	New var and fun to memoize easy-menu-convert-item-1.
	(easy-menu-do-add-item): Use it.
	(easy-menu-create-menu): Use easy-menu-convert-item.
	Wrap easy-menu-filter-return around any :filter specification.
	Don't convert the menu if a filter was specified.
	Tell easy-menu-make-symbol not to check for MENU being an expression.
	(easy-menu-make-symbol): New arg NOEXP.

2000-07-05  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/lisp-mode.el (eval-defun-2): Remove parameter
	EVAL-DEFUN-ARG-INTERNAL; always print to minibuffer.
	(eval-defun): If called with prefix arg, instrument code for
	Edebug.

	* emacs-lisp/edebug.el (edebug-eval-defun): Make doc string
	similar to that of eval-defun.

2000-07-04  Dave Love  <fx@gnu.org>

	* hl-line.el (hl-line-overlay): Make it permanent-local.

	* calendar/todo-mode.el: Replaced with a working version, based on
	revision 1.34 tidied up.

2000-07-03  Miles Bader  <miles@lsi.nec.co.jp>

	* paths.el (prune-directory-list): New function.
	(Info-default-directory-list): Rewritten to more methodically
	enumerate a big list of possible info directories (based on the
	list used by the standalone info reader).

	* info.el (info-initialize): Use prune-directory-list to remove
	non-existent directories from Info-directory-list.

	* paths.el (Info-default-directory-list): Try a list of possible
	info-directories instead of a single one.  Add the possible
	info directory "/usr/share/info".

	* woman.el (woman-man.conf-path): Explicitly include the debian
	man-db config file "/etc/manpath.config".
	(woman-parse-man.conf): Also handle MANDATORY_MANPATH entries, as
	are present in `manpath.config'.
	(woman-manpath): Include "/usr/share/man".

2000-07-03  Gerd Moellmann  <gerd@gnu.org>

	* frame.el (blink-cursor-mode): Don't hide cursor initially.

	* startup.el (command-line): Initialize blink-cursor based
	on window-system.

	* frame.el (blink-cursor): Default to nil if not running under
	a window-system.

	* faces.el (face-spec-set): Ignore invalid attributes like 20.x.
	(face-x-resources): Remove duplicate entry for :font.

	* textmodes/refer.el (refer-find-entry-internal): Use some-window
	instead of cycling through windows with next-window.

	* term/sup-mouse.el (sup-pos-to-window): Use some-window instead
	of cycling through windows with next-window.

	* term/bg-mouse.el (bg-window-from-x-y): Use some-window instead
	of cycling through windows with next-window.

	* emacs-lisp/edebug.el (edebug-window-live-p, edebug-window-list)
	(edebug-get-displayed-buffer-points): Use walk-windows/some-window
	instead of cycling through windows with next-window.

	* calendar/appt.el (appt-select-lowest-window): Use walk-windows
	instead of cycling through windows with next-window.

	* dabbrev.el (dabbrev--find-expansion): Use walk-windows instead
	of cycling through windows with next-window.

	* terminal.el (te-process-output): Use walk-windows instead of
	cycling through windows with next-window.

	* server.el (server-switch-buffer): Use some-window instead of
	cycling through windows with next-window.

	* window.el (some-window): New function.
	(walk-windows): Remove reference to walk-windows-start.

	* hilit19.el (hilit-lookup-face-create): Don't set face colors to nil.

2000-07-03  Richard Stallman  <rms@gnu.org>

	* window.el (walk-windows): Guarantee termination by keeping a list
	of all the windows already handled.

2000-06-28  Eli Zaretskii  <eliz@is.elta.co.il>

	* mouse.el (mouse-show-mark, mouse-save-then-kill): Don't use
	window-system.

	* man.el (Man-notify-when-ready): Don't use window-system.  If
	Man-notify-method is newframe, and the display is not
	multi-frame, select the frame created for the man page.
	(Man-init-defvars): Doc fix.

2000-06-28  Gerd Moellmann  <gerd@gnu.org>

	* faces.el (region): Change background color for light background.

	* ediff-wind.el (ediff-setup-control-frame): Remove :box
	attribute from mode-line face of Ediff control frame.

	* replace.el (query-replace-map): Bind `e' like `E'.

2000-06-28  Eli Zaretskii  <eliz@is.elta.co.il>

	* menu-bar.el (menu-bar-edit-menu) <mark-whole-buffer>:
	Change name to "Select All".

	* dos-fns.el (convert-standard-filename): Fix last change.

2000-06-27  Gerd Moellmann  <gerd@gnu.org>

	* help.el (describe-variable): Don't insert a second `'s' in front
	of the string `value is shown below'.  Since the syntax-table is
	set to emacs-lisp-mode-syntax-table, forward-sexp skips over
	an existing `'s', so that this won't be deleted.

	* pcmpl-cvs.el, pcmpl-gnu.el, pcmpl-linux.el, pcmpl-rpm.el:
	* pcmpl-unix.el: New files.

2000-06-26  Stefan Monnier  <monnier@cs.yale.edu>

	* wid-edit.el (widget-member): Use the new plist-member.

2000-06-26  Gerd Moellmann  <gerd@gnu.org>

	* replace.el (perform-replace): Undo change of 2000-04-04.
	Instead, move backward 1 character at the end of the loop when
	necessary.

	* faces.el (fringe): Change face for different backgrounds.

	* eshell/esh-module.el (toplevel): Load defgroup's differently;
	patch from John.

	* eshell/*.el: Change spelling of the Free Software Foundation.

	* eshell/esh-toggle.el: Removed.

	* Makefile.in (DONTCOMPILE): Add eshell/esh-group.el.

	* menu-bar.el (menu-bar-tools-menu): Call read-mail-command
	interactively.

2000-06-26  Alex Schroeder  <alex@gnu.org>

	* sql.el (sql-interactive-mode-map): Use `kbd' in calls to
	`define-key'; instead of checking `(emacs-version)' check for
	`set-keymap-parent' and `set-keymap-name' directly.  Add entries
	for `;' and `o' which might be electric.

	(sql-electric-stuff): New user option.
	(sql-magic-go): New function which uses `sql-electric-stuff'.
	(sql-magic-semicolon): New function which uses
	`sql-electric-stuff'.

	(sql-accumulate-and-indent): Insert newline if `comint-accumulate'
	is not fboundp.

	(sql-oracle-options): New variable.
	(sql-oracle): Use it.

	(sql-imenu-generic-expression): Doc change.
	(sql-find-sqli-buffer): Make sure the default-value of sql-buffer
	is used.

	(sql-informix): Added command line parameter "-" to force
	sql-informix-program to use stdout.

2000-06-25  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/codepage.el (cp-coding-system-for-codepage-1): Doc fix.
	(cp864-decode-table): Doc fix.
	(cp720-decode-table): New variable, supports the Arabic OEM
	codepage used by Windows.
	(cp737-decode-table): New, Greek OEM codepage used by Windows.

2000-06-23  Dave Love  <fx@gnu.org>

	* font-lock.el (font-lock-support-mode) <defgroup>: Add :version.
	(font-lock-fontify-anchored-keywords): Use
	line-beginning-position.
	(global-font-lock-mode): Use mapc.

2000-06-23  Stefan Monnier  <monnier@cs.yale.edu>

	* eshell/esh-module.el: Require CL when compiling.

2000-06-23  Gerd Moellmann  <gerd@gnu.org>

	* comint.el (comint-substitute-in-file-name): Call replace-match
	with second and third arg t.

	* cus-edit.el (custom-button-face, custom-button-pressed-face):
	Specify foreground color.

	* faces.el (tool-bar, mode-line, header-line): Specify foreground
	color.

	* Makefile.in (DONTCOMPILE): Add eshell/esh-maint.el.

	* eshell/esh-cmd.el (eshell-rewrite-for-command): Use cdr and
	cddr instead of cdddr.

	* eshell/esh-util.el (eshell-sublist): Use eshell-copy-list
	instead of copy-list.

	* eshell/esh-mode.el (eshell-mode): Use eshell-copy-list instead
	of copy-list.

	* subdirs.el: Add eshell subdirectory.

	* eshell: New subdirectory containing the Eshell package.

	* pcomplete.el: New file.

2000-06-23  Paul Eggert  <eggert@twinsun.com>

	* mail/mailpost.el (post-mail-send-it): Make sure file has
	proper permissions from birth.

	* files.el (basic-save-buffer-2): When temporarily setting
	file modes, set them to current modes plus 0200, not to 0777.

	* emerge.el (emerge-make-temp-file): Make sure file has proper
	permissions from birth.

2000-06-22  Eli Zaretskii  <eliz@is.elta.co.il>

	* files.el (make-backup-file-name-1): On DOS/Windows, run the
	backup file name through convert-standard-filename.

	* dos-fns.el (convert-standard-filename): Convert leading
	directories as well.  When long file names are supported, convert
	characters that are invalid in Windows file names.

2000-06-22  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Fix bug: if ^L is the very first buffer character,
	ps-print crashes.  New feature: page selection for printing.  Create
	raw-text-unix coding system for XEmacs.  Doc fix.
	(ps-print-version): New version number (5.2.3).
	(ps-plot-region): Bug fix.
	(ps-setup, ps-init-output-queue, ps-output, ps-begin-job, ps-end-file)
	(ps-header-sheet, ps-generate, ps-end-job): Code fix.
	(ps-restore-selected-pages, ps-selected-pages, ps-print-page-p): New
	funs.
	(ps-selected-pages, ps-last-selected-pages, ps-first-page)
	(ps-last-page): New vars.

2000-06-21  Gerd Moellmann  <gerd@gnu.org>

	* progmodes/sh-script.el (sh-while-getopts): Fix handling of
	empty option string.

2000-06-21  Eli Zaretskii  <eliz@is.elta.co.il>

	* man.el (man): Doc fix.

2000-06-21  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el (set-language-info-alist): Docstring
	fixed.

2000-06-20  Gerd Moellmann  <gerd@gnu.org>

	* version.el (emacs-version): Use ISO date format.

	* emulation/pc-select.el (pc-selection-mode): Bind `M-\d'
	instead of `M-backspace'.

	* simple.el (turn-off-auto-fill): New function.

2000-06-20  Stefan Monnier  <monnier@cs.yale.edu>

	* jit-lock.el (with-buffer-prepared-for-jit-lock):
	Renamed from with-buffer-prepared-for-font-lock and use
	inhibit-modification-hooks rather than setting *-change-functions.
	Update all functions to use the new name.
	(jit-lock-first-unfontify-pos): New semantics (and doc).
	(jit-lock-mode): Make non-interactive.
	Don't automatically turn on font-lock.
	Set jit-lock-first-unfontify-pos to indicate deferred-contextual mode.
	Always use jit-lock-after-change.
	Remove and restore font-lock-after-change-function.
	(turn-on-jit-lock, jit-lock-after-fontify-buffer)
	(jit-lock-after-unfontify-buffer): Remove.
	(jit-lock-stealth-fontify):
	Reset jit-lock-first-unfontify-pos to point-max rather than to nil.
	(jit-lock-after-change): Set the `fontified' text-prop to nil.

2000-06-20  Sam Steingold  <sds@gnu.org>

	* emacs-lisp/cl-indent.el (toplevel): Indent
	`print-unreadable-object' properly.  Untabify.

2000-06-14  Carsten Dominik  <dominik@strw.leidenuniv.nl>

	* textmodes/reftex.el (reftex-find-citation-regexp-format):
	Support for bibentry.
	(reftex-compile-variables): Fixed problem with end of section-re.

	* texmodes/reftex-dcr.el (reftex-view-crossref,
	reftex-view-crossref-from-bibtex):
	Deal with changed `reftex-find-citation-regexp-format'.
	(reftex-view-regexp-match, reftex-view-crossref-from-bibtex):
	Replaced `remprop' with `put'.
	(reftex-view-crossref, reftex-view-crossref-when-idle):
	Support for bibentry.

	* textmodes/reftex-vars.el (reftex-cite-format-builtin):
	New entry for bibentry package.

	* textmodes/reftex-parse.el (reftex-locate-bibliography-files):
	Regexp also matches "\nobibliography".

	* textmodes/reftex-global.el (reftex-renumber-simple-labels):
	Call `reftex-ensure-write-access' before doing anything.
	(reftex-ensure-write-access): New function.

2000-06-14  Carsten Dominik  <dominik@strw.leidenuniv.nl>

	* progmodes/idlwave.el: File re-installed (update to version 4.2)

	* progmodes/idlw-shell.el: File re-installed (update to version 4.2)

	* progmodes/idlw-rinfo.el: File re-installed (update to version 4.2)

	* progmodes/idlw-toolbar.el: File re-installed (update to version 4.2)


2000-06-20  Dave Love  <fx@gnu.org>

	* faces.el (frame-background-mode): Use set-default, not set, in
	setter.
	(frame-update-faces, frame-update-face-colors): Define with
	defalias.

	* enriched.el (enriched-decode-foreground)
	(enriched-decode-background): Don't use internal-find-face.

	* apropos.el: Doc fixes.

	* cus-edit.el (customize-changed-options): Check arg.
	(customize-version-lessp): Don't require decimal point.

	* custom.el (defcustom, defgroup): Doc fix.

	* newcomment.el (comment) <defgroup>: Add :version.
	(comment-multi-line): Doc fix.

	* emulation/mlsupport.el (define-hooked-local-abbrev,
	define-hooked-global-abbrev): Fix, using define-abbrev.

2000-06-19  Gerd Moellmann  <gerd@gnu.org>

	* menu-bar.el (menu-bar-edit-menu): Add menu item for marking
	the whole buffer.

2000-06-19  Dave Love  <fx@gnu.org>

	* menu-bar.el (menu-bar-options-save): New function.
	(menu-bar-options-menu): Use it.
	(menu-bar-options-menu) <toggle-global-lazy-font-lock-mode>:
	Simplify.

2000-06-19  Andreas Schwab  <schwab@suse.de>

	* progmodes/etags.el (tags-query-replace): Put new parameters
	START and END at the end, for backward compatibility.

2000-06-19  Kenichi Handa  <handa@etl.go.jp>

	* international/codepage.el:
	(cp-coding-system-for-codepage-1): Delete special codes for
	generating xxx-dos coding system because now a CCL based coding
	system can handle EOL conversion by default.

	* international/mule.el (make-coding-system): Generate subsidiary
	coding systems for EOL handling variants even for a CCL based
	coding system.

2000-06-19  Kenichi Handa  <handa@etl.go.jp>

	* international/isearch-x.el (isearch-minibuffer-input-method)
	(isearch-minibuffer-input-method-function): These variables
	deleted.
	(isearch-with-input-method): Don't use the above variables.
	(isearch-process-search-multibyte-characters): Likewise.  Call
	read-string with the arg INHERIT-INPUT-METHOD t.

2000-06-17  Stefan Monnier  <monnier@cs.yale.edu>

	* font-lock.el (font-lock-after-fontify-buffer)
	(font-lock-after-unfontify-buffer): No need to call back to jit-lock.

	* jit-lock.el (jit-lock-mode): Force jit-refontify when turned on.
	Use consistent make-local-variable style for font-lock-fontified.
	(jit-lock-fontify-buffer):
	Don't bother checking for font-lock-mode and jit-lock-mode.

	* time.el: Remove trailing ^M that prevent CVS-merging.

2000-06-16  Gerd Moellmann  <gerd@gnu.org>

	* Makefile.in (distclean): New target.

2000-06-16  Stefan Monnier  <monnier@cs.yale.edu>

	* Makefile.in (srcdir): Define for update-subdirs.

2000-06-16  Gerd Moellmann  <gerd@gnu.org>

	* find-lisp.el: New file.

2000-06-16  Andrew Innes  <andrewi@gnu.org>

	* time.el (display-time-mail-function): New variable, to allow
	external packages to indicate when new mail is available.
	(display-time-update): Use it.

2000-06-16  Kenichi Handa  <handa@etl.go.jp>

	* international/mule.el (mule-version): Change version name to
	SAKAKI.  AOI has already been used by Meadow.

	* international/quail.el (quail-show-guidance-buf): To find the
	bottom window (but minibuffer), pay attention to the height of
	minibuffer.

2000-06-15  Eli Zaretskii  <eliz@is.elta.co.il>

	* arc-mode.el (archive-mode-map): Use the new menu-item format for
	menu-bar menus.  Add help strings.  Don't remove the Edit menu
	from the menu bar, as the menu bar has enough space now.

	* Makefile.in (SHELL): Make sure /bin/sh is used.

	* woman.el (woman-man-buffer): Fix bold and underlined CJK
	characters, which use series of two ^H characters instead of one.

2000-06-15  Gerd Moellmann  <gerd@gnu.org>

	* info.el (Info-find-in-tag-table-1, Info-find-in-tag-table)
	(Info-find-node-in-buffer-1, Info-find-node-in-buffer): New
	functions.
	(Info-find-node-2): Try a case-sensitive search first, then
	do a case-insensitive search.

	* menu-bar.el (menu-bar-help-menu): Add menu item for non-English
	tutorials.

	* complete.el (PC-env-vars-alist): New variable.
	(PC-complete-as-file-name): New function.
	(partial-completion-mode): Initialize PC-env-vars-alist from
	process-environment.
	(PC-do-completion): Handle completion of env vars.

	* info.el (Info-set-mode-line): Show file name in mode line,
	use `*Info*' instead of `Info:'.

	* startup.el (command-line-1): Change copyright messages to year
	2000.

2000-06-15  Dave Love  <fx@gnu.org>

	* net/goto-addr.el (goto-address-fontify): Use keymap property,
	not local-map.

2000-06-15  Kenichi Handa  <handa@etl.go.jp>

	* international/mule.el (set-buffer-file-coding-system): Almost
	rewritten to handle `undecided' as no-op.

2000-06-14  Gerd Moellmann  <gerd@gnu.org>

	* Makefile.in: New file.

	* Makefile: Removed.

	* net/goto-addr.el (goto-address): Don't bind C-c RET locally.
	(goto-address-highlight-keymap): Bind C-c RET.

2000-06-14  Kenichi Handa  <handa@etl.go.jp>

	* mail/sendmail.el (sendmail-send-it): The temporary buffer
	inherits buffer-file-coding-system of the current buffer.

	* tar-mode.el (tar-extract): For goto-char, use (point-min), not
	0.  Give correct argument to set-auto-coding-function.
	(tar-expunge): For goto-char, use (point-min), not 0.
	(tar-clear-modification-flags): For goto-char, use (point-min), not 1.
	(tar-subfile-save-buffer): Likewize.

	* international/mule.el
	(after-insert-file-set-buffer-file-coding-system): Call
	set-buffer-file-coding-system with the arg FORCE t.

2000-06-13  Gerd Moellmann  <gerd@gnu.org>

	* mail/sendmail.el (mail-specify-envelope-from): Initialize to
	nil.  Contemporary sendmails issue an X-Authentication-Warning if
	the sender is set with `-f'.

2000-06-13  Dave Love  <fx@gnu.org>

	* help.el (describe-function-1): Kluge around cases of functions
	fset to subrs whose doc doesn't match their symbol-name.

	* image.el (insert-image): Default STRING to a space.

	* info.el Doc fixes.
	(Info-build-node-completions): Match Ref tags.

2000-06-13  Eli Zaretskii <eliz@is.elta.co.il>

	* frame.el (display-multi-frame-p, display-multi-font-p): New
	defaliases for display-graphic-p.

	* hl-line.el: Fixed a typo in commentary.

2000-06-13  Kenichi Handa  <handa@etl.go.jp>

	* language/tibet-util.el (tibetan-tibetan-to-transcription): Typo
	fixed.

2000-06-12  Dave Love  <fx@gnu.org>

	* image.el (insert-image): Save a little consing.

2000-06-12  Kenichi Handa  <handa@etl.go.jp>

	* language/tibet-util.el: Convert all tibetan-1-column characters
	to the corresponding tibetan characters.
	(tibetan-add-components): Delete code for the special treatment of
	'a chung.

	* language/tibetan.el (tibetan-composable-pattern): Fix previous
	change.
	(tibetan-vowel-transcription-alist): More rules added.
	(tibetan-composite-vowel-alist): New variable.
	(tibetan-precomposition-rule-alist): More rules added.

2000-06-12  Stefan Monnier  <monnier@cs.yale.edu>

	* startup.el (command-line): Only call menu-bar-mode if interactive.

	* thingatpt.el (toplevel symbol-properties):
	* textmodes/makeinfo.el (makeinfo-compile):
	* progmodes/make-mode.el (makefile-pickup-filenames-as-targets):
	* progmodes/hideif.el (hif-compress-define-list)
	(hide-ifdef-use-define-alist):
	* net/ange-ftp.el (ange-ftp-vms-delete-file-entry)
	(ange-ftp-vms-add-file-entry):
	* menu-bar.el (menu-bar-update-buffers, menu-bar-update-buffers):
	* man.el (Man-build-man-command):
	* mail/rnewspost.el (news-reply-header-hook):
	* info.el (Info-insert-dir):
	* emulation/mlconvert.el (backward-word, forward-word, setq):
	* emacs-lisp/gulp.el (gulp-send-requests):
	* emacs-lisp/byte-opt.el (byte-compile-log-lap-1)
	(byte-optimize-inline-handler, byte-optimize-form-code-walker)
	(byte-optimize-apply, end of file):
	* emacs-lisp/advice.el (ad-advice-class-completion-table)
	(ad-make-freeze-definition):
	* startup.el (command-line, command-line-1): Don't quote lambdas.

	* pcvs.el (cvs-parse-process): Don't blindly refresh all cookies.
	(cvs-cleanup-removed): New function.
	(cvs-cleanup-functions): New var.
	(cvs-cleanup-collection): Use cvs-cleanup-functions to allow the user
	some flexibility in specifying additional entries to auto-cleanup.
	(cvs-quickdir): New function.
	(cvs-mode-insert): Use cvs-fileinfo-from-entries.
	(cvs-mode-imerge): Use smerge-ediff rather than vc-resolve-conflicts.
	(cvs-mode-find-file): Check that we are on a filename or dirname
	when invoked through a mouse-click.
	(cvs-full-path): Remove.
	(cvs-dired-action): Re-introduced.
	(cvs-dired-noselect): Use it.
	(vc-post-command-functions): use this new hook if available.

	* pcvs-info.el (cvs-fi-up-to-date-face, cvs-fi-unknown-face): New vars.
	(cvs-status-map): Don't inherit from cvs-mode-map anymore.
	(cvs-filename-map, cvs-dirname-map): Remove.
	(cvs-default-action): Remove.
	(cvs-add-face): Use `keymap' rather than `local-map' property, and only
	if the arg is really a keymap.
	(cvs-fileinfo-pp): Don't use any special map for file and dir names.
	Don't hardcode the mapping from state (aka type) to face, but check
	the var cvs-fi-<type>-face instead.
	(cvs-fileinfo-from-entries): New function.

	* pcvs-defs.el (cvs-default-ignore-marks, cvs-diff-ignore-marks):
	Docstring fix.
	(cvs-find-file-and-jump): Change default to be safer.
	(cvs-mode-diff-map): Define it as a function as well.
	(cvs-mode-map): Refer to the function variant of cvs-mode-diff-map.
	Bind mouse-2 in this global map rather than with text-properties.

	* pcvs-parse.el (cvs-parse-table): Look for conflict markers in the
	file to resolve the ambiguity between C(conflict) and C(need-merge).

2000-06-12  Kenichi Handa  <handa@etl.go.jp>

	* international/mule.el (set-buffer-file-coding-system): If
	CODING-SYSTEM is nil, set buffer-file-coding-system to nil
	unconditionally.

2000-06-12  Dave Love  <fx@gnu.org>

	* wid-edit.el (widget-specify-button): Really suppress the face if
	required.

2000-06-11  Gerd Moellmann  <gerd@gnu.org>

	* term/x-win.el (x-colors): Add colors from recent rgb.txt.

2000-06-11  Stefan Monnier  <monnier@cs.yale.edu>

	* imenu.el (imenu-generic-expression): Docstring fix.

	* composite.el (composition-function-table): Move the `put'
	below the autoload cookie so we can load the file before loaddefs.

	* avoid.el (mouse-avoidance-random-shape): Don't quote lambda.

	* emacs-lisp/autoload.el (make-autoload): Use `cond'.
	Handle easy-mmode-define-global-mode.
	For complex macros like define-minor-mode that can generate
	several autoload entries, try to autoload entries in the
	macroexpanded code.

	* emacs-lisp/easy-mmode.el (define-minor-mode):
	If KEYMAP is a symbol, just use it.
	Use byte-compile-current-file and load-file-name to infer the
	proper :require to pass to defcustom.
	Wrap the hook var into `progn' so as not to autoload it.
	Add a :autoload-end cookie.
	Be more careful about the evaluation of KEYMAP.
	(easy-mmode-define-global-mode): Add a :autoload-end cookie.
	(define-derived-mode): Move define-abbrev-table outside of defvar.

2000-06-10  Stefan Monnier  <monnier@cs.yale.edu>

	* Makefile (EMACSOPT): Remove --no-init-file (implied by -batch).
	(autoloads): Explicitly load `autoload' to bootstrap without loaddefs.
	(backup-compiled-files): Ignore errors during `tar'.
	(bootstrap): Make autoloads before elc files.

2000-06-10  Kenichi Handa  <handa@etl.go.jp>

	* international/mule.el (set-buffer-file-coding-system): If one of
	undecided-XXX is specified, change only EOL conversion.

	* international/mule-conf.el (unix): New alias for the coding
	system undecided-unix.

2000-06-09  Dave Love  <fx@gnu.org>

	* tar-mode.el (tar-copy): Supply MUSTBENEW arg to write-region.

	* progmodes/executable.el: Byte compile dynamic.
	(executable-insert): Change custom type.
	(executable-find): Add autoload cookie.
	(executable-make-buffer-file-executable-if-script-p): New
	function.  After Noah Friedman.

	* files.el (after-save-hook): Customize, with
	executable-make-buffer-file-executable-if-script-p as an option.

2000-06-09  Kenichi Handa  <handa@etl.go.jp>

	* ps-mule.el (ps-mule-font-info-database-bdf): Prefer the font
	"tib24p-mule.bdf" for Tibetan.

	* composite.el (decompose-composite-char): Declare it as obsolete.

	* man.el (Man-fontify-manpage): Pay attention to underline and
	overstrike pattern for CJK characters (e.g. __^H^H and X^H^HX).

2000-06-08  Gerd Moellmann  <gerd@gnu.org>

	* thingatpt.el (forward-thing): Use functionp instead of fboundp.
	Set maintainer to FSF since author isn't reachable.

2000-06-08  Dave Love  <fx@gnu.org>

	* international/mule-cmds.el (select-safe-coding-system): If
	DEFAULT-CODING-SYSTEM is not specified, also check the most
	preferred coding-system if buffer-file-coding-system is
	`undecided'.  From Handa.

2000-06-08  Kenichi Handa  <handa@etl.go.jp>

	* international/mule.el
	(after-insert-file-set-buffer-file-coding-system): If the buffer
	size is greater than INSERTED, judget that we are not visiting.

2000-06-07  Rajesh Vaidheeswarran  <rv@gnu.org>

	* whitespace.el (defgroup whitespace): Comment out `:version'.
	XEmacs 20.4 has problems defining the group with this present.
	We'll have this commented out till get resolve the problem.

2000-06-07  Gerd Moellmann  <gerd@gnu.org>

	* align.el: Update from author.

2000-06-07  Jari Aalto  <jari.aalto@poboxes.com>

	* apropos.el (apropos-mode-hook): New user variable.
	(apropos-mode): Run apropos-mode-hook.

2000-06-07  David Ponce  <david@dponce.com>

	* recentf.el: Fixed recentf-edit-list and recentf-open-more-files
	commands.  Require `wid-edit' at run-time.

2000-06-07  David Ponce  <david@dponce.com>

	* recentf.el: Added some "Commentary".
	(recentf-open-more-files, recentf-edit-list): Minor changes to
	move the point at the top of the file list.  This behaviour is
	consistent with the menu one when the list contains a lot of
	files.
	(recentf-cleanup): Now displays the number of items removed from
	the list.
	(recentf-relative-filter) New menu filter to show filenames
	relative to `default-directory'.

2000-06-07  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: XEmacs compatibility.  Doc fix.  Can select page size
	with/without giving an error if PostScript printer doesn't have this
	kind of page size.  Zebra Stripe continues or restarts on next page.
	Manual/automatic paper feeding.  Switch or not the header.
	(ps-print-version): New version number (5.2.2).
	(ps-windows-system): Include emx as a Windows system.
	(ps-setup, ps-begin-file, ps-color-values, ps-screen-to-bit-face)
	(ps-generate-postscript-with-faces, ps-generate-postscript-with-faces)
	(ps-background-text): Code fix.
	(ps-error-handler-message, ps-user-defined-prologue)
	(ps-print-prologue-header, ps-printer-name)
	(ps-print-control-characters, ps-n-up-filling, ps-zebra-color)
	(ps-line-number-step, ps-spool-config, ps-default-fg, ps-default-bg)
	(ps-use-face-background): Customization fix.
	(ps-n-up-database): Data fix.
	(ps-warn-paper-type, ps-zebra-stripe-follow, ps-manual-feed)
	(ps-switch-header): New vars.
	(ps-xemacs-color-name, ps-face-foreground-name)
	(ps-face-background-name, ps-boolean-constant): New funs.

2000-06-07  Dave Love  <fx@gnu.org>

	* allout.el: New version from Manheimer.

2000-06-07  Kenichi Handa  <handa@etl.go.jp>

	* textmodes/fill.el (fill-find-break-point): Check the validity of
	charset.

2000-05-25  Eli Zaretskii  <eliz@is.elta.co.il>

	* bookmark.el (bookmark-insert-location, bookmark-bmenu-list)
	(bookmark-bmenu-show-filenames, bookmark-bmenu-hide-filenames):
	Call display-color-p and display-mouse-p instead of looking at
	window-system.

2000-06-06  Dave Love  <fx@gnu.org>

	* image.el (find-image): Doc fix.  Return nil if image not found.
	(put-image, insert-image): Make STRING arg optional.

2000-06-06  Kenichi Handa  <handa@etl.go.jp>

	* language/vietnamese.el: Remove eval-when-compile.
	(viet-viscii-nonascii-translation-table): Define it as a
	translation table made from viet-viscii-decode-table.
	(viet-viscii-encode-table): Define it as a translation table made
	from the reverse map of above.
	(viet-vscii-nonascii-translation-table): Define it as a
	translation table made from viet-vscii-decode-table.
	(viet-vscii-encode-table): Define it as a translation table made
	from the reverse map of above.
	(ccl-decode-viscii): Use translate-character.
	(ccl-encode-viscii, ccl-encode-viscii-font)
	(ccl-decode-vscii, ccl-encode-vscii, ccl-encode-vscii-font):
	Likewize.

	* language/cyrillic.el: Remove eval-when-compile.
	(cyrillic-koi8-r-nonascii-translation-table): Define it as a
	translation table made from cyrillic-koi8-r-decode-table.
	(cyrillic-koi8-r-encode-table): Define it as a translation table
	made from the reverse map of above.
	(ccl-decode-koi8): Use translate-character.
	(ccl-encode-koi8, ccl-encode-koi8-font): Likewize
	(cyrillic-alternativnyj-nonascii-translation-table): Define it as
	a translation table made from cyrillic-alternativnyj-decode-table.
	(cyrillic-alternativnyj-encode-table): Define it as a translation
	table made from the reverse map of above.
	(ccl-decode-alternativnyj): Use translate-character.
	(ccl-encode-alternativnyj, ccl-encode-alternativnyj-font):
	Likewize

	* international/mule-diag.el (non-iso-charset-alist): Specify
	translation table symbol instead of translation table itself.
	(list-block-of-chars): CHARSET may be a translation table symbol.

	* international/mule.el (make-coding-system): If CODING-SYSTEM
	already exists, override it.

	* international/fontset.el: Use family `proportional' for Tibetan
	fonts.

	* international/ccl.el (ccl-compile-translate-character): Don't
	check if Rrr has property translation-table.
	(ccl-compile-map-multiple): Modified to avoid compiler warning.

2000-06-05  Gerd Moellmann  <gerd@gnu.org>

	* info.el: Bind case-fold-search to t when searching in case
	a user sets it to nil in a hook.

2000-06-05  Stefan Monnier  <monnier@cs.yale.edu>

	* autoarg.el (autoarg-mode, autoarg-kp-mode):
	* hl-line.el (hl-line-mode): Use the new :global key argument.

	* tar-mode.el (tar-header-block-recompute-checksum): Remove.
	(tar-clip-time-string): Prepend a space.
	(tar-grind-file-mode): Construct a string rather than modifying one.
	(tar-header-block-summarize): Fix docstring.
	Use `format' rather than an error-prone set of copy-loops.

	* diff-mode.el (diff-font-lock-keywords, diff-hunk-header-re)
	(diff-goto-source, diff-unified->context, diff-context->unified)
	(diff-reverse-direction, diff-fixup-modifs): Fix the regexps to
	understand the format output by the `-p' argument to diff.

	* progmodes/sh-script.el (sh-symbol-list, sh-number-or-symbol-list)
	(sh-re-done): Use defconst.
	(sh-indent-supported-here, sh-electric-rparen-needed-here): Add defvar.
	(sh-help-string-for-variable, sh-guess-basic-offset):
	Don't quote lambdas.
	(sh-electric-rparen, sh-electric-hash, sh-search-word): Docstring typo.
	(sh-regexp-for-done, sh-kw-alist, sh-kw): Moved to before their use.

	* mail/mh-comp.el (mh-send-sub): Check mh-etc is bound before using it.
	(mh-letter-mode): Derive from text-mode.
	This implicitly means that it now calls kill-all-local-variables.
	Also remove the Emacs-18 compatibility code.

	* emacs-lisp/autoload.el (make-autoload): Simplify docstring.
	Make use of symbol-property doc-string-elt.
	Use memq rather than a sequence of eq.
	(doc-string-elt): Fix the wrong or missing previously unused values.
	(autoload-print-form): New function extracted from
	generate-file-autoloads to allow recursion when handling progn
	so that defvar's and defun's docstrings are properly printed.
	(generate-file-autoloads): Use it.

	* emacs-lisp/easy-mmode.el (easy-mmode-define-global-mode): Autoload.
	Use find-file-hooks in the minor-mode function.
	Be careful not to loop indefinitely in the post-command-hook function.

2000-06-05  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff-init.el (ediff-has-face-support-p): Make it paint faces on
	tty's.
	* ediff-diff.el (ediff-exec-process): Use --binary for fine
	differences whenever appropriate.
	* viper-cmd.el (viper-smart-suffix-list): Rearranged list members.
	* viper.el (find-file, find-file-other-window): Get viper to do
	wildcards.

2000-06-04  Stefan Monnier  <monnier@cs.yale.edu>

	* jit-lock.el (jit-lock-saved-fontify-buffer-function): New var.
	(jit-lock-fontify-buffer): New function for JIT refontification.
	(jit-lock-mode): Fix docstring.
	Use jit-lock-fontify-buffer for font-lock-fontify-buffer-function.
	Remove jit-lock-after-change from the _local_ hook.
	(jit-lock-function-1): Fix docstring.

	* info.el (Info-on-current-buffer): Initialize info.

	* newcomment.el (comment-indent): Ignore comment-indent-hook.

	* progmodes/tcl.el (tcl-indent-for-comment):
	Ignore comment-indent-hook.

	* emacs-lisp/easy-mmode.el: Require CL during compilation.
	(easy-mmode-define-toggle): Remove (inline into define-minor-mode).
	(easy-mmode-pretty-mode-name): Rename from easy-mmode-derive-name
	and improve to use the lighter to guess the capitalization.
	(define-minor-mode): Inline code from easy-mmode-define-toggle.
	Add keyword arguments to specify global-ness or the custom group.
	Add local-map and help-echo properties to the lighter.
	(easy-mmode-define-navigation): Add the errors to debug-ignored-errors.
	(easy-mmode-define-global-mode): New macro.

2000-06-02  Dave Love  <fx@gnu.org>

	* wid-edit.el: byte-compile-dynamic since we typically don't use
	all the widgets.  Don't require cl or widget.  Remove
	eval-and-compile.  Don't autoload finder-commentary.  Doc fixes.
	(widget-read-event): Removed.  Callers changed to use read-event.
	(widget-button-release-event-p): Renamed from
	button-release-event-p.
	(widget-field-add-space, widget-field-use-before-change):
	Uncustomize.
	(widget-specify-field): Use keymap property, not local-map.
	(widget-specify-button): Obey :suppress-face.
	(widget-specify-insert): Use modern backquote syntax.
	(widget-image-directory): Renamed from widget-glyph-directory.
	(widget-image-enable): Renamed from widget-glyph-enable.
	(widget-image-find): Replaces widget-glyph-find.
	(widget-button-pressed-face): Move defvar.
	(widget-image-insert): Replaces widget-glyph-insert.
	(widget-convert): Use keywordp.
	(widget-leave-text, widget-children-value-delete): Use mapc.
	(widget-keymap): Remove XEmacs stuff.
	(widget-field-keymap, widget-text-keymap): Define all inside defvar.
	(widget-button-click): Don't set point at the click, but re-centre
	if we scroll out of window.  Rewritten for images v. glyphs &c.
	(widget-tabable-at): Use POS arg, not point.
	(widget-beginning-of-line, widget-end-of-line)
	(widget-item-value-create, widget-sublist, widget-princ-to-string)
	(widget-sexp-prompt-value, widget-echo-help): Simplify.
	(widget-default-create): Use widget-image-insert; some rewriting.
	(widget-visibility-value-create)
	(widget-push-button-value-create, widget-toggle-value-create): Use
	widget-image-insert.
	(checkbox): Create on and off images dynamically.
	(documentation-link): Change :help-echo.
	(widget-documentation-link-echo-help): Remove.

2000-06-02  Stefan Monnier  <monnier@cs.yale.edu>

	* log-edit.el (log-edit-done): Thinko in the "same comment" detection.

	* emacs-lisp/easy-mmode.el (easy-mmode-derive-name): New function.
	(easy-mmode-define-toggle, define-minor-mode): Use it.
	(easy-mmode-define-keymap): Docstring fix.
	(define-derived-mode): Default PARENT to fundamental-mode.
	Add the derived-mode-parent symbol-property.
	(easy-mmode-derived-mode-p): New function.

2000-06-02  Dave Love  <fx@gnu.org>

	* files.el (convert-standard-filename): Doc fix.
	(normal-backup-enable-predicate): New function.
	(backup-enable-predicate): Use it to replace the lambda form.

	* calendar/todo-mode.el: [This needs more work on the outline
	stuff.]  Doc fixes.
	(todo) <defgroup>: Add :version.
	(todo-add-category): Don't use pushnew.
	(todo-cmd-raise): Fix typo.
	(todo-top-priorities): Change temp buffer name.
	(todo-category-alist): Avoid redundant lambda.
	(todo-mode): Set paragraph-separate, outline-regexp from todo-prefix.
	Use outline-next-heading.

	* autoarg.el: Rewritten to use define-minor-mode.
	(autoarg-kp-digits, autoarg-kp-mode-map): New variable.
	(autoarg-kp-mode, autoarg-kp-digit-argument): New command.

2000-06-02  Kenichi Handa  <handa@etl.go.jp>

	* isearch.el (isearch-other-meta-char): Fix previous change.

2000-06-01  Stefan Monnier  <monnier@cs.yale.edu>

	* log-edit.el (log-edit-mode): Make vc-comment-ring-index local.
	(log-edit-done): Only add the comment to the ring if it's different
	from the last comment entered.

	* isearch.el (isearch-highlight): Turn internal-find-face into facep.

2000-06-01  Dave Love  <fx@gnu.org>

	* hl-line.el: Rewritten using define-minor-mode.

	* help.el (describe-function-1): Distinguish special form from
	builtin function.  Sanity-check presence of arglist for builtins.

2000-06-01  Kenichi Handa  <handa@etl.go.jp>

	* international/characters.el: Fix syntax/category setting of
	Tibetan characters.

	* language/tibet-util.el (tibetan-add-components): Fixes for new
	encoding of Tibetan characters.
	(tibetan-decompose-precomposition-alist): New variable.
	(tibetan-decompose-region): Convert precomposed characters to
	non-precomposed characters.
	(tibetan-decompose-string): Likewise.
	(tibetan-composition-function): Fix args to
	thibetan-compose-string.

	* language/tibetan.el (tibetan-composable-pattern): More
	characters included.
	(tibetan-consonant-transcription-alist): Rule for "R" added.
	(tibetan-subjoined-transcription-alist): Rules for "+W", "+Y", and
	"+R" added.
	(tibetan-base-to-subjoined-alist): Rule for "RA" added.

	* language/lao-util.el (lao-composition-function): Fix args to
	compose-string.

	* language/thai-util.el (thai-composition-function): Fix args to
	compose-string.

	* isearch.el (isearch-update): Set disable-point-adjustment to t
	to prevent the point moving to the end of a composition when a
	part of a composition is searched.
	(isearch-other-meta-char): If the key invoking this command can be
	mapped by function-key-map to a printing char, call
	isearch-process-search-char directly.

2000-06-01  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/bytecomp.el:
	* frame.el:
	* international/mule-cmds.el:
	* international/mule-util.el:
	* international/mule.el:
	* mouse.el:
	* subr.el:
	* faces.el: Update calls to make-obsolete with a WHEN argument.

	* byte-run.el (make-obsolete, make-obsolete-variable):
	Add an optional WHEN argument and change the format of the
	symbol-property information.
	* emacs-lisp/bytecomp.el (byte-compile-log): Don't quote lambda.
	(byte-compile-obsolete, byte-compile-variable-ref): Understand the
	new obsolete-symbol-property format and print WHEN if it is provided.

2000-05-31  Dave Love  <fx@gnu.org>

	* loadhist.el (loadhist-hook-functions): Remove
	before-change-function, after-change-function.
	(unload-feature): Deal with symbols which are both bound and
	fbound.

	* mouse.el (mouse-save-then-kill-delete-region): Don't bind
	before-change-function, after-change-function.

	* simple.el (newline): Don't bind before-change-function,
	after-change-function.

2000-05-31  Rajesh Vaidheeswarran <rv@gnu.org>

	* whitespace.el (whitespace-rescan-timer-time): Update interval
	set to 600 seconds (10 minutes) instead of 60 seconds since
	a large number of whitespace buffers causes emacs to `freeze'
	for a considerable amount of time.

	* whitespace.el: Updated email address

2000-05-31  Dave Love  <fx@gnu.org>

	* add-log.el (change-log-font-lock-keywords) <function>: Add
	pattern for function of change.
	(change-log-font-lock-keywords) <acknowledgements>: Amalgamate
	acknowledgements patterns.

2000-05-31  Kenichi Handa  <handa@etl.go.jp>

	* isearch.el (isearch-printing-char): If keyboard coding system is
	being used, call isearch-process-search-multibyte-characters.

	* international/isearch-x.el: Mostly rewritten.

	* international/quail.el (quail-start-conversion): Don't include
	unhandled events in the returned events, but set them in
	unread-command-events.  Exit if all inputs are deleted.

2000-05-30  Jason Rumney  <jasonr@gnu.org>

	* w32-fns.el (w32-charset-info-alist): Add each charset separately.

	* term/w32-win.el: Doc changes to reduce diffs with x-win.el.
	Reenable code to create initial fontsets.
	Use set-fontset-font in place of put-charset-property.

2000-05-30  Gerd Moellmann  <gerd@gnu.org>

	* progmodes/perl-mode.el (perl-indent-line): When looking for a
	label, ensure that the first colon isn't followed by another.

	* paths.el (Info-default-directory-list): Doc fix.

	* net/net-utils.el (finger-X.500-host-regexps): New user-option.
	(finger): If HOST matches a regexp from finger-X.500-host-regexps,
	send a query containing USER only, not USER@HOST.

	* mail/rmail.el (rmail-widen-to-current-msgbeg): Use rmail-msgbeg
	and rmail-msgend to compute the restriction at the end, instead of
	computing it.

2000-05-29  Gerd Moellmann  <gerd@gnu.org>

	* dabbrev.el (dabbrev-expand): Don't display messages in the
	echo area if the minibuffer window is active.

	* jit-lock.el (jit-lock-mode): Add after change function to
	local hook.

2000-05-29  Christoph Wedler  <Christoph.Wedler@sap.com>

	* antlr-mode.el: New commands: hide/unhide actions,
	upcase/downcase literals.
	(antlr-tiny-action-length): New user option.
	(antlr-hide-actions): New command.  Suggested by
	Bjoern Mielenhausen <Bjoern.Mielenhausen@sap.com>.
	(antlr-mode-map): New binding [C-c C-v].
	(antlr-mode-menu): New entries.
	(antlr-downcase-literals): New command.
	(antlr-upcase-literals): Ditto.

	* antlr-mode.el: Minor changes: indendation, mode-name.
	(antlr-indent-line): Indent cpp directive at column 0.
	(antlr-mode): Use mode-name prefix "Antlr." instead of "Antlr/".

	* antlr-mode.el: XEmacs bug workaround, XEmacs hint.
	(antlr-font-lock-additional-keywords): Workaround for intentional
	bug in XEmacs version of font-lock.
	(antlr-mode): Set symbol property `mode-name' to "Antlr".  Could
	be used by a smarter version of `buffers-menu-grouping-function'.

2000-05-29  Gerd Moellmann  <gerd@gnu.org>

	* tmm.el (tmm-prompt): Recognize menu item definitions of the for
	`(menu-item ...)' when looking for the position of DEFAULT-ITEM.

2000-05-29  Kenichi Handa  <handa@etl.go.jp>

	* international/encoded-kb.el
	(encoded-kbd-iso2022-designation-map): Pay attention to that
	charset-iso-final-char return -1 for eight-bit-control and
	eight-bit-graphic.

2000-05-28  Eli Zaretskii  <eliz@is.elta.co.il>

	* speedbar.el (speedbar-use-images, speedbar-update-flag)
	(speedbar-easymenu-definition-base): Use display-graphic-p where
	available, instead of window-system.

2000-05-28  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/codepage.el (cp-coding-system-for-codepage-1): Add
	eight-bit-graphic and eight-bit-control to safe charsets for cpNNN
	coding systems.

2000-05-26  Dave Love  <fx@gnu.org>

	* disp-table.el (standard-display-underline): Don't use
	internal-find-face.

	* mail/reporter.el: Maintainer change.  Doc fixes.
	(reporter-version): Deleted.

	* emacs-lisp/elp.el: Maintainer change.
	(elp-help-address, elp-submit-bug-report, elp-version): Deleted.

2000-05-26  Stefan Monnier  <monnier@cs.yale.edu>

	* add-log.el (add-change-log-entry): Merge the current entry with the
	previous one if the previous one is empty.

2000-05-26  Dave Love  <fx@gnu.org>

	* loadhist.el (unload-feature): Fix interactive spec [from
	lijnzaad@ebi.ac.uk].

	* emacs-lisp/bytecomp.el (byte-compile-callargs-warn): Use
	subr-arity to check primitives.
	(byte-compile-flush-pending, byte-compile-file-form-progn)
	(byte-compile-normal-call, byte-compile-list, byte-compile-concat)
	(byte-compile-insert, byte-compile-funcall): Use mapc instead of
	mapcar.

2000-05-26  Kenichi Handa  <handa@etl.go.jp>

	* international/fontset.el: Set family names of non-latin charsets
	in default fontset to "*".

	* international/mule-diag.el (print-fontset): Combine family part
	and registry part of the fontname by "-*-" instead of "-".

	* international/mule-cmds.el (encode-coding-char): Make strings
	multibyte before calling encode-coding-string.

2000-05-25  Stefan Monnier  <monnier@cs.yale.edu>

	* derived.el: Fix keywords.
	(define-derived-mode): Only define if needed.

	* simple.el (fill-comment, comment-column, comment-start)
	(comment-start-skip, comment-end, comment-indent-function)
	(block-comment-start, block-comment-end, indent-for-comment)
	(set-comment-column, kill-comment, comment-padding, comment-region)
	(comment-multi-line, indent-new-comment-line): Remove.

	* bindings.el (esc-map): Change ; to comment-dwim and use the new
	function names for comment operations.

	* newcomment.el: Add abundant autoload cookies.
	(comment-style): Don't depend on runtime data at compile-time.
	(comment-indent-hook): Remove.
	(comment-indent): Check if comment-indent-hook is bound.
	(comment-region): Docstring fix.

2000-05-25  Dave Love  <fx@gnu.org>

	* emacs-lisp/elp.el (elp-restore-function): Don't use obsolete
	byte-code-function-p.

	* mail/rmailsum.el: Add provide.

	* net/goto-addr.el (goto-address-fontify): Add help-echo property.

	* smerge-mode.el (smerge-diff-switches): Don't use list* in
	defcustom.

2000-05-25  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff-diff.el (ediff-exec-process): delete --binary option from
	non-buffer ediff jobs.

2000-05-25  Eli Zaretskii  <eliz@is.elta.co.il>

	* hilit-chg.el (highlight-changes-mode): Ask about color or
	grayscale support, not about window-system.

	* ffap.el (ffap-menu-text-plist): Use display-mouse-p, not
	window-system.
	(ffap-highlight): Always default to t.

	* emacs-lisp/edebug.el (edebug-emacs-19-specific): Call
	display-popup-menus-p instead of looking at window-system.

	* disp-table.el (standard-display-g1, standard-display-graphic):
	Only refuse to use string glyphs on X and MS-Windows.

	* avoid.el: Remove window-system from commentary, suggest to use
	display-*-p instead.

	* apropos.el (apropos-print): Use display-mouse-p instead of
	window-system.

2000-05-25  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/codepage.el (cp-decoding-vector-for-codepage):
	Fill up unsupported characters with their own codes.  From Kenichi
	Handa.

2000-05-25  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/mule-diag.el (describe-char-after): Use
	display-graphic-p instead of window-system, so that this function
	works on MS-DOS.

2000-05-25  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/codepage.el (cp-make-coding-systems-for-codepage):
	Remove the eight-bit-graphic and eight-bit-control charsets from
	the list of charsets which we convert into `?'.

2000-05-25  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-conf.el: Specify CHARSET-ID explicitely for
	private charsets.
	(mule-unicode-0100-24ff, japanese-jisx0213-1,
	japanese-jisx0213-2): New charsets.

	* international/fontset.el: Setup default fontset for new charsets.

2000-05-24  Dave Love  <fx@gnu.org>

	* info.el (Info-find-node-2): Restructure [following "Vadim
	S. Solomin" <sovs@uic.nnov.ru>].

	* icomplete.el: Fix header for Finder.

2000-05-24  Eric M. Ludlam  <zappo@ultranet.com>

	* rmailout.el (rmail-output-to-rmail-file): Added optional param
	STAY.

	* rmail.el (rmail-automatic-folder-directives): New user variable.
	(rmail-show-message): Add call to `rmail-auto-file' during
	display.
	(rmail-auto-file): New function.

2000-05-24  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff-diff.el (ediff-forward-word): Take syntactic word class into
	account.
	(ediff-test-utility,ediff-diff-mandatory-option)
	(ediff-reset-diff-options): Utilities for proper initialization of
	ediff-diff-options and ediff-diff3-options on Windows.

	* ediff-init.el (ediff-merge-filename-prefix): New customizable
	variable.

	* ediff-mult.el (ediff-filegroup-action): Use
	ediff-merge-filename-prefix.

2000-05-24  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper-ex.el (ex-write): Set selective display to nil.

2000-05-24  Eli Zaretskii  <eliz@is.elta.co.il>

	* language/hebrew.el (iso-8859-8-e, iso-8859-8-i): For now, just
	aliases for hebrew-iso-8bit.

2000-05-24  Eli Zaretskii  <eliz@is.elta.co.il>

	* woman.el: New version from Francis J. Wright
	<F.J.Wright@Maths.QMW.ac.uk>.
	(woman-parse-colon-path): Support Cygwin-style //d/foo/bar file
	names in environment variables regardless of the path separator.
	(woman-topic-all-completions-1): Don't call file-name-directory-p
	on all files, since woman-file-regexp already filters out any
	directories.

2000-05-24  Kenichi Handa  <handa@etl.go.jp>

	* international/quail.el (quail-start-translation): Don't change
	modified-p of the current buffer.
	(quail-start-conversion): Likewise.

	* international/kkc.el (kkc-region): Don't change modified-p of
	the current buffer.

	* language/japanese.el (iso-2022-jp): Exclude katakana-jisx0201 to
	conform to RFC1468.
	(iso-2022-jp-2): Exclude katakana-jisx0201 to conform to RFC1554.

2000-05-23  Eric M. Ludlam  <zappo@ballista.ultranet.com>

	* speedbar.el (speedbar-easymenu-definition-base): Image toggle fix.
	(speedbar-insert-button): Invisible text property fix.
	(speedbar-directory-plus): Renamed from speedbar-directory-+
	(speedbar-directory-minus): Renamed from speedbar-directory--
	(speedbar-page-plus): Renamed from speedbar-file-+
	(speedbar-page-minus): Renamed from speedbar-file--
	(speedbar-page): Renamed from speedbar-file-
	(speedbar-tag): Renamed from speedbar-tag-
	(speedbar-tag-plus): Renamed from speedbar-tag-+
	(speedbar-tag-minus): Renamed from speedbar-tag--
	(speedbar-expand-image-button-alist): Use above renames.

	* sb-dir-plus.xpm: Renamed from sb-dir+.xpm
	* sb-dir-minus.xpm: Renamed from sb-dir-.xpm
	* sb-pg-plus.xpm: Renamed from sb-file+.xpm
	* sb-pg-minus.xpm: Renamed from sb-file-.xpm
	* sb-pg.xpm: Renamed from sb-file.xpm
	* sb-tag-plus.xpm: Renamed from sb-tag+.xpm
	* sb-tag-minus.xpm: Renamed from sb-tag-.xpm

2000-05-24  Kenichi Handa  <handa@etl.go.jp>

	* international/quail.el (quail-show-guidance-buf): Set
	current-input-method of the guidance buffer to the name of the
	curren input method.

2000-05-23  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/compile.el (compile-internal): Style typo.

	* mail/mh-e.el (mh-do-not-confirm, mh-folder-mode):
	quote vars and functions in the docstring.

	* newcomment.el (comment-make-extra-lines): Don't use `assert'.

	* completion.el (dynamic-completion-mode, dynamic-completion-mode):
	Don't quote lambdas.

	* ffap.el (ffap-highlight): Use facep rather than internal-find-face.

2000-05-23  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (command-line): Determine source file of compiled
	user init file differently.  Warn if compiled user init file
	is older than its source file.

	* ffap.el (ffap-url-regexp): Add `https'.

2000-05-23  Eli Zaretskii  <eliz@is.elta.co.il>

	* files.el (make-backup-file-name-1): Replace slashes with `!'
	rather than `|' (which is not allowed on Windows).  Replace the
	drive letters with a string "drive_X".

2000-05-23  Gerd Moellmann  <gerd@gnu.org>

	* progmodes/sh-script.el (sh-ancestor-alist): Add `bash2'.

	* files.el (interpreter-mode-alist): Add `bash2'.

2000-05-22  Dave Love  <fx@gnu.org>

	* loadhist.el (feature-symbols, file-provides, file-requires): Use
	mapc.
	(feature-file): Avoid calling symbol-name.  Doc fix.
	(file-set-intersect, file-dependents): Use dolist, not mapcar.
	(loadhist-hook-functions): Add mouse-position-function.
	(unload-feature): Change uses of mapcar.

	* files.el (parse-colon-path): Doc fix.
	(auto-mode-alist, interpreter-mode-alist): Purecopy the cars.
	(set-auto-mode): Use mapc.

	* complete.el (PC-look-for-include-file): Use :alnum: character
	class.
	(partial-completion-mode): Add autoload cookie.

2000-05-22  Sam Steingold  <sds@gnu.org>

	* info.el (Info-fontify-node): Fixed the call to
	`add-text-properties' (bug introduced on 2000-05-18).

2000-05-22  Dave Love  <fx@gnu.org>

	* bindings.el: Remove debug-ignored-errors set in other files.

	* progmodes/etags.el: Add to debug-ignored-errors.
	(visit-tags-table-buffer): Clear out buffers holding old tables
	when making a new list.
	(etags-recognize-tags-table, tags-recognize-empty-tags-table): Use
	mapc.

	* completion.el: Doc fixes.  Add to debug-ignored-errors.  Don't
	quote keywords.
	(cmpl-string-case-type): Use character classes.

	* comint.el:
	* textmodes/ispell.el:
	* imenu.el:
	* mail/mh-e.el:
	* progmodes/compile.el: Add to debug-ignored-errors.

	* dabbrev.el: Add to debug-ignored-errors.
	(dabbrev-completion): Use mapc.

2000-05-22  Eli Zaretskii  <eliz@is.elta.co.il>

	* woman.el (From Francis J. Wright <F.J.Wright@Maths.QMW.ac.uk)
	(woman-mapcan, woman-parse-man.conf)
	(woman-toggle-use-extended-font, woman-toggle-use-symbol-font)
	(woman-reset-emulation, woman-select-symbol-fonts): New functions.
	(woman-parse-colon-path): Call woman-mapcan.  Recognize Cygwin
	path syntax better.
	(woman-man.conf-path, woman-use-own-frame): New defcustoms.
	(woman-manpath): Call woman-parse-man.conf.
	(woman-emulation): New defcustom, defaults to nroff.
	(woman-font-support): New defconst.
	(woman-use-symbol-font): New defcustom.
	(woman-menu): Add new menu items: "Colored/BW", "Advanced",
	"Emulation".
	Many functions: Doc fix.

2000-05-22  Kenichi Handa  <handa@etl.go.jp>

	* international/quail.el (quail-simple-translation-keymap): Map
	128..255 to quail-self-insert-command.
	(quail-keyboard-layout-alist): Add definition for "pc102-de".

2000-05-22  Stefan Monnier  <monnier@cs.yale.edu>

	* help.el (help-manyarg-func-alist): Typo.

	* emacs-lisp/sregex.el: Rewritten to take advantage of shy-groups and
	intervals which makes it heaps simpler.

	* newcomment.el (comment-region-internal): Go back to BEG after quoting
	the nested comment markers.

	* subr.el (remove-hook): Don't turn the hook's value into a list.

2000-05-21  Dave Love  <fx@gnu.org>

	* edmacro.el (edmacro-parse-keys): Return vector if any elements
	are invalid characters.

	* international/mule-util.el (detect-coding-with-priority): Use
	mapc.  Remove redundant lambda.

	* international/mule-diag.el (list-non-iso-charset-chars)
	(describe-fontset): Remove redundant lambda.

	* emulation/crisp.el (brief-mode): New alias.

	* emacs-lisp/ring.el (ring-elements): New function.

	* emacs-lisp/easymenu.el (easy-menu-create-menu)
	(easy-menu-do-add-item): Use keywordp.

	* emacs-lisp/byte-opt.el: Update side-effect free function lists.

	* replace.el: Doc and error message fixes.
	(replace-highlight): Use facep, not internal-find-face.

2000-05-20  Stefan Monnier  <monnier@cs.yale.edu>

	* international/ccl.el (ccl-compile-map-multiple): Don't quote lambda.

	* log-edit.el (log-edit-done): Cleanup trailing empty lines.
	(log-edit-insert-changelog): Drop `:' as well.

	* log-view.el: Fix file description.
	(log-view-mode-map): Unsatisfying fix for when cvs-mode-map is not
	available.
	(log-view-font-lock-keywords): Only use cvs-filename-face if present.
	(log-view-current-file): Only use cvs-pcl-cvs-dirchange-re if present.

	* emacs-lisp/easy-mmode.el: Update copyright and commentary.
	(easy-mmode-define-toggle): Deprecate the use of *-(on|off)-hook.
	Print a status message if the toggle is called interactively.
	(define-minor-mode): Allow INIT-VALUE to be (global . INIT-VALUE)
	for global minor modes and use `defcustom' for them.
	Use add-minor-mode.
	(easy-mmode-define-derived-mode): Remove.
	(define-derived-mode): Fancier default docstring.
	(easy-mmode-define-navigation): Signal an error rather than (ding).

	* newcomment.el (comment-styles): New `box-multi'.
	(comment-normalize-vars): Better default for comment-continue to
	avoid whitespace-only continuations.
	(comment-search-forward): Always move even in the no-syntax case.
	(comment-padright): Only obey N if it's only obeyed for padleft.
	(comment-make-extra-lines): Better handling of empty continuations.
	Use `=' for the filler if comment-start has only one character.
	(uncomment-region): Try handling the special `=' filler.
	(comment-region): Allow LINES even if MULTI is nil.
	(comment-box): Choose box style based on comment-style.

2000-05-20  Kenichi Handa  <handa@etl.go.jp>

	* international/ccl.el (ccl-compile-write-string): Make STR unibyte.
	(ccl-compile-write-repeat): If ARG is string, make it unibyte.

2000-05-20  Kenichi HANDA  <handa@etl.go.jp>

	* mail/rmail.el (rmail-decode-quoted-printable): Use delete-region
	and insert, not subst-char-in-region.

	* international/mule-diag.el (list-character-sets-1): Handle
	charsets eight-bit-control and eight-bit-graphic.
	(list-iso-charset-chars): Likewise.
	(list-block-of-chars): If CHARSET is not chat-table, insert 8-bit
	charactes as is.  Use indent-to to align characters.

	* international/mule-cmds.el (find-multibyte-characters): Never
	exclude charsets eight-bit-control and eight-bit-graphic.

2000-05-19  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/ada-mode.el (ada-mode, ada-create-case-exception):
	Don't quote lambdas.

	* emacs-lisp/lisp-mode.el (lisp-mode-variables): Set comment-add.

2000-05-19  Gerd Moellmann  <gerd@gnu.org>

	* gud.el (gud-jdb-directories): Doc fix.

2000-05-19  Stefan Monnier  <monnier@cs.yale.edu>

	* newcomment.el: New file.

2000-05-19  Gerd Moellmann  <gerd@gnu.org>

	* files.el (auto-mode-alist): Add pattern for POSIX `.shrc'.

2000-05-18  Andreas Schwab  <schwab@suse.de>

	* dired.el (dired-between-files): Also skip lines beginning with
	`used'.

2000-05-18  Gerd Moellmann  <gerd@gnu.org>

	* msb.el (msb-menu-cond): Add choice `user'.

2000-05-18  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Compatibility, customization and doc fix.
	(ps-printer-name-option): Replace defconst by defvar.
	(ps-postscript-code-directory): XEmacs compatibility.
	(ps-header-sheet, ps-setup, ps-begin-file, ps-begin-job): Code
	fix.
	(ps-user-defined-prologue, ps-print-prologue-header)
	(ps-xemacs-face-kind-p, ps-face-bold-p, ps-face-italic-p): XEmacs
	compatibility and code fix.
	(ps-print-background-image, ps-print-background-text):
	Customization fix.
	(ps-line-number-start, ps-n-up-on): New vars.

2000-05-18  Espen Skoglund  <esk@ira.uka.de>

	* pascal.el (pascal-indent-alist, pascal-indent-comment): Changed
	the indent-comment function to just return the appropriate indent.

2000-05-18  Eric M. Ludlam  <zappo@ultranet.com>

	* sb-dir+.xpm, sb-dir-.xpm, sb-dir.xpm, sb-file+.xpm, sb-file-.xpm,
	sb-file.xpm, sb-mail.xpm, sb-tag+.xpm, sb-tag-.xpm, sb-tag-gt.xpm,
	sb-tag-type.xpm, sb-tag-v.xpm, sb-tag.xpm: New Files

2000-05-18  Dave Love  <fx@gnu.org>

	* info.el (Info-fontify-node): Add intangible property as well as
	invisible.

	* calendar/appt.el (appt-make-list): Match all lines of entry.
	From "Stefan M. Walther (SMW)" <walther@netz.klinik.uni-mainz.de>

2000-05-18  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-diag.el (describe-char-after): Call
	internal-char-font, not char-font.  If internal-char-font returns
	nil, display "-- none --".

2000-05-17  Eli Zaretskii  <eliz@is.elta.co.il>

	* image.el (image-type-available-p): Don't reference image-types
	if it isn't bound.

2000-05-17  Stefan Monnier  <monnier@cs.yale.edu>

	* autoarg.el (autoarg-mode): Typo in the :set argument.

2000-05-17  Eli Zaretskii  <eliz@is.elta.co.il>

	* startup.el (command-line-1): Don't signal an error if the
	directory for auto-save-list files does not yet exist.

2000-05-17  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-conf.el (arabic-iso8859-6): Fix typo.

2000-05-16  Stefan Monnier  <monnier@cs.yale.edu>

	* subr.el (remove-hook): `setq' hook-value, not `set'.

2000-05-16  Sam Steingold  <sds@gnu.org>

	* info.el (debug-ignored-errors): More errors to ignore.

2000-05-16  Dave Love  <fx@gnu.org>

	* cus-edit.el: Don't require cl or easymenu.
	(custom-variable-prompt): Test standard-value property, not
	user-variable-p.

2000-05-16  Sam Steingold  <sds@gnu.org>

	* subr.el (add-hook): `setq' hook-value, not `set'.

2000-05-16  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (command-line-1): Mention the FAQ in the startup
	message.

	* help.el (view-emacs-FAQ): Change `emacs-faq' to `efaq'.

	* progmodes/compile.el (compilation-parse-errors): Collect
	`nomessage' regexps last.

	* dired.el (dired-mode-map): Use dired-do-query-replace-regexp.

	* dired-aux.el (dired-do-query-replace-regexp): Add `-regexp'
	to the function name.

2000-05-15  Dave Love  <fx@gnu.org>

	* speedbar.el (speedbar-recenter): Typo.
	(speedbar-expand-line): Make arg optional.
	(speedbar-mode): Avoid a compiler warning.

2000-05-15  Gerd Moellmann  <gerd@gnu.org>

	* progmodes/sh-script.el (sh-while-getopts) <sh>: Handle case that
	user-specified option string is empty.

	* mouse.el (mouse-yank-at-click): Doc fix.

2000-05-15  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/internal.el (IT-character-translations): More updates of
	latin-iso8859-14 and latin-iso8859-15 from the latest ISO/IEC
	documents.

2000-05-15  Gerd Moellmann  <gerd@gnu.org>

	* env.el (getenv): New function, interactively callable.
	(setenv, getenv): Remove autoload cookies.

	* loadup.el: Load `env'.

	* progmodes/f90.el: Change author's mail address.

2000-05-14  Dave Love  <fx@gnu.org>

	* mail/rmail.el (rmail-show-message-hook): Customize and offer
	goto-addr as an option.

	* help.el (help-xref-stack): Doc fix.
	(help-xref-following): New variable.
	(help-make-xrefs): Use it.
	(help-xref-go-back): Use position information from stack element.
	(help-follow): Make position in stack element a pair.  Use
	help-xref-following.

	* autoarg.el: New file.

	* faces.el: Declare more functions obsolete.

	* viet-util.el, thai-util.el, tibet-util.el.elc, slovak.el
	* misc-lang.el, romanian.el, korea-util.el.elc, lao-util.el
	* japan-util.el, greek.el, hebrew.el, european.el, ethio-util.el
	* english.el, czech.el, devan-util.el, cyril-util.el, china-util.el:
	Remove all the setup-...-environment functions.

2000-05-13  Eric M. Ludlam  <zappo@ultranet.com>

	* speedbar.el: Updated the commentary section.  xemacs20p now uses
	>= when detecting.  Require `defimage' safely.
	(speedbar-easymenu-definition-base): Add toggle for images.
	(speedbar-easymenu-definition-special): Add flush cache & expand.
	(speedbar-visiting-tag-hook): Set new defaults.  Added options.
	(speedbar-reconfigure-keymaps-hook): New variable.
	(speedbar-frame-parameters): Updated documentation.
	(speedbar-use-imenu-flag): Updated custom tag
	(speedbar-dynamic-tags-function-list): New variable.
	(speedbar-tag-hierarchy-method): Updated doc & custom.
	(speedbar-indentation-width, speedbar-indentation-width) New
	variables.
	(speedbar-hide-button-brackets-flag): Customizable.
	(speedbar-vc-indicator): Doc update.
	(speedbar-ignored-path-expressions): Updated default value.
	(speedbar-supported-extension-expressions): Updated default value.
	(speedbar-syntax-table): Remove {} paren status.
	(speedbar-file-key-map, speedbar-buffers-key-map): Add "=" to act
	as "+".  Added overlay aliases.
	(speedbar-mode): Use `speedbar-mode-line-update' instead of
	`force-mode-line-update'.
	(speedbar-mode, speedbar-quick-mouse, speedbar-click)
	(speedbar-double-click): Use `speedbar-mouse-set-point' instead of
	`mouse-set-point'
	(speedbar-reconfigure-keymaps): Run configure keymap hooks.
	(speedbar-item-info-tag-helper): Revamped to handle a wider range
	of arbitrary text, and new helper functions.
	(speedbar-item-copy, speedbar-item-rename): Fixed trailing \ in
	filename finder.
	(speedbar-make-button): Call `speedbar-insert-image-button-maybe'.
	(speedbar-directory-buttons): Update path search/expansion.
	(speedbar-make-tag-line): Pay attention to
	`speedbar-indentation-width'.  Use more care w/ invisible
	properties.
	(speedbar-change-expand-button-char): Call
	`speedbar-insert-image-button-maybe'.
	(speedbar-apply-one-tag-hierarchy-method): Deleted (and replaced).
	(speedbar-sort-tag-hierarchy, speedbar-prefix-group-tag-hierarchy)
	(speedbar-trim-words-tag-hierarchy)
	(speedbar-simple-group-tag-hierarchy): New functions
	(speedbar-create-tag-hierarchy): Update doc, use new tag hooks.
	(speedbar-insert-imenu-list, speedbar-insert-etags-list): New
	functions.
	(speedbar-mouse-set-point): New function
	(speedbar-power-click): Updated documentation.
	(speedbar-line-token, speedbar-goto-this-file): Handle more types
	of tag prefix text.
	(speedbar-expand-line, speedbar-contract-line): Make more robust
	to strange text.
	(speedbar-expand-line): Takes universal argument to flush the
	cache.
	(speedbar-flush-expand-line): New function.
	(speedbar-tag-file): Use new `speedbar-fetch-dynamic-tags' fn.
	Use new generator insertion method.
	(speedbar-fetch-dynamic-tags): New function.
	(speedbar-fetch-dynamic-imenu): Removed code now handled in
	`speedbar-fetch-dynamic-imenu'.
	(speedbar-fetch-dynamic-etags): Fix current buffer problem.
	(speedbar-buffer-easymenu-definition): Added "Kill Buffer", and
	"Revert Buffer" menu items.
	(speedbar-buffer-buttons-engine): Be smarter when creating a
	filename tag (for expansion purposes.).
	(speedbar-highlight-one-tag-line,
	(speedbar-unhighlight-one-tag-line, speedbar-recenter-to-top)
	(speedbar-recenter): New functions.
	(defimage-speedbar): Image loading abstraction.
	(speedbar-directory-+, speedbar-directory--, speedbar-file-+)
	(speedbar-file--, speedbar-file-, speedbar-tag-, speedbar-tag-+)
	(speedbar-tag--, speedbar-tag-gt, speedbar-tag-v)
	(speedbar-tag-type, speedbar-tag-mail): New images.
	(speedbar-expand-image-button-alist): New variable.
	(speedbar-insert-image-button-maybe): Insert an image over some
	buttons.

2000-05-13  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el (encode-coding-char): An ASCII
	character is always encodable.

	* international/mule-conf.el: Add more information in descriptions
	of character sets.

	* international/mule-diag.el (describe-char-after): New function.
	(describe-font-internal): Adjusted for the change of font-info.
	(describe-font): Likewise.
	(print-fontset): Rewritten for the new fontset implementation.
	(describe-fontset): Include fontset alias names in completion.
	(list-fontsets): Adjusted for the change of print-fontset.

	* simple.el (what-cursor-position): If DETAIL is non-nil, call
	describe-char-after instead of displaying the detail in the echo
	area.
	(syntax-code-table): Format changed.
	(string-to-syntax): Adjusted for the above change.

2000-05-12  Stefan Monnier  <monnier@cs.yale.edu>

	* font-lock.el (lisp-font-lock-keywords-1): Add define-minor-mode.

2000-05-12  Dave Love  <fx@gnu.org>

	* calendar/todo-mode.el: Remove some compatibility stuff and CL
	dependence.  Use line-{beginning,end}-position, not
	point-at{b,e}ol.  Some doc fixes.
	(todo-position): New function.  Fix callers of position to use it.
	(todo-save-top-priorities, todo-print): Use with-temp-buffer.

2000-05-12  Gerd Moellmann  <gerd@gnu.org>

	* time.el (display-time-mail-icon): Use `:ascent center'.

	* ange-ftp.el (ange-ftp-skip-msgs): Include 500 code.for
	handling FTP security extensions.

2000-05-11  Dave Love  <fx@gnu.org>

	* calendar/todo-mode.el: New file.

2000-05-11  Gerd Moellmann  <gerd@gnu.org>

	* comint.el (comint-read-input-ring): Move reference to
	comint-input-ring-size outside of the save-excursion.  It was
	causing the default value to be the only one ever seen.

	* font-lock.el: Update copyright.  Remove Simon Marshall's email
	address on request from him.

	* subr.el (substitute-key-definition): Add comment describing
	the meaning of PREFIX.

2000-05-10  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/regexp-opt.el (regexp-opt-depth): Fix regexp.

	* subr.el (add-hook, remove-hook): Make hook buffer-local if needed..
	(add-minor-mode): Don't make the variable buffer-local and add a
	reference to define-minor-mode in the docstring.

	* pcvs.el (cvs-cleanup-collection): Remove obsolete code for
	HEADER/FOOTER and fix bug with trailing empty directory.
	(cvs-append-to-ignore): Use vc-editable-p if available.
	(cvs-dir-member-p): Remove obsolete code for HEADER/FOOTER.
	(vc-do-command): Tweak advice to handle the new VC.

	* log-view.el (log-view-goto-rev): New function for the new VC.
	(log-view-minor-wrap): Use mark-active.

	* log-edit.el (cvs-changelog-full-paragraphs): Mark obsolete.
	(log-edit-changelog-full-paragraphs): New var.
	(log-edit-insert-changelog): Remove a lonely leading `* file'.
	(log-edit-narrow-changelog, log-edit-changelog-paragraph)
	(log-edit-changelog-subparagraph, log-edit-changelog-entry)
	(log-edit-changelog-ours-p, log-edit-changelog-entries)
	(log-edit-changelog-insert-entries, log-edit-insert-changelog-entries):
	Replace the `cvs' prefix with `log-edit'.

	* iswitchb.el (iswitchb-completion-help): Unquote lambda.

	* diff-mode.el (diff-font-lock-keywords): Recognize comments.
	(diff-font-lock-defaults): Explicitly turn off multiline.
	(diff-end-of-hunk): Handle comments and fix end-of-buffer bug.
	(diff-ediff-patch): Fix call to ediff-patch-file.
	(diff-end-of-file, diff-reverse-direction, diff-fixup-modifs):
	Handle comments.

	* frame.el (automatic-hscrolling): Typo.

	* cvs-status.el (cvs-status-minor-wrap): Use mark-active.

2000-05-09  Sam Steingold  <sds@goems.com>

	* apropos.el (apropos-print): use `describe-face' instead of
	`customize-face-other-window'.

2000-05-09  Dave Love  <fx@gnu.org>

	Changes mostly following Richard Sharman <rsharman@wave.home.com>.

	* help.el (describe-variable): Have customize button pop the
	help-xref stack when invoked.
	(help-xref-symbol-regexp): Add `face'.
	(help-make-xrefs): Check for quoted face names and adapt regexp
	submatch numbers to cope.
	(help-xref-interned): Maybe insert face doc too.  Separate
	sections with a line of hyphens.

	* faces.el:  Some doc fixes.  Declare some functions obsolete.
	(describe-face): Add customize button.  Return the help
	text.  Fix prompt.

2000-05-09  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/internal.el (IT-character-translations): Fix last change.

2000-05-08  Eli Zaretskii  <eliz@is.elta.co.il>

	* woman.el: New file
	(from Francis J. Wright <F.J.Wright@Maths.QMW.ac.uk>).

2000-05-08  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/internal.el (IT-character-translations): Update ASCII
	simulations for greek-iso8859-7, add latin-iso8859-14 and
	latin-iso8859-15.

	* international/mule-cmds.el (set-language-info-alist): Call
	define-prefix-command with 3 arguments, to make the map suitable
	for a menu.

2000-05-07  Dave Love  <fx@gnu.org>

	* time.el: Small doc fixes from Pavel Jan,Am(Bk ml.

2000-05-05  Dave Love  <fx@gnu.org>

	* emacs-lisp/cl-macs.el: Doc fixes; mainly avoid duplicating arg
	list in doc string.  Don't quote keyword symbols.
	* emacs-lisp/cl.el: Likewise
	* emacs-lisp/cl-seq.el: Likewise

2000-05-05  Gerd Moellmann  <gerd@gnu.org>

	* abbrev.el (abbrev-mode): Make ARG optional.

2000-05-04  Gerd Moellmann  <gerd@gnu.org>

	* progmodes/ebrowse.el: Change file name `EBROWSE' to `BROWSE'.

	* files.el (auto-mode-alist): Change `EBROWSE' to `BROWSE'.

	* subr.el (substitute-key-definition): Clarify documentation.

2000-05-04  Milan Zamazal  <pdm@freesoft.cz>

	* glasses.el (glasses-convert-to-unreadable): Use
	`glasses-separator' instead of the hard-wired "_".
	(glasses-mode): Call `glasses-make-unreadable' only in a single
	place.

2000-05-04  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/internal.el (cjk-codepages-alist): Add associations for
	Chinese and Korean codepages.  Remove FIXME comment.

2000-05-03  Dave Love  <fx@gnu.org>

	* time.el (display-time-mail-face, display-time-use-mail-icon):
	New option.
	(display-time-mail-icon): New variable.
	(display-time-string-forms): Use the above.  Fix the local-map.

2000-05-03  Gerd Moellmann  <gerd@gnu.org>

	* replace.el (query-replace-map): Add binding for `E'.
	(query-replace-help): Extend help text.
	(perform-replace): Allow editing the replacement string.

	* make-mode.el (makefile-mode-abbrev-table): New variable.
	(makefile-mode): Set local abbrev table to
	makefile-mode-abbrev-table.
	(makefile-font-lock-keywords): Fontify includes and conditionals.

	* subr.el (add-minor-mode): Handle AFTER for keymaps. Don't
	set TOGGLE's value.

	* mailabbrev.el (mail-abbrev-insert-alias): Renamed from
	mail-interactive-insert-alias.
	(mail-abbrev-complete-alias): New command.
	(mail-mode-map): Bind it to `M-TAB'.

2000-05-03  Kenichi Handa  <handa@etl.go.jp>

	* language/lao-util.el (lao-compose-region): New function.

2000-05-02  Gerd Moellmann  <gerd@gnu.org>

	* files.el (recover-session): Make directories as necessary
	if they don't exist yet.

	* calendar/cal-french.el
	(french-calendar-multibyte-special-days-array)
	(french-calendar-special-days-array): Change French text.
	(calendar-french-date-string): Change output.
	(calendar-goto-french-date): Likewise.

2000-05-02  Per Abrahamsen  <abraham@dina.kvl.dk>

	* wid-edit.el (widget-default-active): Obey `:always-active'.
	(widget-documentation-string-value-create): Set `:always-active'.

2000-05-02  Eli Zaretskii  <eliz@is.elta.co.il>

	* startup.el (auto-save-list-file-prefix): For ms-dos, set the
	default prefix to `~/_emacs.d/auto-save.list/_s'.
	(normal-top-level): Create the directory for auto-save files, if
	it doesn't already exist (in the ms-dos case only).

2000-05-02  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/mule-cmds.el (set-language-environment): Don't
	concat an integer (dos-codepage), use format instead.

2000-05-02  Dave Love  <fx@gnu.org>

	* help.el (help-xref-on-pp): Check for constant symbols.

2000-04-29  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (normal-top-level): Put a condition-case around
	the code loading subdirs.el.

2000-04-29  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Upside-down and face background color printing,
	line number step, doc fix.
	(ps-print-version): New version number (5.2).
	(ps-setup, ps-prologue-file, ps-begin-file, ps-begin-job)
	(ps-face-attribute-list, ps-plot-with-face): Code fix.
	(ps-spool-config): Var fix.
	(ps-printer-name-option): Const fix.
	(ps-print-upside-down, ps-use-face-background)
	(ps-line-number-step): New vars.
	(ps-window-system, ps-lp-system): New consts.
	(ps-face-background): New fun.

2000-04-28  Richard Stallman  <rms@gnu.org>

	* files.el (make-auto-save-file-name):
	Apply auto-save-file-name-transforms to visited file name
	before generating auto save file name.
	(auto-save-file-name-transforms): New variable.

	* files.el (backup-enable-predicate):
	Correctly test for a file under a temporary directory.

2000-04-28  Gerd Moellmann  <gerd@gnu.org>

	* subr.el (add-minor-mode): Rewritten.

2000-04-28  Kenichi Handa  <handa@etl.go.jp>

	* mail/sendmail.el (sendmail-send-it): Set
	buffer-file-coding-system to the selected coding system for MIME
	header.

2000-04-27  Gerd Moellmann  <gerd@gnu.org>

	* dired.el (dired-move-to-filename-regexp): Allow format where
	YYYY is followed by two spaces.

	* progmodes/etags.el (etags-tags-completion-table): Add a `:'
	in the second character class of the regexp.

	* mail/mh-comp.el (mh-send-sub): Look for mh-comp-formfile in
	mh-etc, too.

	* textmodes/texinfmt.el (texinfo-format-xref): Don't try to insert
	nil.

	* subr.el (add-minor-mode): Use `set' instead of `setq'.

	* gud.el (gud-gdb-find-file): Call find-file-noselect with NOWARN
	argument.

2000-04-27  Sen Nagata <sen@eccosys.com>

	* emacs-lisp/crm.el (crm-completion-table): New variable.
	(crm-collection-fn, crm-test-completion)
	(completing-read-multiple): Use it.

2000-04-27  Dave Love  <fx@gnu.org>

	* help.el (locate-library): Use mapc.
	(help-manyarg-func-alist): Add call-process-region.

2000-04-26  Gerd Moellmann  <gerd@gnu.org>

	* subr.el (add-minor-mode): Make argument MAP optional.

	* desktop.el (desktop-save): Save list of minor modes.
	(desktop-create-buffer): Restore minor modes.
	(desktop-minor-mode-table): New user-option.

	* subr.el (add-minor-mode): New function.

	* image.el (find-image): New function.
	(defimage): Rewritten to find image at load time.

	* startup.el (normal-top-level-add-to-load-path): Handle
	case that the default directory is not in load-path.

	* help.el: Old patch from Stefan Monnier.
	(help-xref-on-pp): New function.
	(describe-variable): Use it to display xrefs in a symbol's value.

2000-04-26  Stefan Monnier  <monnier@cs.yale.edu>

	* cus-edit.el (custom-face): Fix parenthesis.

2000-04-26  Kenichi Handa  <handa@etl.go.jp>

	* mail/rmail.el (rmail-expunge): When there are no deleted
	messages, do nothing.

2000-04-26  Dave Love  <fx@gnu.org>

	* international/mule-cmds.el (locale-translation-file-name):
	Defvar to nil.
	(set-locale-environment): Set it here (at runtime).

2000-04-25  Gerd Moellmann  <gerd@gnu.org>

	* replace.el (perform-replace): Add parameters START and END.  Use
	them instead of the check for a region in Transient Mark mode.
	(query-replace-read-args): Return two more list elements for the
	start and end of the region in Transient Mark mode.
	(query-replace, query-replace-regexp, query-replace-regexp-eval)
	(map-query-replace-regexp, replace-string, replace-regexp): Add
	optional last arguments START and END and pass them to
	perform-replace.

	* progmodes/ebrowse.el (ebrowse-tags-query-replace): Construct a
	form with additional arguments for perform-replace.

	* progmodes/etags.el (tags-query-replace): Add parameters START
	and END.  Construct a form with additional arguments for
	perform-replace.

	* simple.el (shell-command): Set default directory for "*Shell
	Command Output" buffer.

	* language/european.el (iso-latin-4): Fix typo.

	* emacs-lisp/crm.el: New file.

2000-04-24  Dave Love  <fx@gnu.org>

	* cus-edit.el (Custom-set, Custom-save, Custom-reset-current)
	(Custom-reset-saved, Custom-reset-standard)
	(custom-group-value-create, custom-group-set, custom-group-save)
	(custom-group-reset-current, custom-group-reset-saved)
	(custom-group-reset-standard): Use mapc.
	(custom-buffer-create-internal): Disable undo when creating items.
	Use mapc.
	(custom-face): Avoid redundant lambda.

2000-04-24  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (auto-save-list-file-prefix): Set default to
	`~/.emacs.d/auto-save-list/.saves-' for systems other than MS-DOS.

2000-04-24  Sam Steingold  <sds@gnu.org>

	* time-stamp.el (time-stamp-string-preprocess): Always convert
	`field-result' to a string.

2000-04-24  Gerd Moellmann  <gerd@gnu.org>

	* frame.el (scrolling): New group.
	(automatic-hscrolling): New user-option.

	* startup.el (command-line-x-option-alist): Add `-lsp' and
	`--line-spacing'.

2000-04-19  Dave Love  <fx@gnu.org>

	* emacs-lisp/cl-extra.el (cl-old-mapc): Fix definition.
	(cl-mapc): Rename from mapc.  Fix the funcall.

2000-04-19  Gerd Moellmann  <gerd@gnu.org>

	* simple.el (clone-indirect-buffer-other-window): New command.
	(clone-indirect-buffer): Add optional arg NORECROD.
	(toplevel): Bind `C-x 4 c' to clone-indirect-buffer-other-window.

	* help.el (resize-temp-buffer-window): Use count-screen-lines.

	* window.el (count-screen-lines): New function.
	(shrink-window-if-larger-than-buffer): Use count-screen-lines
	instead of window-buffer-height.

	* progmodes/inf-lisp.el (inferior-lisp-mode): Don't set
	non-existing variable comint-input-sentinel.
	(inferior-lisp-args-to-list): Removed.
	(inferior-lisp): Use split-string instead of
	inferior-lisp-args-to-list.

	* hexl.el (hexl-insert-hex-string): New command.

	* emacs-lisp/gulp.el (gulp-maintainer): Use expand-file-name
	instead of concat.

2000-04-18  Gerd Moellmann  <gerd@gnu.org>

	* mail/sendmail.el (mail-do-fcc): Prevent inserting a newline
	at the start of an existing but empty folder.

2000-04-18  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-mule.el: Customization fix, doc fix.
	(ps-multibyte-buffer): Customization fix.

2000-04-17  Richard M. Stallman  <rms@gnu.org>

	* subr.el (read-passwd): Use read-char-exclusive.

2000-04-17  Gerd Moellmann  <gerd@gnu.org>

	* textmodes/texinfo.el (texinfo-insert-@email)
	(texinfo-insert-@emph, texinfo-insert-@quotation)
	(texinfo-insert-@strong, texinfo-insert-@url): New functions.
	(texinfo-mode-map): Add key bindings for them.

	* files.el (basic-save-buffer-2): Use a template with `$'
	instead of `#' for VMS.

	* simple.el (clone-indirect-buffer): New function.

2000-04-16  Stephen Eglen  <stephen@gnu.org>

	* iswitchb.el (iswitchb-case): New function.  If the user input
	contains any upper-case characters, the search is made
	case-sensitive.

2000-04-17  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/texinfo.el (texinfo-mode-syntax-table): Add \n as
	comment-end.
	(texinfo-font-lock-syntactic-keywords): New var.
	(texinfo-font-lock-keywords): Remove comment regexp.
	(texinfo-insert-block): New function.
	(texinfo-mode-map): Add C-c C-o -> texinfo-insert-block.
	(texinfo-mode): Use define-derived-mode.  Tweak comment-start-skip
	and font-lock-defaults.  Use regexp-opt for outline-regexp.
	(texinfo-environments): New var.
	(texinfo-environment-regexp): Use regexp-opt and
	texinfo-environments.

	* textmodes/ispell.el (ispell-menu-map-needed): Check that
	ispell-process is bound since this might be eval'd before ispell
	is loaded.
	(ispell-message): Use a tiny bit less magic and a bit more hard
	data to figure out what kind of sc-cite-regexp to use.

	* emacs-lisp/regexp-opt.el (regexp-opt-depth): Fix the regexp.

	* calendar/diary-lib.el (fancy-diary-display, mark-diary-entries)
	(insert-cyclic-diary-entry): Unquote the lambda.

	* gud.el (gud-jdb-build-source-files-list): Fix typo.

	* files.el (backup-enable-predicate): Unquote the lambda.

	* cus-edit.el (custom-face, face): Unquote the lambda.

2000-04-15  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Check for line-beginning-position definition.

	* ps-print.el: Fix counting lines in a region.
	(ps-print-version): New version number (5.1.5).
	(ps-spool-without-faces, ps-spool-with-faces): Adjust code.
	(ps-printing-region): Fun code fix.

2000-04-15  Gerd Moellmann  <gerd@gnu.org>

	* gud.el (gud-jdb-build-source-files-list): Change file-exists-p
	to file-directory-p.

2000-04-14  Gerd Moellmann  <gerd@gnu.org>

	* gud.el (gud-jdb-build-source-files-list): Check that directory
	exists before calling directory-files.

2000-04-13  Dave Love  <fx@gnu.org>

	* emacs-lisp/trace.el: Change maintainer.  Use new backquote
	syntax.

	* emacs-lisp/cl-specs.el: Remove when, unless.

	* emacs-lisp/cl-extra.el: Don't quote keywords.
	(cl-old-mapc): New variable.
	(mapc): Use it.
	(cl-map-intervals): Use with-current-buffer.  Don't check for
	next-property-change.
	(cl-map-overlays): Use with-current-buffer.
	(cl-expt): Remove.
	(copy-tree, remprop): Define unconditionally.

	* emacs-lisp/cl-compat.el (keywordp): Remove.

	* emacs-lisp/edebug.el (edebug-keywordp): Remove.  Change callers
	to use keywordp.
	(edebug-spec): Enable keywordp.

	* cus-edit.el (custom-sort-items): Avoid symbol-name with new
	string-lessp.

	* cus-start.el: Use keywordp.

2000-04-13  Edward M. Reingold  <reingold@emr.cs.uiuc.edu>

	* diary-lib.el (include-other-diary-files): Fix the fix of
	2000-02-18 by doing a save-excursion.

2000-04-13  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Customization fix, doc fix.
	(ps-print-version): New version number (5.1.4).
	(ps-article-author, ps-article-subject, ps-info-file, ps-info-node)
	(ps-print-preprint): Adjust code.
	(ps-printer-name, ps-lpr-switches, ps-user-defined-prologue)
	(ps-print-prologue-header, ps-print-control-characters)
	(ps-spool-config): Customization fix.

2000-04-13  Eli Zaretskii  <eliz@is.elta.co.il>

	* textmodes/ispell.el (ispell-menu-map): Menu items rearranged and
	converted to the new menu-item format, names silightly changed,
	help strings added.

	Support for spelling without async subprocesses:

	* textmodes/ispell.el (ispell-cmd-args, ispell-output-buffer)
	(ispell-session-buffer): New variables.
	(ispell-start-process, ispell-process-status,
	ispell-accept-output, ispell-send-string): New functions, for
	Ispell invocation when async subprocesses aren't supported.
	(ispell-word, ispell-pdict-save, ispell-command-loop,
	ispell-process-line, ispell-buffer-local-parsing): Replace calls
	to process-send-string with calls to ispell-send-string, and
	accept-process-output with ispell-accept-output.
	(ispell-init-process): Call ispell-process-status instead of
	process-status with.
	(ispell-init-process): Call ispell-start-process.  Call
	ispell-accept-output and ispell-send-string.  Don't call
	process-kill-without-query and kill-process if they are unbound.
	(ispell-async-processp): New function.

2000-04-12  Dave Love  <fx@gnu.org>

	* info.el: Add debug-ignored-errors.
	(Info-mode-menu): Add some items.
	(Info-directory): Add autoload cookie.

	* menu-bar.el (menu-bar-options-menu): Make `mule' always visible.
	Modify `truncate-lines'.  Make `describe-language-environment'
	always visible and add help.  Modify `describe-key' help.  Invoke
	Info-directory from `info'.  New entry `emacs-manual'.

2000-04-10  Gerd Moellmann  <gerd@gnu.org>

	* progmodes/ebrowse.el (ebrowse-tree-mode): Use
	propertized-buffer-identification.
	(ebrowse-update-member-buffer-mode-line): Likewise.
	(ebrowse--mode-strings): Removed.
	(ebrowse--mode-line-props): Removed.

	* files.el (auto-mode-alist): Add `EBROWSE'.

	* progmodes/ebrowse.el (ebrowse-read): Skip forward over white
	space before testing for end of buffer.
	(ebrowse-load): Removed.
	(ebrowse-revert-tree-buffer-from-file): Rewritten.
	(ebrowse-create-tree-buffer): Rewritten.
	(ebrowse-tree-mode): Read tree from buffer.

	* progmodes/ebrowse-ffh.el: Removed.

2000-04-10  Kenichi Handa  <handa@etl.go.jp>

	* language/vietnamese.el (viet-vscii-decode-table): Fix a bug.

2000-04-10  Gerd Moellmann  <gerd@gnu.org>

	* jit-lock.el (with-buffer-unmodified): Fix bug introduced by `)'
	at the wrong place.

2000-04-09  Dave Love  <fx@gnu.org>

	* files.el (backup-enable-predicate): Use
	temporary-file-directory, small-temporary-file-directory.
	(make-backup-file-name-function, backup-directory-alist): New
	variables.
	(make-backup-file-name-1): New function.
	(make-backup-file-name): Use it.
	(find-backup-file-name): Likewise.  Use format for clarity, not
	concat.
	(file-newest-backup): Use make-backup-file-name.

2000-04-09  Gerd Moellmann  <gerd@gnu.org>

	* progmodes/ebrowse-ffh.el: New file.

	* progmodes/ebrowse.el (ebrowse-find-file-hook-fn): Moved
	to ebrowse-ffh.el.
	(ebrowse-load): Add autoload.

	* finder.el (finder-commentary): Add autoload cookie.

	* mail/rfc2368.el: Correct author's email address.

	* progmodes/ebrowse.el: New file.

	* emacs-lisp/easymenu.el (easy-menu-create-menu): Process menu
	item help string.
	(easy-menu-do-add-item): Ditto.
	(easy-menu-define): Extend doc string.

	* jit-lock.el (with-buffer-unmodified): Use
	restore-buffer-modified-p.
	(with-buffer-prepared-for-font-lock): Use with-buffer-unmodified.
	(jit-lock-function, jit-lock-stealth-fontify): Don't use
	with-buffer-unmodified.

2000-04-08  Dave Love  <fx@gnu.org>

	* emacs-lisp/edebug.el: Fix specs for dolist, dotimes, push, pop,
	unless, when.

2000-04-07  Mikio Nakajima  <minakaji@osaka.email.ne.jp>

	* viper-util.el (viper-put-on-search-overlay): New subroutine.
	(viper-flash-search-pattern): No operation when using Emacs
	doesn't support face.
	Use `viper-put-on-search-overlay'.

2000-04-04  Gerd Moellmann  <gerd@gnu.org>

	* isearch.el (isearch-mode-map): Define M-C-s like C-s and M-C-r
	like C-r.

	* progmodes/make-mode.el: Some doc fixes.
	(makefile-mode-abbrev-table): New variable.
	(makefile-mode): Set local abbrev table to makefile-mode-abbrev-table.
	(makefile-font-lock-keywords): Fontify includes and conditionals.
	(toplevel): Require `dabbrev' and `add-log' when compiling.

	* replace.el (perform-replace): Don't move forward one char
	when MATCH-AGAIN is nil, and REGEXP-FLAG is t.  We don't want
	to do that because it leaves point 1 position after the last
	replacement, after everything has been replaced.

	* jit-lock.el (with-buffer-unmodified): New macro.
	(with-buffer-prepared-for-font-lock): Don't preserve buffer's
	modified state.
	(jit-lock-function-1): Extracted from jit-lock-function; not
	preserving buffer's modified state.
	(jit-lock-function, jit-lock-stealth-fontify): Call
	jit-lock-function-1.

	* mail/rfc2368.el: Remove supernumerary copyright line.

2000-04-04  Milan Zamazal  <pdm@freesoft.cz>

	* glasses.el: Provide facilities for inserting space before left
	parentheses and uncapitalization of identifiers.
	(glasses-mode): Try to remove old overlays in all cases.

2000-04-03  Gerd Moellmann  <gerd@gnu.org>

	* progmodes/compile.el (compile-internal): Display the compilation
	buffer in a different frame, if it's already displayed there.

	* mail/rfc2368.el: New file.

	* simple.el (sendmail-user-agent-compose): Recognize a `body'
	header and insert its value as mail body.

	* subr.el (member-ignore-case): New function.

	* dabbrev.el (dabbrev-ignored-regexps): New user-option.
	(dabbrev--find-expansion): Ignore buffers matching a regexp
	from dabbrev-ignored-regexps.

	* jka-compr.el (jka-compr-compression-info-list): Add `.z'
	to extensions handled by gzip.

2000-04-03  Richard M. Stallman  <rms@gnu.org>

	* files.el (insert-directory): List the total free space
	along with the used space.

	* textmodes/fill.el (fill-individual-paragraphs): If a no-prefix
	line is followed by one that matches CITATION-REGEXP, end the
	paragraph.

2000-04-03  Markus Rost  <rost@delysid.gnu.org>

	* mail/rmailsum.el (rmail-user-mail-address-regexp): New option.
	(rmail-make-basic-summary-line): Use that option.

2000-04-03  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el (encoded-string-description):
	Rewritten.   Try pretty description for ISO 2022 escape sequences
	only if CODING-SYSTEM is based on ISO 2022.  Use uppercase letters
	for hexadecimal format.

2000-04-01  Dave Love  <fx@gnu.org>

	* cpp.el: Change customization group to `c' from `C'.

	* vcursor.el (vcursor-move): Use display-color-p.

	* international/mule-util.el: Provide mule-utils.
	(string-to-sequence): Simplify and speed up.

	* international/mule.el (make-coding-system): Purecopy doc-string.

	* international/mule-cmds.el: Various menu changes.
	(describe-specified-language-support): Handle `Default'.
	(set-language-info): Purecopy `info'.

2000-03-31  Andrew Innes  <andrewi@gnu.org>

	* vc.el (vc-backend-diff): Return the correct status if we had to
	retry the rcsdiff command without the --brief option.

2000-03-31  Dave Love  <fx@gnu.org>

	* help.el (help-manyarg-func-alist): Correct several omissions.

	* add-log.el: Don't require cl, fortran.
	(add-log-current-defun-function): Doc fix.
	(change-log-version-number-regexp-list): Remove SCCS part.  Doc
	fix.
	(change-log-version-rcs): Function deleted.
	(change-log-version-number-search): Doc fix.  Use
	vc-workfile-version.  Avoid CL dolist.
	(add-change-log-entry): Just call add-log-current-defun to get
	defun.  Simplify somewhat.
	(change-log-get-method-definition-1): Likewise.
	(add-log-current-defun): Return nil if calling
	add-log-current-defun-function does so.  Move Fortran stuff to
	fortran.el.  Return string without properties.

	* textmodes/ooutline.el (outline-font-lock-keywords): Use :upper:
	and :alpha: char classes.

	* mail/supercite.el: Defvar curline when compiling.
	(sc-citation-root-regexp, sc-citation-nonnested-root-regexp)
	(sc-get-address, sc-attribs-extract-namestring): Use [:alnum:]
	rather than a-zA-Z0-9 to allow non-ASCII characters.

2000-03-31  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/byte-opt.el: Fix byte-compiler warnings format.

	* emacs-lisp/bytecomp.el (byte-compile-file-form-autoload):
	Re-enable new code.

	* lpr.el (print-region-1): Use -d to specify printer name for
	systems `usg-unix-v*, `dgux', `hpux', `irix'.

2000-03-31  Dave Love  <fx@gnu.org>

	* emacs-lisp/byte-opt.el (byte-compile-inline-expand): Look
	for function definition in symbol's function value slot first
	instead of first consulting byte-compile-function-environment.

2000-03-31  Kenichi Handa  <handa@etl.go.jp>

	* language/european.el ("Polish"): New language environment.
	(setup-polish-environment): New function.

2000-03-30  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/bytecomp.el (byte-compile-file-form-autoload):
	Disable new code.

	* emacs-lisp/byte-opt.el (byte-compile-inline-expand): Fix bug
	trying to `load' the symbol of an autoload instead of the file
	recorded in the autoload.  Fix error messages.

2000-03-30  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: PostScript programming fix for ghostview, doc fix.
	(ps-print-version): New version number (5.1.3).
	(ps-begin-file, ps-begin-job, ps-set-color, ps-do-despool, ps-setup)
	(ps-insert-file, ps-output-boolean, ps-plot-with-face)
	(ps-generate-postscript-with-faces): Code fix.
	(ps-color-values): XEmacs compatibility.
	(ps-print-background-image, ps-print-background-text, ps-printer-name)
	(ps-default-fg, ps-default-bg): Adjust customization.
	(ps-zebra-color): Adjust customization, renaming old ps-zebra-gray var.
	(ps-color-scale): Renaming old ps-color-value fun.
	(ps-print-headers): Replace ps-print-header group to avoid conflict
	with ps-print-header variable.
	(ps-print-miscellany): New group.
	(ps-format-color, ps-rgb-color): New funs.
	(ps-default-foreground): New var.
	(ps-printer-name-option): New const.

2000-03-30  Peter Breton  <pbreton@ne.mediaone.net>

	* net/net-utils.el:
	(network-connection-host, network-connection-service): New variables
	(network-connection-mode): New mode, derived from comint-mode
	(network-connection-mode-setup): New function, saves host and
	service information in local variables.

	* lisp/locate.el:
	(locate-word-at-point): Added this function
	(locate): Default to using locate-word-at-point as input
	Run dired-mode-hook

2000-03-29  Dave Love  <fx@gnu.org>

	* calendar/appt.el: Doc fixes.
	(appt-check): Convert min-to-app to a string before passing to
	appt-disp-window-function or concat.
	(appt-delete-window): Remove test for frame-root-window.
	(appt-select-lowest-window, appt-convert-time): Simplify.

	* emacs-lisp/bytecomp.el: Doc fixes.
	(byte-compile-file-form-autoload): Update
	byte-compile-function-environment.

2000-03-29  Andreas Schwab  <schwab@suse.de>

	* emacs-lisp/autoload.el: Also print defsubst doc string
	specially.

	* dired.el (dired-insert-directory): If dired-free-space-program
	failed just delete its output.

2000-03-29  Dave Love  <fx@gnu.org>

	* international/iso-cvt.el: Move provide to end.  Doc fixes.
	(iso-iso2sgml-trans-tab, iso-sgml2iso-trans-tab): New variables.
	(iso-iso2sgml, iso-sgml2iso): New functions.
	(iso-cvt-define-menu): Fix some entries and use backquote for
	clarity.

	* format.el (format-alist): Use iso-cvt functions for SGML/HTML.

2000-03-28  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/lisp-mnt.el (lm-last-modified-date): Add parameter
	ISO-DATE.  If non-nil, return date in ISO 8601 format.

2000-03-26  Stefan Monnier  <monnier@cs.yale.edu>

	* log-edit.el (log-edit-mode-map): Inherit from vc-log-mode-map
	if it ever becomes used.
	(log-edit-mode-hook): Default to vc-log-mode-hook.
	(log-edit-mode): Fix the docstring.

	* emacs-lisp/bytecomp.el (byte-compile-eval): Fix and reenable
	the code.

2000-03-26  Dave Love  <fx@gnu.org>

	* net/browse-url.el (browse-url): Re-fix case of
	browse-url-browser-function being an alist.
	(browse-url): Add :link to defgroup.

	* files.el: Doc fixes.
	(file-truename): Include `[' in wildcard characters.
	(automount-dir-prefix): Customize.
	(find-file-wildcards): Add :version.
	(find-file-noselect): Simplify a mapcar call.

	* emacs-lisp/lisp-mode.el (lisp-eval-defun): Make arglist
	compatible with inf-lisp version.
	(eval-defun-1): Fix custom-declare-variable case.

2000-03-25  Stefan Monnier  <monnier@cs.yale.edu>

	* cus-edit.el (hook): Use `dolist' instead of CL's `mapc'.

2000-03-24  Gerd Moellmann  <gerd@gnu.org>

	* Makefile (COMPILE_FIRST): New macro.
	(compile-files): Compile files from COMPILE_FIRST first.

	* emacs-lisp/bytecomp.el (byte-compile-eval): Disable new
	code.

	* emacs-lisp/lisp.el (beginning-of-defun-raw): Add regexp
	matching open parenthesis in column 0 to defun-prompt-regexp
	only if open-paren-in-column-0-is-defun-start is set.

	* sun-curs.el: Require CL at compile-time only.

	* msb.el (msb--choose-file-menu): Use `(apply #'list ...)'
	instead of copy-list which is a function from CL.
	(msb--choose-menu, msb--mode-menu-cond)
	(msb--create-buffer-menu-2): Use dolist instead of mapc.
	(msb--init-file-alist): Use mapcar instead of mapcan.
	(msb--aggregate-alist): Use mapcar instead of mapcan.  Fix
	`(' in column 0 in doc string.
	(msb--add-separators): Use mapcar instead of mapcan.

	* cus-dep.el: Require CL at compile-time only.

2000-03-24  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/bytecomp.el (byte-compile-warning-types)
	(byte-compile-warnings): New warning `noruntime'.
	(byte-compile-constants, byte-compile-variables): Fix docstring.
	(byte-compile-initial-macro-environment): Use `byte-compile-eval' to
	execute `eval-whenc-compile's body.
	(byte-compile-unresolved-functions): Fix docstring.
	(byte-compile-eval): New function.
	(byte-compile-callargs-warn): Check if the function will be available
	at runtime (via property `byte-compile-noruntime').
	(byte-compile-print-syms): New function.
	(byte-compile-warn-about-unresolved-functions): Also warn about
	`noruntime' functions (and use `byte-compile-print-syms').
	(byte-compile-file): Capitalize the message.

2000-03-24  Gerd Moellmann  <gerd@gnu.org>

	* mail/rmail.el (rmail-confirm-expunge): New user-option.
	(rmail-expunge): Ask for confirmation depending on the setting
	of rmail-confirm-expunge.

2000-03-23  Gerd Moellmann  <gerd@gnu.org>

	* Makefile (bootstrap-clean): If $(emacs) exists, build
	loaddefs.el first.  A loaddefs.el that's not up-to-date might
	cause a bootstrap failure because things don't autoload as
	expected.

2000-03-23  Dave Love  <fx@gnu.org>

	* net/browse-url.el: Restore previous use of
	browse-url-maybe-new-window.

2000-03-23  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Skip banner page fix.
	(ps-print-version): New version number (5.1.2).
	(ps-begin-file, ps-end-file, ps-generate): Code fix.

2000-03-23  Dave Pearson  <davep@davep.org>

	* net/quickurl.el Changed the type of parameter passed to the
	function defined by `quickurl-format-function'. Before only the
	text of the URL was passed. Now the whole URL structure is passed
	and the function is responsible for extracting the parts it
	requires.  Changed the default of `quickurl-format-function'
	accordingly.
	(quickurl-insert): Changed the `funcall' of
	`quickurl-format-function' to match the above change.
	(quickurl-list-insert): Changed the `url' case so that it makes
	use of `quickurl-format-function', previous to this the format was
	hard wired.

2000-03-22  Gerd Moellmann  <gerd@gnu.org>

	* startup.el: Change some spellings for the X Window System.

2000-03-22  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/make-mode.el (makefile-warn-suspicious-lines): clean
	up the code and the regexp and make sure the cursor is temporarily
	moved to the suspicious line while querying the user.

2000-03-22  Jason Rumney  <jasonr@gnu.org>

	* w32-fns.el (w32-charset-info-alist): Initialize.

2000-03-22  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: N-up last page fix.
	(ps-print-version): New version number (5.1.1).
	(ps-end-file, ps-end-job, ps-generate): Code fix.

2000-03-21  Stefan Monnier  <monnier@cs.yale.edu>

	* files.el (find-file-run-dired): Update docstring.
	(find-directory-functions): New hook.
	(find-file-noselect): Run find-directory-functions rather than
	calling dired directly.

	* menu-bar.el (pcl-cvs): Add an entry for PCL-CVS' global menu.

	* pcvs.el: Add a minimal leading commentary.
	(cvs-make-cvs-buffer): Change the header part by removing the startup
	message and adding a `Module' entry.  Also replace the FOOTER and
	HEADER special fileinfos with the new support in ewoc for updating
	its own footer and header.
	(cvs-update-header): Update to use the header/footer of the ewoc.
	(cvs-mode): Use define-derived-mode and set truncate-lines to t.
	(cvs-is-within-p): New function.
	(cvs-mode-run): Take advantage of `save-some-buffers's new ability
	to only examine some subset of the buffers.

	* pcvs-info.el (cvs-fileinfo-pp): Use the new property-preserving
	`format' instead of our own ad-hoc functions.
	Remove HEADER and FOOTER cases, now handled in the EWOC.
	(cvs-fileinfo<): Remove HEADER and FOOTER cases.

	* pcvs-parse.el (cvs-parse-run-table): Change message for unknown
	output to avoid scaring the user.
	(cvs-parse-table): Catch message for non-up-to-date commits.

	* pcvs-defs.el (cvs-startup-message): Remove.
	(cvs-global-menu): New autoloaded menu.

	* pcvs-util.el (cvs-string-fill): Remove.

	* emacs-lisp/ewoc.el (ewoc--create-special-node): Remove.
	(ewoc--refresh-node): Don't take the whole EWOC but only the relevant
	PP part of it and also make it work for footers and headers.
	(ewoc-create): Drop POS and BUFFER arguments.
	Use the DLL's dummy node to store the end-of-footer position.
	(ewoc-map, ewoc-invalidate): Update call to ewoc--refresh-node.
	(ewoc-refresh): Remove unused `header' variable.
	(ewoc-(get|set)-hf): New functions.

	* log-view.el (log-view-(msg|file)-(prev|next)): Rename from
	log-view-*-(message|file) and use easy-mmode-define-navigation.
	(log-view-message-re): Match SCCS format as well.
	And match the revision line rather than the dashed separator line.
	(log-view-mode): Use the new define-derived-mode.
	(log-view-current-tag): Fill in with an actual implementation.

	* cvs-status.el (cvs-status-(prev|next)): Rename from
	cvs-status-(prev|next)-entry and use easy-mmode-define-navigation.
	(cvs-tree-dstr-*): Rename from cvstree-dstr-* and use two ascii chars
	to let the output "breathe" a little more (more readable).
	(cvs-status-mode): Use the new define-derived-mode.

	* smerge-mode.el (smerge-auto-leave): New function and variable.
	(smerge-basic-map): Rename from smerge-basic-keymap.
	Change the bindings for smerge-diff-*.
	(smerge-*-map): Use easy-mmode-defmap.
	(smerge-(next|prev)): Use easy-mmode-define-navigation.
	(smerge-keep-*): Use smerge-auto-leave.

2000-03-21  Jason Rumney  <jasonr@gnu.org>

	* cus-edit.el (custom-button-face): Use 3D look for w32.
	(custom-button-pressed-face): Likewise.

2000-03-21  Gerd Moellmann  <gerd@gnu.org>

	* progmodes/etags.el (tags-case-fold-search): New user-option.
	(tags-loop-eval): New function.  Bind case-fold-search around eval
	depending on the value of tags-case-fold-search.
	(tags-loop-continue): Use tags-loop-eval.
	(find-tag-in-order): Bind case-fold-search depending on the value
	of tags-case-fold-search.

2000-03-21  Stefan Monnier  <monnier@cs.yale.edu>

	* diff-mode.el (diff-mode-*-map): use `easy-mmode-defmap'.
	(diff-end-of-hunk): Return the end position for use in
	`easy-mmode-define-navigation'.
	(diff-recenter): Remove.
	(diff-(next|prev)-*): Rename `diff-*-(prev|next)' and defined in terms
	of `easy-mmode-define-navigation'.
	(diff-kill-*): Rename `diff-*-kill' (for consistency with the
	previous renaming) and fix to use new names.
	(diff-merge-strings): Use \n as separator: simpler, faster.
	(diff-mode): Use `define-derived-mode'.

	* derived.el (define-derived-mode): Don't autoload anymore.
	Prefer the macro-only version provided by easy-mmode.el.

	* emacs-lisp/easy-mmode.el (define-derived-mode): New name for
	`easy-mmode-define-derived-mode'.
	Use `combine-run-hooks'.
	(easy-mmode-define-navigation): New macro.

	* subr.el (combine-run-hooks): New function.

2000-03-21  Kenichi HANDA  <handa@etl.go.jp>

	* term/x-win.el: Fontsets related initialization is simplified.

	* international/mule-diag.el (describe-font): Don't refer to
	global-fontset-alist, instead call font-list.
	(describe-fontset, list-fontsets, mule-diag): Likewise.
	(print-fontset): Adjusted for the change of fontset
	implementation.

	* international/fontset.el (x-charset-registries): Variable
	removed, instead the corresponding data is stored in the default
	fontset.
	(register-alternate-fontnames): Function removed.
	(resolved-ascii-font): Variable removed.
	(x-compose-font-name): Ignore the second argument REDOCE.
	(x-complement-fontset-spec): Complement only an ASCII font and
	element for those charsets than can use that ASCII font.
	(generate-fontset-menu): Don't refer to global-fontset-alist,
	instead call fontset-list.
	(uninstantiated-fontset-alist): Variable removed.
	(x-style-funcs-alist): Likewise.
	(fontset-default-styles): Likewise.
	(x-modify-font-name): Function removed.
	(create-fontset-from-fontset-spec): Ignore the argument
	STYLE-VARIANT.
	(create-fontset-from-ascii-font): Docsting adjusted for the above
	change.
	(instantiate-fontset, resolve-fontset-name): Functions removed.
	(fontset-list): Now implemented by C code.

	* faces.el (read-face-font): Fix TABLE arg to completing-read.
	(describe-face): Include `font' attribute in the description.

2000-03-21  Kenichi Handa  <handa@etl.go.jp>

	* international/quail.el (quail-set-keyboard-layout): Typo fixed.

2000-03-20  Gerd Moellmann  <gerd@gnu.org>

	* rcompile.el, rlogin.el, telnet.el, net-utils.el, quickurl.el,
	ange-ftp.el, browse-url.el, goto-addr.el, webjump.el,
	zone-mode.el, snmp-mode.el: Moved to net subdirectory.

	* jit-lock.el (with-buffer-prepared-for-font-lock): Add comment
	about behavior of set-buffer-modified-p wrt redisplay.

2000-03-19  Richard M. Stallman  <rms@gnu.org>

	* view.el (view-mode-disable): Kill local binding of view-read-only.

2000-03-18  Gerd Moellmann  <gerd@gnu.org>

	* font-lock.el (font-lock-apply-syntactic-highlight): if VALUE
	is a string, convert it to a syntax cell using string-to-syntax.

	* simple.el (syntax-code-table, syntax-flag-table): New variables.
	(string-to-syntax): New function.

	* ange-ftp.el (ange-ftp-try-passive-mode): New user-option.
	(ange-ftp-get-process): If ange-ftp-try-passive-mode is set,
	try to use passive ftp mode.

2000-03-17  Gerd Moellmann  <gerd@gnu.org>

	* progmodes/awk-mode.el (awk-font-lock-keywords): Add `else'.

	* simple.el (append-to-buffer): Update point of windows after
	insertion.

	* abbrev.el (inverse-add-abbrev): Identify word by first moving
	forward then moving backward.  Reindent.

	* frame.el (other-frame): Call x-focus-frame only if
	focus-follows-mouse is off.

2000-03-17  Dave Love  <fx@gnu.org>

	* pcvs-util.el (cvs-strings->string): Rename
	replace-regexps-in-string.

2000-03-17  Stefan Monnier  <monnier@cs.yale.edu>

	* mail/rmailsum.el (rmail-summary-font-lock-keywords): Make sure the
	regexp for labels cannot span several lines.

	* emacs-lisp/cl-macs.el (cl-do-arglist): Don't add useless
	`(setq :<key> ':<key>)' to the macro expansion.

2000-03-16  Dave Love  <fx@gnu.org>

	* progmodes/f90.el (f90): Put custom group under `languages', not
	`fortran'.
	(f90-mode-hook): Customize.
	(f90-mode): Set add-log-current-defun-function.
	(f90-current-defun): New function.

2000-03-16  Gerd Moellmann  <gerd@gnu.org>

	* cus-edit.el (custom-variable-tag-face): Handle case that
	default face's height is not a number.
	(custom-face-tag-face, custom-group-tag-face-1)
	(custom-group-tag-face): Ditto.
	(custom-group-tag-face-1): Add :group.

	* info.el (Info-fontify-maximum-menu-size): Increase to 100000.

2000-03-15  Gerd Moellmann  <gerd@gnu.org>

	* pcvs-defs.el (toplevel): Remove autoload cookie for form
	requiring easymenu.

2000-03-15  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: PostScript user-defined prologue, PostScript error
	handler, doc fix.
	(ps-print-version): New version number (5.1).
	(ps-user-defined-prologue, ps-error-handler-message)
	(ps-print-prologue-0, ps-error-handler-alist): New vars.
	(ps-setup, ps-begin-file, ps-begin-job): Code fix.
	(ps-insert-string): New function.

2000-03-15  Kenichi Handa  <handa@etl.go.jp>

	* international/ccl.el (ccl-compile-expression): Don't generate
	invalid self-assignment code.

2000-03-14  Dave Love  <fx@gnu.org>

	* subr.el (replace-regexp-in-string): Renamed from
	replace-regexps-in-string.  Doc fix.

2000-03-12  Dave Love  <fx@gnu.org>

	* cus-edit.el: Doc fixes.
	(customize-set-variable, customize-save-variable): Rename args for
	doc.
	(custom-variable-tag-face, custom-face-tag-face)
	(custom-group-tag-face-1, custom-group-tag-face): Modify from
	style which user identify as hyperlink.
	(hook): Don't add undefined functions to the hook.
	(debug-ignored-errors): Transfer message from bindings.el.

2000-03-12  Gerd Moellmann  <gerd@gnu.org>

	* recentf.el (recentf-keep-non-readable-files-p): Remove
	double/nested definition.

2000-03-12  Dave Love  <fx@gnu.org>

	* facemenu.el (facemenu-get-face): Use display-color-p.
	* enriched.el (enriched-decode-foreground): Likewise.
	(enriched-decode-background): Likewise.
	* isearch.el (isearch-highlight): Likewise.
	* info-look.el (info-lookup): Likewise.
	* simple.el (completion-setup-function): Likewise.

	* textmodes/text-mode.el (text-mode-hook): Add flyspell-mode to
	:options.

	* bindings.el (mode-line-format): Fix line-number and
	column-number items.  Add help-echo for the background.
	(mode-line-mule-info): Modify help-echo.

	* avoid.el (mouse-avoidance-mode): Add autoload cookie to
	defcustom.

	* files.el (load-file): Allow completion to .elc.

	* man.el: Doc fixes.
	(Man-init-defvars): Use display-color-p to set fontification.

	* play/hanoi.el (hanoi-internal): Don't use oddp.

2000-03-12  Gerd Moellmann  <gerd@gnu.org>

	* arc-mode.el (archive-zip-update): Add `-P' for pkzip.

	* emacs-lisp/re-builder.el: Remove RCS Id, remove history comment.

2000-03-12  Detlev Zundel <detlev.zundel@stud.uni-karlsruhe.de>

	* emacs-lisp/re-builder.el (reb-re-syntax): Fix typo in `:type'.
	Fix comment.

2000-03-10  Stefan Monnier  <monnier@cs.yale.edu>

	* font-lock.el (font-lock-keywords): Fix the doc now that
	regexp-opt-depth is unnecessary.
	(save-buffer-state): Set an edebug spec.
	(font-lock-fontify-anchored-keywords): Properly handle the case when
	the matcher goes past the limit.

	* cvs-status, log-edit.el, log-view.el, pcvs-defs.el, pcvs-info.el,
	pcvs-parse.el, pcvs-util.el, pcvs.el: New files.

	* emacs-lisp/ewoc.el: New file.  This is a merge of elib-node.el,
	dll.el and cookie.el (from Elib) with heavy renaming and other
	massaging.

	* emacs-lisp/easy-mmode.el (easy-mmode-defmap, easy-mmode-defsyntax):
	Autoload the functions used.
	(easy-mmode-define-syntax): Fix CL typo.
	(easy-mmode-define-derived-mode): Improve the docstring generation.

2000-03-10  Gerd Moellmann  <gerd@gnu.org>

	* textmodes/texinfo.el (texinfo-version): Variable and function
	removed.

2000-03-09  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/easy-mmode.el (easy-mmode-define-keymap): Extend to
	allow more flexibility.
	(easy-mmode-set-keymap-parents, easy-mmode-define-syntax): New
	fns.
	(easy-mmode-defmap, easy-mmode-defsyntax)
	(easy-mmode-define-derived-mode): New macros.

2000-03-09  Didier Verna  <didier@xemacs.org>

	* rect.el (replace-rectangle): New function.

2000-03-09  Dave Love  <fx@gnu.org>

	* progmodes/fortran.el (fortran-comment-line-start): Define as
	"C".
	(fortran-comment-line-start-skip): Don't match cpp stuff.
	(font-lock-keywords): Add * to comment-chars.  Grok cpp stuff.
	(fortran-mode-map): Remove over-eager custom-menu-create for now.
	(fortran-mode): Don't set fortran-comment-line-start-skip,
	fortran-comment-line-start here.  Set comment-start,
	add-log-current-defun.
	(fortran-fill-paragraph): Adjust to try to DTRT with cpp stuff.
	(fortran-current-defun): New function.

2000-03-09  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/re-builder.el: New file.

	* mouse.el (mouse-drag-region): Don't run up-event handler
	if hscroll has changed.

	* octave-mod.el (octave-font-lock-keywords): To font-lock the
	builtin operators, use `font-lock-builtin-face' for Emacs and
	`font-lock-preprocessor-face' otherwise.

	* font-lock.el (lisp-font-lock-keywords-1): Highlight
	`(defun (setf foo)' differently.

2000-03-08  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/regexp-opt.el: Update copyright and leading comment.
	(regexp-opt): Update comment and adapt the code the new meaning of
	the `paren' argument of regex-opt-group for shy-groups.
	(regexp-opt-depth): Handle shy groups as well as backslashed
	backslashes.
	(regexp-opt-group): Turn the leading comment into a docstring.
	Allow `paren' to be a string (the string to use to open a group).
	Remove open-presuf and close-presuf.  Instead of checking for `all
	one-char' and then later on check for `several one-char', handle
	both cases close together.  Also apply a more generic algorithm
	for suffixes (the mirror image of the algorithm used for
	prefixes).  Use shy-groups.  Use nreverse rather than reverse.
	(regexp-opt-try-suffix): Removed.

	* cmuscheme.el (inferior-scheme-mode-map): Define it independently
	from comint-mode-map, so we can just inherit from it.  Also, move
	the initialization into the `defvar' since there's no docstring
	anyway and it's fairly short.
	(inferior-scheme-mode): Define it as derived-mode: the code is
	shorter and this way we inherit from comint-mode-map rather than
	copying it.

	* subr.el (replace-regexps-in-string): Properly handle the case
	where we match an empty string.

	* comint.el (comint-exec-1): Add the current-dir to the exec-path
	when the command has a directory component (such as "./testml").
	Also fix a typo in the comment.

2000-03-08  Gerd Moellmann  <gerd@gnu.org>

	* Makefile (compile-files): Compile files one by one because
	that's the only way to ensure a clean compilation environment for
	each individual file.

	* frame.el (other-frame): Call x-focus-frame.

2000-03-07  Dave Love  <fx@gnu.org>

	* recentf.el (recentf-keep-non-readable-files-p): Add :set,
	:require to defcustom.

	* emacs-lisp/cl.el: Remove expt, delete, rassoc from autoloads
	lists.

	* files.el (auto-mode-alist): Add configure.in.

	* progmodes/autoconf.el: New file.

2000-03-07  Gerd Moellmann  <gerd@gnu.org>

	* mail/mh-e.el: Change maintainer to `none'.

	* recentf.el (recentf-keep-non-readable-files-p): Quote args
	to remove-hook and add-hook.

2000-03-07  Francesco Potorti`  <F.Potorti@cnuce.cnr.it>

	* sendmail.el (mail-send-nonascii): Add a new value `mime' and use
	it as the default.
	(mail-send): Test mail-send-nonascii also for the new `mime' value.
	(sendmail-send-it): Conditionally add MIME headers specifying the
	used character set.

2000-03-07  Dave Love  <fx@gnu.org>

	* winner.el: Fix keywords, autoload cookies.  Split
	eval-when-compile form to avoid compilation failure.

2000-03-07  Miyashita Hisashi  <himi@bird.scphys.kyoto-u.ac.jp>

	* international/mule.el: Modify comment about coding system
	property `coding-category'.
	(make-coding-system): New argument EOL-TYPE.  Pay attention to
	coding-category property of PROPERTIES.

	* international/mule-conf.el (coding-category-utf-8,
	coding-category-utf-16-be, coding-category-utf-16-le): New coding
	categories.  Include them in the argument for set-coding-priority.

	* international/mule-cmds.el (reset-language-environment): Include
	coding-category-utf-8, coding-category-utf-16-be, and
	coding-category-utf-16-le in the argument for set-coding-priority.
	(reset-language-environment): Initialize coding-category-utf-8,
	coding-category-utf-16-be, and coding-category-utf-16-le to nil.

2000-03-06  Karl Fogel  <kfogel@red-bean.com>

	* bookmark.el (bookmark-file-or-variation-thereof): New func, for
	code abstracted out of `bookmark-jump-noselect'.  Now tries info
	extensions as well as compression extensions.
	(bookmark-jump-noselect): Use above new func.

2000-03-03  Gerd Moellmann  <gerd@gnu.org>

	* strokes.el: Change maintainer's mail address.

2000-03-03  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-diag.el (list-character-sets): Make help-echo
	string by substitute-command-keys.
	(list-character-sets): Likewise.
	(sort-listed-character-sets): Call help-setup-xref.

2000-03-02  Gerd Moellmann  <gerd@gnu.org>

	* time.el (display-time-mail-file): Add `none' to the list of
	choices.

2000-03-01  Dave Love  <fx@gnu.org>

	* help.el (help-xref-go-back): Don't try to set position.

	* international/mule-diag.el (list-character-sets): Call
	help-setup-xref.  Add help-echo to xrefs.
	(list-character-sets-1): Add help-echo to xrefs.

2000-03-02  Gerd Moellmann  <gerd@gnu.org>

	* frame.el (blink-cursor-mode): Switch cursor on when turning
	the mode off.

	* add-log.el (add-log-current-defun): Add support for
	Autoconf mode.

	* mail/rmail.el (rmail-quit-hook): New variable.

2000-03-01  Dave Love  <fx@gnu.org>

	* emacs-lisp/lisp-mode.el (lisp-mode-syntax-table): Fix syntax of |.

	* help.el (help-xref-button): Add help-echo arg.
	(describe-function-1, describe-variable, help-make-xrefs): Use it.

	* faces.el (list-faces-display): Supply help-echo with
	help-make-xrefs.

	* facemenu.el (list-text-properties-at): Set help-xref-stack to
	nil.

2000-03-01  Gerd Moellmann  <gerd@gnu.org>

	* image.el (defimage): Look for image files in load-path.

	* frame.el (busy-cursor-delay-seconds): Change type to
	`number'.

2000-03-01  David Ponce  <david.ponce@wanadoo.fr>

	* recentf.el (recentf): Added version tag to the defgroup of
	recentf.

2000-03-01  David Ponce  <david.ponce@wanadoo.fr>

	* recentf.el (recentf-cleanup): Changed to remove excluded file
	too.
	(recentf-edit-list-action): `recentf-edit-list' checkbox widget
	action to select/unselect a file.
	(recentf-edit-list): Code cleanup and improvement.
	(recentf-open-more-files-action): `recentf-open-more-files' button
	widget action to open a file.
	(recentf-open-more-files): No more use standard completion but
	widgets.
	(recentf-more-collection): Deleted.
	(recentf-more-history): Deleted.
	(recentf-setup-more-completion): Deleted.

2000-03-01  David Ponce  <david.ponce@wanadoo.fr>

	* recentf.el (recentf-mode): No more needs that Emacs is running
	under a window-system.

1999-03-01  David Ponce  <david.ponce@wanadoo.fr>

	* recentf.el (recentf-edit-list): New command to edit the recent
	list which allow the user to remove files.
	(recentf-edit-selected-items): New global variable, used by
	`recentf-edit-list' to hold the list of files to be removed from
	the recent list.
	(recentf-make-menu-items): Updated to display a "Edit list..."
	menu item.  Minor code cleanup.

1999-03-01  David Ponce  <david.ponce@wanadoo.fr>

	* recentf.el (recentf-open-more-files): New command to open files
	that are not displayed in the menu.
	(recentf-more-collection): New global variable holding the set of
	permissible completions used by `recentf-open-more-files'.
	(recentf-more-history): New global variable holding the history list
	used by `recentf-open-more-files' completion.
	(recentf-setup-more-completion): New function to setup completion for
	`recentf-open-more-files'.
	(recentf-make-menu-items): Updated to display a "More..." menu item.

1999-03-01  David Ponce  <david.ponce@wanadoo.fr>

	* recentf.el (recentf-menu-action): Doc fixed.

1999-03-01  David Ponce  <david.ponce@wanadoo.fr>

	* recentf.el (recentf-menu-filter): Doc updated.
	(recentf-update-menu-hook): Allow menu filters to force menu update.
	(recentf-make-menu-items): New menu filter handling.
	(recentf-make-menu-item): New helper function.
	(recentf-menu-elements): New menu handling function.
	(recentf-sort-ascending): Updated to new menu filter handling.
	(recentf-sort-descending): Updated to new menu filter handling.
	(recentf-sort-basenames-ascending): New menu filter function.
	(recentf-sort-basenames-descending): New menu filter function.
	(recentf-show-basenames): New menu filter function.
	(recentf-show-basenames-ascending): New menu filter function.
	(recentf-show-basenames-descending): New menu filter function.

2000-02-29  Edward M. Reingold  <reingold@emr.cs.uiuc.edu>

	* diary-lib.el (list-diary-entries): Don't try to go forward at
	the end of the buffer.

2000-02-29  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-diag.el (list-character-sets): Completely
	rewritten.
	(sort-listed-character-sets): New function.
	(list-character-sets-1): Completely rewritten.
	(list-character-sets-2): New function.
	(non-iso-charset-alist): New variable.
	(decode-codepage-char): New function.
	(charset-history): New variable.
	(read-charset) (list-block-of-chars)
	(list-iso-charset-chars)
	(list-non-iso-charset-chars)
	(list-charset-chars): New functions.
	(mule-diag): Call list-character-sets-2, not
	list-character-sets-2.
	(dump-charsets): Likewise.

2000-02-29  Gerd Moellmann  <gerd@gnu.org>

	* dired-x.el (dired-filename-at-point): Add `@' to valid
	file name characters.
	(dired-filename-at-point): Handle ange-ftp file names.

	* frame.el (frame-notice-user-settings): Use assq-delete-all
	instead of assoc-delete-all.
	(frame-notice-user-settings): Ditto.

	* subr.el (assq-delete-all): Renamed from assoc-delete-all.
	Don't copy alist.

2000-02-28  Eli Barzilay  <eli@cs.cornell.edu>

	* calculator.el (calculator-use-menu): New option.
	(calculator-initial-bindings): Changed some bindings to work as
	macros.
	(calculator-forced-input): Removed.
	(calculator-restart-other-mode): New variable.
	(calculator-mode-map): Set up menu.

2000-02-28  Jari Aalto  <jari.aalto@poboxes.com>

	* font-lock.el (java-keywords): Added missing java 1.2.2 Javadoc
	tags.

2000-02-28  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper-cmd.el (viper-envelop-ESC-key): added the option to
	translate all ESC key sequences.
	(viper-goto-mark-subr): restore markers for files for which
	they were saved.
	* viper-init.el (viper-translate-all-ESC-keysequences): new variable.
	* viper-util.el (viper-set-replace-overlay-glyphs,
	viper-set-replace-overlay): always check if the replacement
	overlay is live.
	* viper.el (viper-vi-state-mode-list): added major modes.
	* ediff-wind.el: minor comment changes.
	* ediff.el: copyright notice date fix.

2000-02-27  Jason Rumney  <jasonr@gnu.org>

	* faces.el (face-font-family-alternatives): Add arial to helv.
	(mode-line, header-line, tool-bar): Same default as x for w32.
	(fixed-pitch, variable-pitch): Remove wildcard as it prevents
	face-font-family-alternatives from working.
	* term/w32-win.el (mouse-set-font): Do not build fontset from
	chosen font.

2000-02-25  Sam Steingold  <sds@goems.com>

	* emacs-lisp/cl-indent.el (toplevel): Indent `pprint-logical-block'
	properly.

2000-02-25  Richard M. Stallman  <rms@gnu.org>

	* mail/rmail.el (rmail-resend): Verify buffer is really Rmail.

2000-02-25  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/helper.el (Helper-describe-mode): Make buffer
	writable.

	* frame.el (busy-cursor-delay-seconds): New option.

2000-02-24  Gerd Moellmann  <gerd@gnu.org>

	* frame.el (show-cursor-in-non-selected-windows): New option.

2000-02-24  Edward M. Reingold  <reingold@emr.cs.uiuc.edu>

	* diary-lib.el (include-other-diary-files): Undo the selective
	display in any included file and don't kill it.

2000-02-24  Eli Zaretskii  <eliz@is.elta.co.il>

	* dired.el (dired-mode-map): Don't remove "Edit" from the menu
	bar.  Menu items converted to (menu-item format, help strings
	added.
	[downcase, upcase]: Don't enable on MS-DOS.
	[symlink, symlinks]: Don't show if make-symbolic-link is not
	bound.
	[chown, chgrp]: Don't show on MS-DOS and MS-Windows.

2000-02-23  Dave Love  <fx@gnu.org>

	* simple.el (zap-to-char, kill-line, kill-region, kill-word)
	(backward-kill-word): Revert addition of * to interactive spec --
	it's a feature.

	* paragraphs.el: (kill-paragraph, backward-kill-paragraph)
	(backward-kill-sentence, kill-sentence): Likewise.

	* gud.el (gud-jdb-build-class-source-alist): Prepend space to
	scratch buffer name.
	(gud-format-command): Use int-to-string in ?l case.  Simplify
	slightly.

	* term/w32-win.el (internal-face-interactive): Update prompt for
	new read-face-name.

	* mail/footnote.el (footnote): Add :version to defgroup.
	(footnote-section-tag-regexp): Customize.
	(footnote-start-tag, footnote-end-tag): New option.
	(footnote-latin-regexp): New variable.
	(Footnote-latin): New function.
	(footnote-style-alist): Add element for latin style.
	(footnote-style): Moved.
	(Footnote-goto-footnote): Use eq to test arg.

	* mouse.el (mouse-drag-mode-line-1): Remove `growth =' message.

	* emacs-lisp/byte-opt.el: Change old backquote syntax.
	(byte-compile-trueconstp): Include keywords.
	(byte-optimize-quote, byte-optimize-lapcode): Use
	byte-compile-const-symbol-p.
	(byte-optimize-char-before): New optimization.

	* emacs-lisp/bytecomp.el: Change old backquote syntax.
	(byte-compile-const-symbol-p): New function.
	(byte-compile-constp, byte-compile-out-toplevel)
	(byte-compile-form, byte-compile-form, byte-compile-variable-ref):
	Use it.

	* subr.el (define-key-after): Default AFTER to t.  Doc fix.

2000-02-23  Kenichi Handa  <handa@etl.go.jp>

	* international/encoded-kb.el: Be sure to update minor-mode-alist
	and minor-mode-map-alist.
	(encoded-kbd-self-insert-iso2022-8bit): Handle ISO's single shift
	codes SS2 and SS3 correctly.
	(encoded-kbd-self-insert-ccl): New function.
	(encoded-kbd-setup-keymap): New function.
	(encoded-kbd-mode): Handle CCL based coding system.  Setup keymap
	by calling encoded-kbd-setup-keymap.

	* emacs-lisp/lisp-mode.el: Don't change syntax of multibyte
	characters.
	(lisp-mode-variables): Set multibyte-syntax-as-symbol to t
	locally.

2000-02-22  Dave Love  <fx@gnu.org>

	* emacs-lisp/lisp-mode.el (emacs-lisp-mode-syntax-table)
	(lisp-mode-map, lisp-interaction-mode-map): Define all inside
	defvar.
	(lisp-mode-syntax-table): Set up for #|...|# comments.
	(lisp-imenu-generic-expression): Purecopy strings.  Use syntax
	classes.  Match `defface'.
	(emacs-lisp-mode-hook): Add checkdoc-minor-mode to options.
	(eval-defun-1): Fix for defcustom.
	(lisp-indent-region): Doc fix.

	* subr.el (when, unless, split-string): Doc fix.
	(read-passwd): Move call of clear-this-command-keys to the right
	place.
	(replace-regexps-in-string): New function.

2000-02-22  Gerd Moellmann  <gerd@gnu.org>

	* help.el (describe-variable): Set syntax table to
	emacs-lisp-mode-syntax-table when moving forward over the
	symbol's name.

2000-02-22  Dave Love  <fx@gnu.org>

	* xt-mouse.el: Doc fixes.
	(xterm-mouse-position-function): New function, replacing advice of
	mouse-position.
	(xterm-mouse-mode): Use it.  Don't turn on under a window system.

	* emacs-lisp/cl-indent.el: Remove bogus spec for define-condition.

2000-02-21  Gerd Moellmann  <gerd@gnu.org>

	* format.el (format-annotate-single-property-change): Handle
	properties.with dotted-list values.
	(format-proper-list-p): New function.

	* enriched.el (enriched-face-ans): Handle '(foreground-color
	. COLOR) and (background-color . COLOR).

2000-02-20  Dave Love  <fx@gnu.org>

	* textmodes/flyspell.el (flyspell-mouse-map): Change definition
	and assignments to it.
	(flyspell-mode-on): Define flyspell-local-mouse-map, inheriting
	current local map.
	(make-flyspell-overlay): Use it.
	(flyspell-correct-word/mouse-keymap): Change XEmacs test.

	* emacs-lisp/lisp-mnt.el: Don't require emacsbug at top level.
	(lm-get-header-re): Defun, not defsubst.
	(lm-get-package-name): Defun, not defsubst.  Simplify.
	(lm-version): Doc fix.  Simplify.
	(lm-header, lm-header-multiline, lm-header-multiline, lm-summary)
	(lm-crack-address, lm-last-modified-date, lm-commentary)
	(lm-verify, lm-synopsis): Simplify.
	(lm-report-bug): Require emacsbug.  Use compose-mail.

2000-02-20  Gerd Moellmann  <gerd@gnu.org>

	* dired.el (dired-mode): Call propertized-buffer-identification
	to set mode-line-buffer-identification to something having
	the right text properties.

	* bindings.el (propertized-buffer-identification): New function.

2000-02-20  Dave Love  <fx@gnu.org>

	* frame.el (display-mouse-p): Use variable xterm-mouse-mode and
	check for t-mouse too.

	* cus-start.el: Make echo-keystrokes `number'.

2000-02-20  Eli Zaretskii  <eliz@is.elta.co.il>

	* menu-bar.el (menu-bar-goto-menu) [next-tag, next-tag-otherw]:
	Don't call ring-empty-p unless tags-location-ring is bound.
	From Noah Friedman <friedman@splode.com>.

2000-02-18  Thien-Thi Nguyen  <ttn@gnu.org>

	* progmodes/hideshow.el (hs-flag-region): No longer use
	`intangible' overlay property.

	(hs-toggle-hiding): New command.
	(hs-mouse-toggle-hiding): Use `hs-toggle-hiding'.

	(hs-minor-mode): Move call to `hs-grok-mode-type' early on.
	Fix omission bug: Run `hs-minor-mode-hook' for both activation
	and deactivation.

2000-02-18  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/cl-macs.el (caar, cadr, cdar, cddr): Add defsetfs.

2000-02-17  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/cl-indent.el (lisp-indent-259): Indentation fix.

	* progmodes/pascal.el (pascal-mode-syntax-table): Change syntax
	of `*' to handle `(* ... *)' comments.

2000-02-17  Eli Zaretskii  <eliz@is.elta.co.il>

	* faces.el (list-faces-display): Use display-mouse-p instead of
	window-system.

	* menu-bar.el (global-map): Menu-bar items converted to the new
	format (menu-item..., rearranged for better CUA compliance, and
	their names changed for better clarity.  Help strings added.

	* international/mule-cmds.el (mule-menu-keymap)
	(describe-language-environment-map, set-coding-system-map)
	(setup-language-environment-map): Convert to new (menu-item...
	form, add help strings.  Change names of menu items for better
	clarity.  "Mule" menu-bar item removed (it's now in the "Options"
	submenu).

2000-02-17  Gerd Moellmann  <gerd@gnu.org>

	* dired-aux.el (dired-do-copy): Remove spurious character.`n'
	within the code.

2000-02-16  Dave Love  <fx@gnu.org>

	* faces.el: Don't require custom.  Add more specific :groups to
	various deffaces.
	(set-face-attribute): Purecopy args.
	(read-face-name): Default to name at point and use it in prompt.
	Remove colon from arg in all callers.
	(list-faces-display): Hyperlink to face descriptions and customize
	buffers.

2000-02-16  Per Abrahamsen  <abraham@dina.kvl.dk>

	* wid-edit.el (widget-match-inline): An atom never matches a
	list.

2000-02-15  Dirk Herrmann  <D.Herrmann@tu-bs.de>

	* textmodes/bibtex.el (bibtex-mode): Replaced manual splitting of path
	at ':' characters by call to split-string.

2000-02-15  Dirk Herrmann  <D.Herrmann@tu-bs.de>

	* textmodes/bibtex.el: Added RCS version identification.

2000-02-15  Dirk Herrmann  <D.Herrmann@tu-bs.de>

	* textmodes/bibtex.el: Some temporary comments removed.
	(bibtex-field-name, bibtex-entry-type): Made the relationship
	explicit.
	(bibtex-field-const): Allow capital letters.
	(bibtex-start-of-string): Deleted because unused.

	* textmodes/bibtex.el: Unified some nomenclature.  We no longer
	use the term 'reference' to describe a bibtex entry as a whole.
	Further, reference keys are no longer called 'labels'.
	(bibtex-keys): Renamed to bibtex-reference-keys.
	(bibtex-reformat-previous-labels): Renamed to
	bibtex-reformat-previous-reference-keys.
	(bibtex-reference-type): Renamed to bibtex-entry-type.
	(bibtex-reference-head): Renamed to bibtex-entry-head.
	(bibtex-reference-maybe-empty-head): Renamed to
	bibtex-entry-maybe-empty-head.
	(bibtex-key-in-reference): Renamed to bibtex-key-in-entry.
	(bibtex-search-reference): Renamed to bibtex-search-entry.
	(bibtex-enclosing-reference-maybe-empty-head): Renamed to
	bibtex-enclosing-entry-maybe-empty-head.
	(bibtex-entry-field-alist, bibtex-entry-head,
	bibtex-font-lock-keywords, bibtex-skip-to-valid-entry,
	bibtex-map-entries, bibtex-search-entry,
	bibtex-enclosing-entry-maybe-empty-head, bibtex-format-entry,
	bibtex-generate-autokey, bibtex-parse-keys, bibtex-pop, bibtex-mode,
	bibtex-submit-bug-report, bibtex-entry, bibtex-print-help-message,
	bibtex-make-field, bibtex-end-of-entry, bibtex-sort-buffer,
	bibtex-find-entry-location, bibtex-validate, bibtex-find-text,
	bibtex-kill-entry, bibtex-clean-entry, bibtex-reformat,
	bibtex-complete-key, bibtex-String) : Use the new nomenclature.

2000-02-15  Dirk Herrmann  <D.Herrmann@tu-bs.de>

	* textmodes/bibtex.el (bibtex-strings, bibtex-keys): Removed redundant
	comment.
	(bibtex-format-field-delimiters): New function, functionality
	extracted from bibtex-format-entry.
	(bibtex-autokey-get-yearfield-digits): New function, functionality
	extracted from bibtex-autokey-get-yearfield.

	* textmodes/bibtex.el: Completely reimplemented parsing of bibtex
	entries in order to avoid stack overflow in the regexp matcher if
	field contents become large.
	(bibtex-cfield, bibtex-name-in-cfield, bibtex-text-in-cfield,
	bibtex-field-string-part-not-braced,
	bibtex-field-string-part-no-inner-braces,
	bibtex-field-string-part-1-inner-brace,
	bibtex-field-string-part-2-inner-braces,
	bibtex-field-string-part-3-inner-braces, bibtex-field-string-braced,
	bibtex-field-string-quoted, bibtex-field-string,
	bibtex-field-string-or-const, bibtex-field-text, bibtex-field,
	bibtex-name-in-field, bibtex-text-in-field, bibtex-reference-infix,
	bibtex-string, bibtex-key-in-string, bibtex-text-in-string): Deleted
	as parsing is now performed by the following functions.
	(bibtex-parse-nested-braces, bibtex-parse-field-string-braced,
	bibtex-parse-quoted-string, bibtex-parse-field-string-quoted,
	bibtex-parse-field-string, bibtex-search-forward-field-string,
	bibtex-parse-association, bibtex-field-name-for-parsing,
	bibtex-parse-field-name, bibtex-parse-field-text, bibtex-parse-field,
	bibtex-search-forward-field, bibtex-search-backward-field,
	bibtex-start-of-field, bibtex-end-of-field,
	bibtex-start-of-name-in-field, bibtex-end-of-name-in-field,
	bibtex-start-of-text-in-field, bibtex-end-of-text-in-field,
	bibtex-parse-string-prefix, bibtex-parse-string-postfix,
	bibtex-parse-string, bibtex-search-forward-string,
	bibtex-search-backward-string, bibtex-start-of-string,
	bibtex-end-of-string, bibtex-start-of-reference-key-in-string,
	bibtex-end-of-reference-key-in-string, bibtex-start-of-text-in-string,
	bibtex-end-of-text-in-string): New functions for the parsing of bibtex
	entries.  Instead of reporting the results of the parsing by
	match-beginning or match-end, these functions return data structures
	that hold the corresponding positions.
	(bibtex-enclosing-field): Changed to also report field boundaries by
	return values rather than by match-beginning or match-end.  The
	following functions have been adapted to use the new parsing
	functions.
	(bibtex-skip-to-valid-entry, bibtex-search-reference,
	bibtex-enclosing-field, bibtex-format-entry,
	bibtex-autokey-get-namefield, bibtex-autokey-get-titlestring,
	bibtex-parse-keys, bibtex-complete, bibtex-pop, bibtex-mode,
	bibtex-print-help-message, bibtex-end-of-entry,
	bibtex-ispell-abstract, bibtex-validate, bibtex-next-field,
	bibtex-find-text, bibtex-remove-OPT-or-ALT, bibtex-remove-delimiters,
	bibtex-kill-field, bibtex-empty-field, bibtex-fill-entry): Use the new
	method for parsing.
	(bibtex-assoc-of-regexp, bibtex-skip-to-valid-entry,
	bibtex-map-entries, bibtex-flash-head,
	bibtex-enclosing-reference-maybe-empty-head, bibtex-format-entry,
	bibtex-autokey-change, bibtex-autokey-get-namefield,
	bibtex-autokey-get-names, bibtex-autokey-get-titlestring,
	bibtex-autokey-get-titles, bibtex-parse-keys, bibtex-pop, bibtex-mode,
	bibtex-end-of-entry, bibtex-ispell-abstract, bibtex-sort-buffer,
	bibtex-validate, bibtex-remove-OPT-or-ALT, bibtex-remove-delimiters,
	bibtex-kill-field, bibtex-kill-entry): Use let* instead of let in
	order to make the new binding of case-fold-search immediately
	visible.

2000-02-15  Dirk Herrmann  <D.Herrmann@tu-bs.de>

	* textmodes/bibtex.el: Copyright notice is up to date.
	Added constant 'bibtex-maintainer-salutation.

	* textmodes/bibtex.el (bibtex-mode): use with-temp-buffer rather
	than make-temp-name, use match-string-no-properties and eliminate
	a quadratic behavior when building bibtex-strings.

	* bibtex.el (bibtex-reference-key): Accept string entries whose
	reference key contains upper case letters.

2000-02-15  Dirk Herrmann  <D.Herrmann@tu-bs.de>

	* bibtex.el (bibtex-reference-head): Allow entries to start with
	a new line.

2000-02-15  Dirk Herrmann  <D.Herrmann@tu-bs.de>

	* bibtex.el: Hiding of entry bodies is not longer provided by
	bibtex.el directly.  Instead the hideshow package can be used.
	Added a special bibtex entry to hs-special-modes-alist.
	(bibtex-hs-forward-sexp): Added for hideshow.el.

2000-02-15  Dirk Herrmann  <D.Herrmann@tu-bs.de>

	* textmodes/bibtex.el (bibtex-mode): Replaced manual splitting of path
	at ':' characters by call to split-string.

2000-02-15  Dirk Herrmann  <D.Herrmann@tu-bs.de>

	* textmodes/bibtex.el: Added RCS version identification.

2000-02-15  Dirk Herrmann  <D.Herrmann@tu-bs.de>

	* textmodes/bibtex.el: Some temporary comments removed.
	(bibtex-field-name, bibtex-entry-type): Made the relationship
	explicit.
	(bibtex-field-const): Allow capital letters.
	(bibtex-start-of-string): Deleted because unused.

	* textmodes/bibtex.el: Unified some nomenclature.  We no longer
	use the term 'reference' to describe a bibtex entry as a whole.
	Further, reference keys are no longer called 'labels'.
	(bibtex-keys): Renamed to bibtex-reference-keys.
	(bibtex-reformat-previous-labels): Renamed to
	bibtex-reformat-previous-reference-keys.
	(bibtex-reference-type): Renamed to bibtex-entry-type.
	(bibtex-reference-head): Renamed to bibtex-entry-head.
	(bibtex-reference-maybe-empty-head): Renamed to
	bibtex-entry-maybe-empty-head.
	(bibtex-key-in-reference): Renamed to bibtex-key-in-entry.
	(bibtex-search-reference): Renamed to bibtex-search-entry.
	(bibtex-enclosing-reference-maybe-empty-head): Renamed to
	bibtex-enclosing-entry-maybe-empty-head.
	(bibtex-entry-field-alist, bibtex-entry-head,
	bibtex-font-lock-keywords, bibtex-skip-to-valid-entry,
	bibtex-map-entries, bibtex-search-entry,
	bibtex-enclosing-entry-maybe-empty-head, bibtex-format-entry,
	bibtex-generate-autokey, bibtex-parse-keys, bibtex-pop, bibtex-mode,
	bibtex-submit-bug-report, bibtex-entry, bibtex-print-help-message,
	bibtex-make-field, bibtex-end-of-entry, bibtex-sort-buffer,
	bibtex-find-entry-location, bibtex-validate, bibtex-find-text,
	bibtex-kill-entry, bibtex-clean-entry, bibtex-reformat,
	bibtex-complete-key, bibtex-String) : Use the new nomenclature.

2000-02-15  Dirk Herrmann  <D.Herrmann@tu-bs.de>

	* textmodes/bibtex.el (bibtex-strings, bibtex-keys): Removed redundant
	comment.
	(bibtex-format-field-delimiters): New function, functionality
	extracted from bibtex-format-entry.
	(bibtex-autokey-get-yearfield-digits): New function, functionality
	extracted from bibtex-autokey-get-yearfield.

	* textmodes/bibtex.el: Completely reimplemented parsing of bibtex
	entries in order to avoid stack overflow in the regexp matcher if
	field contents become large.
	(bibtex-cfield, bibtex-name-in-cfield, bibtex-text-in-cfield,
	bibtex-field-string-part-not-braced,
	bibtex-field-string-part-no-inner-braces,
	bibtex-field-string-part-1-inner-brace,
	bibtex-field-string-part-2-inner-braces,
	bibtex-field-string-part-3-inner-braces, bibtex-field-string-braced,
	bibtex-field-string-quoted, bibtex-field-string,
	bibtex-field-string-or-const, bibtex-field-text, bibtex-field,
	bibtex-name-in-field, bibtex-text-in-field, bibtex-reference-infix,
	bibtex-string, bibtex-key-in-string, bibtex-text-in-string): Deleted
	as parsing is now performed by the following functions.
	(bibtex-parse-nested-braces, bibtex-parse-field-string-braced,
	bibtex-parse-quoted-string, bibtex-parse-field-string-quoted,
	bibtex-parse-field-string, bibtex-search-forward-field-string,
	bibtex-parse-association, bibtex-field-name-for-parsing,
	bibtex-parse-field-name, bibtex-parse-field-text, bibtex-parse-field,
	bibtex-search-forward-field, bibtex-search-backward-field,
	bibtex-start-of-field, bibtex-end-of-field,
	bibtex-start-of-name-in-field, bibtex-end-of-name-in-field,
	bibtex-start-of-text-in-field, bibtex-end-of-text-in-field,
	bibtex-parse-string-prefix, bibtex-parse-string-postfix,
	bibtex-parse-string, bibtex-search-forward-string,
	bibtex-search-backward-string, bibtex-start-of-string,
	bibtex-end-of-string, bibtex-start-of-reference-key-in-string,
	bibtex-end-of-reference-key-in-string, bibtex-start-of-text-in-string,
	bibtex-end-of-text-in-string): New functions for the parsing of bibtex
	entries.  Instead of reporting the results of the parsing by
	match-beginning or match-end, these functions return data structures
	that hold the corresponding positions.
	(bibtex-enclosing-field): Changed to also report field boundaries by
	return values rather than by match-beginning or match-end.  The
	following functions have been adapted to use the new parsing
	functions.
	(bibtex-skip-to-valid-entry, bibtex-search-reference,
	bibtex-enclosing-field, bibtex-format-entry,
	bibtex-autokey-get-namefield, bibtex-autokey-get-titlestring,
	bibtex-parse-keys, bibtex-complete, bibtex-pop, bibtex-mode,
	bibtex-print-help-message, bibtex-end-of-entry,
	bibtex-ispell-abstract, bibtex-validate, bibtex-next-field,
	bibtex-find-text, bibtex-remove-OPT-or-ALT, bibtex-remove-delimiters,
	bibtex-kill-field, bibtex-empty-field, bibtex-fill-entry): Use the new
	method for parsing.
	(bibtex-assoc-of-regexp, bibtex-skip-to-valid-entry,
	bibtex-map-entries, bibtex-flash-head,
	bibtex-enclosing-reference-maybe-empty-head, bibtex-format-entry,
	bibtex-autokey-change, bibtex-autokey-get-namefield,
	bibtex-autokey-get-names, bibtex-autokey-get-titlestring,
	bibtex-autokey-get-titles, bibtex-parse-keys, bibtex-pop, bibtex-mode,
	bibtex-end-of-entry, bibtex-ispell-abstract, bibtex-sort-buffer,
	bibtex-validate, bibtex-remove-OPT-or-ALT, bibtex-remove-delimiters,
	bibtex-kill-field, bibtex-kill-entry): Use let* instead of let in
	order to make the new binding of case-fold-search immediately
	visible.

2000-02-15  Dirk Herrmann  <D.Herrmann@tu-bs.de>

	* textmodes/bibtex.el: Copyright notice is up to date.
	Added constant 'bibtex-maintainer-salutation.

	* textmodes/bibtex.el (bibtex-mode): use with-temp-buffer rather
	than make-temp-name, use match-string-no-properties and eliminate
	a quadratic behavior when building bibtex-strings.

	* bibtex.el (bibtex-reference-key): Accept string entries whose
	reference key contains upper case letters.

2000-02-15  Dirk Herrmann  <D.Herrmann@tu-bs.de>

	* bibtex.el (bibtex-reference-head): Allow entries to start with
	a new line.

2000-02-15  Dirk Herrmann  <D.Herrmann@tu-bs.de>

	* bibtex.el: Hiding of entry bodies is not longer provided by
	bibtex.el directly.  Instead the hideshow package can be used.
	Added a special bibtex entry to hs-special-modes-alist.
	(bibtex-hs-forward-sexp): Added for hideshow.el.

2000-02-15  Dirk Herrmann  <D.Herrmann@tu-bs.de>

	* bibtex.el (bibtex-entry-field-alist): Added booktitle field to
	proceedings entry type (for cross referencing). Thanks to Wagner
	Toledo Correa for the suggestion.

	* bibtex.el: Added `reftex-view-crossref-from-bibtex' to menu.

2000-02-14  Kenichi Handa  <handa@etl.go.jp>

	* international/characters.el: Setup case table for Vietnamese.

2000-02-12  Gerd Moellmann  <gerd@gnu.org>

	* uniquify.el (toplevel): Require CL at compile time.
	(uniquify-push): Removed.

	* shadowfile.el (shadow-when): Removed.

	* tempo.el (tempo-dolist, tempo-mapc): Removed.
	(tempo-process-and-insert-string): Use dolist instead of
	tempo-dolist.

	* textmodes/sgml-mode.el (sgml-mode-common): Remove `$' from
	regexp for paragraph-start.

	* mail/mail-utils.el (rmail-dont-reply-to): Remove leading
	commas as well.

2000-02-10  Dave Love  <fx@gnu.org>

	* wid-edit.el: (widgets) [defgroup]: Remove url link.
	(widget-color-choice-list, widget-color-history, widget-mouse-help):
	Deleted.
	(widget-specify-field, widget-specify-button): Don't use
	widget-mouse-help as help-echo property.
	(default): Use #'ignore for :validate and :mouse-down-action.
	(checkbox): Add help-echo.
	(widget-sexp-validate): Rewritten to clarify error messages.
	(character): Use char-valid-p in :match function.
	(widget-color-complete): Use facemenu-color-alist.
	(widget-color-action): Use facemenu-read-color.

	* emacs-lisp/cl-macs.el: Don't bother testing for defalias.  Don't
	set up `caar' &c that we now have.

2000-02-09  Ray Blaak  <blaak@gnu.org>

	* delphi.el: Make resourcestring a declaration region, like const
	and var.

2000-02-09  Dave Love  <fx@gnu.org>

	* bindings.el (mode-line-input-method-map): New variable.
	(mode-line-mule-info): Use it; fix last change.
	(mode-line-mode-menu): Move definition.
	(mode-line-mouse-sensitive-p): Deleted.
	(mode-line-mode-name): Don't use mode-line-mouse-sensitive-p.
	(make-mode-line-mouse-sensitive): Deleted.  Body moved to top
	level.

	* startup.el (command-line-1): Don't call
	make-mode-line-mouse-sensitive.

2000-02-07  Francesco Potorti`  <F.Potorti@cnuce.cnr.it>

	* mail/rmail.el (rmail-retry-failure): Use
	rmail-beginning-of-message before rmail-toggle-header, because the
	former toggles headers.

2000-02-06  Stefan Monnier  <monnier@cs.yale.edu>

	* diff-mode.el (diff-kill-junk): New interactive function.
	(diff-reverse-direction): Use delete-and-extract-region.
	(diff-post-command-hook): Restrict the area so that the hook also works
	outside of any diff hunk.  This is necessary for the minor-mode.
	(diff-mode): Use toggle-read-only and minor-mode-overriding-map-alist.
	(diff-minor-mode): Setup the hooks for header-hunk rewriting.

	* font-lock.el (font-lock-keywords): Fix doc for multiline matches.
	(font-lock-add-keywords): Make it work even if font-lock-mode is nil,
	so that it can be used more easily in <foo>-mode-hook.  Also make sure
	to avoid duplicate entries.
	(font-lock-update-removed-keyword-alist): Renamed `major-mode'->`mode'.
	(font-lock-remove-keywords): Just as was done for `add', allow it to
	work even if font-lock-mode is nil.  Also make sure we don't modify
	any pre-existing list by forcing a copy-sequence.  Finally rename
	`major-mode' to `mode'.
	(font-lock-fontify-syntactic-anchored-keywords)
	(font-lock-fontify-anchored-keywords)
	(font-lock-fontify-keywords-region): Use line-end-position.
	Don't make `font-lock-multiline' local (it's now done in
	font-lock-set-defaults).
	(font-lock-set-defaults): Make `font-lock-multiline' local.  Also
	move the `font-lock-fontified' creation to inside the `unless'.

2000-02-06  Andrew Innes  <andrewi@gnu.org>

	* term/w32-win.el (x-handle-args): Comment out call to message,
	which occurs before window system is initialized.

	* makefile.nt: Add support for recompiling lisp code.

2000-02-04  Dave Love  <fx@gnu.org>

	* bindings.el (mode-line-mule-info): Fix/extend last change.

	* completion.el: Replace completion-dolist with dolist.

	* tar-mode.el: Replace tar-dolist, tar-dotimes with dolist,
	dotimes.

2000-02-04  Carsten Dominik  <dominik@strw.leidenuniv.nl>

	* textmodes/reftex.el (reftex-compile-variables): regexp-quote the
	environment names before they go into the section regexp.

	* textmodes/reftex-global.el (reftex-change-label): add `A-Z' to
	char class in regexp.

	* textmodes/reftex-parse.el (reftex-with-special-syntax): Bind
	`case-fold-search' to nil.

	* progmodes/idlwave.el (idlwave-template): Respect
	`idlwave-abbrev-change-case'.
	(idlwave-rw-case, idlwave-elif, idlwave-case, idlwave-for,
	idlwave-if, idlwave-procedure, idlwave-function, idlwave-repeat,
	idlwave-while): respect `idlwave-reserved-word-upcase'.
	(idlwave-rw-case): New function.
	(idlwave-statement-match): Fixed problem with assignment regexp.
	(idlwave-font-lock-keywords): Improved regexp for keyword
	parameters.
	(idlwave-surround): New argument LENGTH to support padding of
	operators longer than 1 char.

	* progmodes/idlw-shell.el (idlwave-shell-print): Fixed bug with
	idlwave-shell-expression-overlay.  Implemented printing of
	expressions on higher levels of the calling stack.
	(idlwave-shell-display-level-in-calling-stack): Restore stack
	level.
	(idlwave-retrieve-expression-from-level): New function.
	(idlwave-shell-last-calling-stack): Variable removed.
	(idlwave-shell-reset): Argument action reversed (`visible' to
	`hidden').  Also remove stop-line overlay.
	(idlwave-shell-calling-stack-routine): New variable.
	(idlwave-shell-parse-stack-and-display): Messages now display
	negative level numbers.
	(idlwave-shell-mode): Set `modeline-format'.
	(idlwave-shell-display-line): Set `idlwave-shell-mode-line-info'.
	(idlwave-shell-make-new-bp-overlay): Fixed glyph display for Emacs
	21.
	(idlwave-shell-print-expression-function): New option.

	* progmodes/idlw-toolbar.el (idlwave-toolbar-add-everywhere,
	idlwave-toolbar-remove-everywhere): Keybindings prefix is now
	`tool-bar' instead of `toolbar'.

2000-02-02  Dave Love  <fx@gnu.org>

	* emacs-lisp/cl.el: Use bytecomp-load-hook, not
	emacs-lisp-mode-hook.  Don't check for defalias being defined.

	* emacs-lisp/cl-extra.el (cl-builtin-gethash, cl-builtin-remhash)
	(cl-builtin-maphash, cl-builtin-clrhash): Remove definitions.  Use
	the new builtins directly.

	* whitespace.el (whitespace): Add :version to defgroup.

	* tooltip.el (tooltip-gud-tips-p, tooltip-gud-toggle-dereference):
	Doc fix.

	* thingatpt.el (sexp-at-point, symbol-at-point)
	(number-at-point, list-at-point): Add autoload cookie.

	* recentf.el (recentf): Add :version to defgroup.

	* quickurl.el (quickurl): Add :version to defgroup.

	* elide-head.el (elide-head): Use point-marker more.

	* bs.el (bs): Add :version to defgroup.

	* autorevert.el (global-auto-revert-mode): Add autoload cookie.

	* progmodes/delphi.el (delphi): Add :version to defgroup.

2000-02-02  Gerd Moellmann  <gerd@gnu.org>

	* ange-ftp.el (ange-ftp-write-region): Handle case that
	succeeding process operation sets a different coding system.

	* calculator.el: New file.

2000-02-02  Eli Zaretskii  <eliz@is.elta.co.il>

	* frame.el (frames-on-display-list, framep-on-display): New
	functions.
	(display-mouse-p, display-popup-menus-p, display-graphic-p)
	(display-selections-p, display-screens, display-pixel-width)
	(display-pixel-height, display-mm-width, display-mm-height)
	(display-backing-store, display-save-under, display-planes)
	(display-color-cells, display-visual-class): New functions.

	* term/tty-colors.el (tty-color-gray-shades): New function.

	* faces.el (display-color-p): Use framep-on-display.
	(display-grayscale-p): New function.

2000-01-31  Dave Love  <fx@gnu.org>

	* emacs-lisp/fontset.el (standard-fontset-spec): Purecopy it.
	(create-fontset-from-x-resource): Don't concat integers.

2000-01-31  Inge Frick  <inge@nada.kth.se>

	* view.el: Some changes in documentation.  Removed some trailing
	whitespace. Changed some parameter names to agree with
	documentation.
	(view-mode-exit): Keep entry in `view-return-to-alist' only when a
	window is not deleted.  Modifies change 1998-04-26.

2000-01-31  Gerd Moellmann  <gerd@gnu.org>

	* windmove.el: New file.

	* progmodes/ebnf2ps.el, progmodes/ebnf-bnf.el,
	progmodes/ebnf-iso.el, progmodes/ebnf-otz.el,
	progmodes/ebnf-yac.el: Update copyright and license info.

	* jit-lock.el (jit-lock-function): Widen before calculating end
	position.
	(jit-lock-stealth-chunk-start): Rewritten.

	* info.el (Info-title-face-alist): Removed.
	(Info-title-1-face, Info-title-2-face, Info-title-3-face): New
	faces.
	(Info-fontify-node): Use these faces.

2000-01-30  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/cl-specs.el (cl-lambda-list, cl-macro-list)
	(cl-macro-list1): Recognize `&allow-other-keys' instead of
	`&allow-other-keywords'.

	* mail/mh-utils.el (mh-find-progs): Add directory `etc' to
	the list of directories scanned heuristically.

	* Makefile (DONTCOMPILE): Remove term-nasty.el; doesn't seem to
	exist.

2000-01-30  Jason Rumney  <jasonr@gnu.org>

	* w32-fns.el: Define w32-tty-standard-colors.

	* startup.el (command-line): Use w32-tty-standard-colors when in
	w32 console mode.

2000-01-30  Dave Love  <fx@gnu.org>

	* jka-compr.el (jka-compr-load): Fix up load-history.

	* emacs-lisp/cl.el: Replace autoloads for dolist, dotimes.

	* emacs-lisp/cl-macs.el: Revert previous change.

2000-01-29  Dave Love  <fx@gnu.org>

	* facemenu.el: Purecopy various strings.

	* timezone.el (timezone-fix-time): Window against 69 for two-digit
	years.  Deal with three-digit years.

	* help.el (help-xref-symbol-regexp, help-xref-info-regexp): Use
	defconst, purecopy.
	(help-back-label): Purecopy it.

2000-01-18  Gerd Moellmann  <gerd@gnu.org>

	* iswitchb.el (iswitchb-use-frame-buffer-list): New configuration
	variable. If non-nil, order the buffer list according to the
	currently selected frame.
	(iswitchb-make-buflist): If iswitchb-use-frame-buffer-list is
	non-nil, pass the selected frame to function buffer-list.

2000-01-29  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* progmodes/ebnf2ps.el (ebnf-syntax): Doc fix

2000-01-28  Dave Love  <fx@gnu.org>

	* emacs-lisp/cl-macs.el: Remove dotimes, dolist.

	* emacs-lisp/cl.el: Remove stuff for dotimes, dolist, push, pop.
	Don't use lisp-indent-hook property.
	(cl-abs): Remove.

	* subr.el: Move out indent and edebug specs for when and unless.

	* emacs-lisp/lisp-mode.el: Add indent specs for dolist, dotimes,
	when, unless.

	* emacs-lisp/edebug.el: Add specs for push, pop, dotimes, dolist,
	unless, when.

2000-01-28  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/cl-macs.el (cl-parse-loop-clause): Recognize
	`collecting' as synonym for `collect'.

	* ange-ftp.el (ange-ftp-copy-file-internal): Quote new name
	for the case it contains spaces.

	* simple.el (what-cursor-position): Change formatting of
	messages.

	* frame.el (delete-other-frames): New function.
	(toplevel): Bind it to C-x 5 1.

	* sort.el (sort-numeric-base): New option.
	(sort-numeric-fields): If number starts with `0' or `0[xX[',
	interpret it as octal or hexadecimal.  Use sort-numeric-base
	as default base.

	* progmodes/glasses.el: New file.

2000-01-27  Gerd Moellmann  <gerd@gnu.org>

	* mail/mail-utils.el (rmail-dont-reply-to): Replace matched
	userids differently.

	* progmodes/ebnf2ps.el, progmodes/ebnf-bnf.el,
	progmodes/ebnf-iso.el, progmodes/ebnf-otz.el,
	progmodes/ebnf-yac.el: New files.

2000-01-26  Dave Love  <fx@gnu.org>

	* emacs-lisp/checkdoc.el (checkdoc-interactive-loop): Don't lose
	on a function with an empty body.  [From Eric Ludlam.]

2000-01-25  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-version-diff): Make sure file name is expanded.

2000-01-25  Gerd Moellmann  <gerd@gnu.org>

	* scroll-bar.el (scroll-bar-timer): Variable removed.
	(scroll-bar-toolkit-scroll): Don't use a timer.

2000-01-25  Kenichi Handa  <handa@etl.go.jp>

	* language/thai-util.el (thai-composition-function): Delete
	superfluous `a'.

2000-01-24  Dave Love  <fx@gnu.org>

	* fortran.el (fortran-mode): Use beginning-of-defun-function,
	end-of-defun-function.

	* font-lock.el (turn-on-font-lock): Don't depend on window-system
	&c.

2000-01-22  Jason Rumney  <jasonr@gnu.org>

	* term/w32-win.el (w32_create_initial_fontsets): Disabled as it
	conflicts with new face support.

2000-01-22  Richard M. Stallman  <rms@gnu.org>

	* replace.el (query-replace): Rename last arg to DELIMITED.
	(map-query-replace-regexp, query-replace-regexp-eval): Likewise.
	(query-replace-regexp): Likewise.

2000-01-20  Richard M. Stallman  <rms@gnu.org>

	* subr.el (with-syntax-table): Use make-symbol, not gensym.

	* emacs-lisp/lisp.el (beginning-of-defun-function):
	Variable renamed from beginning-of-defun.
	Do not call make-variable-buffer-local.
	(beginning-of-defun-raw): Use new variable name; doc fix.
	(beginning-of-defun): Doc fix.
	(end-of-defun-function): Variable renamed from end-of-defun.
	Do not call make-variable-buffer-local.
	(end-of-defun): Use new variable name; doc fix.

	* subr.el (dolist, dotimes): Copied from cl-macs.el
	and made to work.

	* mail/undigest.el (rmail-digest-end-regexps):
	Variable replaces rmail-digest-end-regexp.
	Allows multiple regexps for detecting the end line.
	(undigestify-rmail-message): Corresponding changes.

2000-01-19  Dave Love  <fx@gnu.org>

	* files.el (user-init-file): Don't declare here -- is primitive.

	* startup.el (command-line): Check for compiled user-init-file and
	set to uncompiled version if necessary.

2000-01-18  Gerd Moellmann  <gerd@gnu.org>

	* mail/undigest.el (rmail-digest-end-regexp): New user option.
	(undigestify-rmail-message): Use it.

	* ange-ftp.el (ange-ftp-skip-msgs): Add regexp for EPRT.

2000-01-17  Gerd Moellmann  <gerd@gnu.org>

	* tmm.el (tmm-goto-completions): Adapt to prompt being part
	of mini-buffer.

2000-01-14  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/copyright.el (copyright-update): Removed the
	requirement for a trailing space from `copyright-regexp', to
	support copyrights with owner specified on a separate line..

	* align.el: New file.

	* menu-bar.el (menu-bar-tools-menu): Add EUDC submenu.

	* net/eudc.el (toplevel): Define EUDC menu for Emacs.

2000-01-13  Dave Love  <fx@gnu.org>

	* ph.el: Removed.  (Obsoleted by EUDC.)

2000-01-13  Gerd Moellmann  <gerd@gnu.org>

	* net/eudc.el (toplevel): Remove autoloaded code installing
	menu with easymenu, because that causes build problems.

	* frame.el (frame-notice-user-settings): New variable.
	(frame-notice-user-settings): Don't modify frame parameters
	if called a second time.

2000-01-13  Richard M. Stallman  <rms@gnu.org>

	* frame.el (frame-notice-user-settings):
	Notice default-frame-parameters even for non-window frames.

2000-01-13  Gerd Moellmann  <gerd@gnu.org>

	* net/eudc-bob.el (eudc-bob-play-sound-at-point): Play sounds
	for Emacs.
	(eudc-bob-can-display-inline-images): Extend for Emacs.
	(eudc-bob-toggle-inline-display): Ditto.
	(eudc-bob-display-jpeg): Ditto.

2000-01-12  Gerd Moellmann  <gerd@gnu.org>

	* net/eudc-bob.el, net/eudc-export.el, net/eudc-hotlist.el,
	net/eudc-vars.el, net/eudc.el, net/eudcb-bbdb.el,
	net/eudcb-ldap.el, net/eudcb-ph.el, net/ldap.el: New files.

	* add-log.el (add-change-log-entry): Fix error trying an `(insert
	nil)'.

	* subdirs.el: Add `net' directory.

	* net: New directory.

	* emacs-lisp/lisp-mode.el (eval-last-sexp-1): Renamed from
	eval-last-sexp.  Don't bind debug-on-error here.
	(eval-last-sexp): New function.  Bind debug-on-error if
	eval-expression-debug-on-error is non-nil.
	(eval-defun-2, eval-defun): Likewise.

	* simple.el (eval-expression): Don't bind debug-on-error if
	eval-expression-debug-on-error is nil.  Detect changed
	debug-on-error, and propagate new value to global binding, if
	eval-expression-debug-on-error is non-nil,
	(eval-expression-debug-on-error): Change doc string.

2000-01-11  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/edebug.el (with-syntax-table): Add a def-edebug-spec.

	* emacs-lisp/lisp-mode.el (with-syntax-table):
	Set up lisp-indent-function property.

	* subr.el (with-syntax-table): Moved from simple.el.

	* simple.el (with-syntax-table): Moved to subr.el.

2000-01-11  Gerd Moellmann  <gerd@gnu.org>

	* tmm.el (tmm-shortcut): Delete region after prompt instead
	of erasing buffer.

	* textmodes/fill.el (fill-common-string-prefix): New function.
	(fill-context-prefix): Use the longest common prefix of first
	and second line fill prefix, if there is one.

2000-01-11  Richard M. Stallman  <rms@gnu.org>

	* array.el (array-mode): Don't use make-variable-buffer-local.
	Use make-local-variable for `truncate-lines'.

2000-01-11  Jari Aalto  <jari.aalto@poboxes.com>

	* add-log.el (add-log-current-defun): Handle user-defined
	add-log-current-function returning nil,

	* add-log.el (add-change-log-entry): Insert version number
	if having found a current function

	* add-log.el (add-log-current-defun): Call
	`add-log-current-defun-function'.  Try matches at level 0 and
	level 1.  Strip whitespace from defun found.

2000-01-10  John Wiegley  <johnw@gnu.org>

	* allout.el (isearch-done/outline-provisions): Added `edit'
	argument to correspond with the current definition of
	`isearch-done'.

2000-01-10  Dave Love  <fx@gnu.org>

	* elide-head.el (elide-head): Use point-marker, not point.

2000-01-10  Gerd Moellmann  <gerd@gnu.org>

	* vc-hooks.el (vc-parse-buffer): Handle mixtures of dates
	before and after the year 2000.

	* textmodes/ispell-merged.el (xemacsp, version18p, version-20p):
	Add ispell- prefix.

2000-01-10  Ken Stevens  <k.stevens@ieee.org>

	* ispell.el:  Only define dictionaries in menus when they exist.
	(version18p): New variable.
	(version20p): New variable.
	(xemacsp): New variable.
	(ispell-choices-win-default-height): Fix for XEmacs visibility.
	(ispell-dictionary-alist1): Added Brasileiro dictionary.
	(ispell-dictionary-alist6): Russian command lines no longer accept
	run-together words.
	(ispell-local-dictionary-alist): Add koi8-r to customize definition.
	(ispell-dictionary-alist): Add koi8-r to customize definition.
	(check-ispell-version): Added documentation string.  Returns
	library path when called non-interactively.
	(ispell-menu-map-needed): Uses new variables.
	(ispell-library-path): New variable.
	(ispell-decode-string): XEmacs fix for bogus variable bindings.
	(ispell-word): Improved documentation string.  Test for valid
	character mappings.  Correctly check typed in word changes that can
	result in single words split into multiple words.  Returns
	replacement word.
	(ispell-command-loop): Fixes XEmacs display bugs.  Show word to
	replace in recursive query replace mode.  Help message for
	recursive edit mode.
	(ispell-show-choices): Protect against bad framepop bindings.
	(ispell-help): Fix to work with XEmacs.
	(ispell-highlight-spelling-error): Use new variables.
	(ispell-overlay-window): Fix to work with XEmacs.
	(ispell-parse-output): Passed and returns location information
	tracking spelling corrections.  Doesn't recheck same word on
	current line.
	(ispell-init-process): Protect against bogus XEmacs variable binding.
	Fix call to single argument in sleep-for.  Use new variables.
	(ispell-region): Passed and returns location information tracking
	spelling corrections.  Doesn't check same word on current line.
	Improved documentation string.  Doesn't resend a line already
	checked to the ispell process - fixes bug in LaTeX parsing.
	(ispell-begin-skip-region-regexp): No longer skips <TT> in SGML.
	(ispell-skip-region): No longer skips <TT> in SGML.
	(ispell-process-line): Tracks location information with spelling
	corrections.  Added documentation string.  Accounts for words
	already accepted on this line.  Don't allow query-replace on line
	starting with math characters.  Doesn't resend a line already sent
	to ispell process.  Fixes alignment error bug.

2000-01-10  Richard M. Stallman  <rms@gnu.org>

	* dired-x.el (dired-guess-shell-alist-default):
	Suggest xloadimage, which is free, not xv, which isn't.

	* ange-ftp.el (ange-ftp-file-name-nondirectory):
	Don't ever include the host name or user name in the value.

2000-01-09  Gerd Moellmann  <gerd@gnu.org>

	* textmodes/texinfmt.el (texinfo-format-scan): Use ?\n instead
	of a real newline.

2000-01-09  Stephen Eglen  <stephen@gnu.org>

	* dired-x.el (dired-guess-shell-alist-default): Suggest xv
	for .png files.

2000-01-09  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-edit.el (custom-hook-convert-widget): Fix comment.

2000-01-09  Gerd Moellmann  <gerd@gnu.org>

	* progmodes/cperl-mode.el: Replace ^F with ^L.

	* sendmail.el (toplevel): Provide `sendmail' when compiling
	before `require'ing rmail and mailalias to prevent infinite
	recursion.

2000-01-08  Dave Love  <fx@gnu.org>

	* emacs-lisp/backquote.el: Remove inappropriate customization
	(allowing custom.el to use backquote).

2000-01-07  Dave Love  <fx@gnu.org>

	* add-log.el (add-log-debugging): Deleted.
	(add-change-log-entry): Treat a backup FILE-NAME as its parent
	file.  Remove debugging code.
	(change-log-get-method-definition, change-log-name): Add doc.
	(change-log-sortable-date-at): New function.
	(change-log-merge): New command.

	* time.el (display-time-string-forms): Make the Mail string active.
	(display-time-update): Provide help-echo for load average.

	* bindings.el (make-mode-line-mouse2-map): New function.
	(mode-line-modified): Use it and simplify.
	(mode-line-mule-info): Provide help-echo info.
	(minor-mode-alist): Activate the strings.
	(make-mode-line-mouse-sensitive): Simplify for
	mode-line-buffer-identification.

2000-01-07  Gerd Moellmann  <gerd@gnu.org>

	* play/pong.el: New file.

2000-01-06  Dave Love  <fx@gnu.org>

	* array.el: Assorted cleanups for compiler warnings, doc strings,
	`array-' prefix for symbols.

2000-01-05  Dave Love  <fx@gnu.org>

	* textmodes/outline.el (outline-mode-menu-bar-map): Add
	outline-headers-as-kill.
	(outline-mode): Define imenu-generic-expression.
	(outline-headers-as-kill): New command.

	* textmodes/otext-mode.el (text-mode): Remove page-delimiter's `^'
	from paragraph-start.
	(paragraph-indent-minor-mode): New command.

	* progmodes/fortran.el (fortran-mode-map): Don't bind M-C-a,
	M-C-e, M-C-h, C-j, C-xnd, TAB.
	(fortran-mode): Set beginning-of-defun, end-of-defun.
	(fortran-column-ruler): Simplify.
	(fortran-mark-subprogram, fortran-narrow-to-subprogram): Deleted.
	(fortran-with-subprogram-narrowing): Likewise.
	(fortran-indent-subprogram): Call mark-defun.
	(fortran-check-for-matching-do): Change narrowing.

	* emacs-lisp/cl-extra.el (cl-make-hash-table): Use make-hash-table.
	(cl-lucid-hash-tag): Delete.
	(cl-hash-table-p): Correct test for native table.
	(cl-hash-table-count): Use hash-table-count.

	* browse-url.el (browse-url): Fix case of
	browse-url-browser-function being an alist.

2000-01-05  Carsten Dominik  <cd@gnu.org>

	* textmodes/reftex-vars.el (reftex-parse-file-extension)
	(reftex-index-phrase-file-extension): New options.

	* textmodes/reftex-index.el (reftex-index-visit-phrases-buffer):
	Use new option `reftex-index-phrase-file-extension'.

	* textmodes/reftex.el (reftex-access-parse-file): Use new option
	`reftex-parse-file-extension'.

2000-01-05  Dave Love  <fx@gnu.org>

	* emacs-lisp/lisp.el (beginning-of-defun): New variable.
	(beginning-of-defun-raw): Use it.
	(end-of-defun): New variable.
	(end-of-defun): Use it.
	(check-parens): New command.

2000-01-05  Thien-Thi Nguyen  <ttn@delysid.gnu.org>

	* progmodes/hideshow.el (hs-discard-overlays, hs-flag-region)
	(hs-show-block): Don't use `mapcar' when not accumulating.

	Fix buglet in local variables initialization.

2000-01-05  Andreas Schwab  <schwab@suse.de>

	* hscroll.el (hscroll): Doc fix.

2000-01-05  Carsten Dominik  <cd@gnu.org>

	* progmodes/idlw-shell.el (idlwave-shell-toggle-toolbar): require
	idlw-toolbar.

	* progmodes/idlwave.el (idlwave-load-system-rinfo): load must read
	file idlw-rinfo.el.
	(idlwave-customize): load must read file idlw-shell.el.
	(idlwave-create-customize-menu): load must read file idlw-shell.el.

2000-01-05  Carsten Dominik  <dominik@astro.uva.nl>

	* progmodes/idlw-shell.el: Also provide idlwave-shell
	* progmodes/idlw-rinfo.el: Also provide idlwave-rinfo
	* progmodes/idlw-toolbar.el: Also provide idlwave-toolbar

	* textmodes/reftex-dcr.el: renamed from reftex-vcr.el, provide
	both reftex-dcr and reftex-vcr.

	* textmodes/reftex.el: Renamed reftex-vcr.el to reftex-dcr.el

2000-01-05  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: PostScript code now is in separate files, doc fix.
	(ps-print-version): New version number (5.0.3).
	(ps-header-lines, ps-left-header, ps-right-header): No more buffer
	local.
	(ps-spool-config): Initialization fix.
	(ps-print-prologue-1, ps-print-prologue-2)
	(ps-print-duplex-feature): PostScript code moved to separated file.
	(ps-background-image): Little code reformating.
	(ps-begin-file, ps-begin-job): Fix code.
	(ps-postscript-code-directory, ps-mark-code-directory): New vars.
	(ps-prologue-file): New fun.

2000-01-05  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-vars.el: Eliminated.

	* ps-mule.el: ps-vars eliminated, ps-multibyte-buffer now is
	`;;;###autoload'.

	* ps-print.el: ps-vars eliminated, doc fix.
	(ps-print-version): New version number (5.0.2).
	(ps-spool-config): Initialization fix.
	(ps-print-customize): New fun.

2000-01-04  Gerd Moellmann  <gerd@gnu.org>

	* autorevert.el (auto-revert-mode): Return value of
	auto-revert-mode.

2000-01-04  Dave Love  <fx@gnu.org>

	* bindings.el (make-mode-line-mouse-sensitive): Fix the toggle
	menu items.

2000-01-03  Dave Love  <fx@gnu.org>

	* elide-head.el (elide-head) [defgroup]: Add :version.

	* emacs-lisp/cl-extra.el (cl-emacs-type): Remove defvar.
	(cl-not-hash-table, cl-clrhash, cl-maphash, cl-hash-table-count): Use
	`cl-hash-table-p', not `hash-table-p'.
	(cl-map-keymap, cl-map-keymap-recursively): Remove compatibility code.

2000-01-03  Eli Zaretskii  <eliz@is.elta.co.il>

	* faces.el (face-read-integer, read-face-attribute)
	(color-defined-p, color-values): unspecified-{f,b}g are now
	strings.

2000-01-03  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el (c-fill-paragraph): Count number of spaces
	at comment end, and re-insert them after filling.

2000-01-03  Eli Zaretskii  <eliz@is.elta.co.il>

	* progmodes/idlwave.el: Rename idlwave-*.el into idlw-*.el
	* progmodes/idlw-rinfo.el, progmodes/idlw-shell.el,
	progmodes/idlw-toolbar.el: Renamed from idlwave-*.el.

2000-01-03  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/x-win.el (xw-defined-colors): Call color-supported-p,
	the new name of face-color-supported-p.

	* term/w32-win.el (xw-defined-colors): Likewise.

2000-01-03  Eli Zaretskii  <eliz@is.elta.co.il>

	* simple.el (completion-setup-function): Count completion-size
	from minibuffer-prompt-end, not from point-min.

2000-01-02  Eli Zaretskii  <eliz@is.elta.co.il>

	* faces.el (read-face-attribute, defined-colors, color-defined-p):
	Pass the frame to tty-color-* functions.
	(display-color-p, frame-set-background-mode): Pass the frame to
	tty-display-color-p.

	* term/tty-colors.el (tty-defined-color-alist): Renamed from
	tty-color-alist.
	(tty-color-alist, tty-modify-color-alist): New functions.
	(tty-color-define,  tty-color-clear, tty-color-approximate)
	(tty-color-translate, tty-color-by-index, tty-color-desc): Accept
	an optional parameter FRAME.

2000-01-01  Gerd Moellmann  <gerd@gnu.org>

	* image.el (create-image, defimage): Don't assume image data is a
	string.

	* image.el (defimage): Handle specifications containing :data
	instead of :file.
	(image-type-from-data): New function.
	(image-type-from-file-header): Use it.
	(create-image): Add parameter DATA-P.

See ChangeLog.8 for earlier changes.

;; Local Variables:
;; coding: iso-2022-7bit
;; End:
