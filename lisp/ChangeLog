2002-05-07  Colin Walters  <walters@gnu.org>

	* ibuf-ext.el (ibuffer-pop-filter-group): Doc fix.
	(ibuffer-clear-filter-groups): Likewise.
	(ibuffer-kill-filter-group): Likewise.
	(ibuffer-kill-line): Likewise.
	(ibuffer-read-filter-group-name): New function.
	(ibuffer-jump-to-filter-group): Use it.
	(ibuffer-kill-filter-group): Likewise.
	(ibuffer-yank-filter-group): Likewise.
	(ibuffer-decompose-filter-group): New function.

	* ibuffer.el (ibuffer-mode-map): Bind it.  Add :enable guard
	around `ibuffer-filters-to-filter-group' menu item.  Fix :enable
	guards for `ibuffer-pop-filter-group' and
	`ibuffer-clear-filter-groups'.

2002-05-06  Markus Rost  <rost@math.ohio-state.edu>

	* emacs-lisp/find-func.el (find-function-search-for-symbol): Use
	with-syntax-table.

2002-05-06  Francesco Potorti`  <pot@gnu.org>

	* mail/rmail.el (rmail-font-lock-keywords): Highlight Resent-[Ff]rom:.

2002-05-05  Markus Rost  <rost@math.ohio-state.edu>

	* time-stamp.el (time-stamp-format): Doc fix: escape open
	parenthesis in column 0.

2002-05-04  Richard M. Stallman  <rms@gnu.org>

	* toolbar/tool-bar.el (tool-bar-local-item-from-menu):
	Handle both cases: when the menu item has cached info
	and when it doesn't.

	* filesets.el (filesets-browse-dir-function): Renamed from ...-fn.
	(filesets-open-file-function, filesets-save-buffer-function): Likewise.
	(filesets-tree-max-level): Doc fix.
	(filesets-commands, filesets-external-viewers)
	(filesets-ingroup-patterns): Mark as risky.
	(filesets-cache-hostname-flag): Doc fix.
	(filesets-menu-cache-file): Doc fix.  Mark as risky.
	(filesets-menu-before, filesets-menu-path, filesets-menu-in-menu):
	Don't defcustom them if running in Emacs.

2002-05-04  Thomas Link <t.link@gmx.at>

	* filesets.el (filesets-ingroup-collect-files):
	Fix problem with inclusion groups' :scan-depth property.

2002-05-04  Colin Walters  <walters@verbum.org>

	* ibuf-ext.el (ibuffer-kill-filter-group): Test for killing
	"Default" group earlier.  Push killed group on
	`ibuffer-filter-group-kill-ring'.
	(ibuffer-kill-line): Document.  Don't push killed group ourselves.
	(ibuffer-yank-filter-group): Renamed from `ibuffer-yank'.
	(ibuffer-insert-filter-group-before): New function, broken out
	from `ibuffer-yank'.
	(ibuffer-yank): Now just call `ibuffer-yank-filter-group'.

	* ibuffer.el (ibuffer-mode-operate-menu, ibuffer-mode-mark-menu)
	(ibuffer-mode-view-menu): Unused variables; deleted.
	(ibuffer-find-file): Pass wildcard flag to `find-file' correctly.

2002-05-04  John Paul Wallington <jpw@shootybangbang.com>

	* ibuffer.el (ibuffer-mode-groups-popup): New variable.
	(toplevel): Bind filter group menu entries in it.  Add :enable
	forms for some menu items.
	(toplevel): Bind [down-mouse-3] in `ibuffer-mode-filter-group-map'
	to `ibuffer-mouse-popup-menu'.
	(ibuffer-mouse-popup-menu): Test whether or not we're on a filter
	group name, and if so, pop up a filter group menu.

2002-05-04  Jason Rumney  <jasonr@gnu.org>

	* mwheel.el (mwheel-event-button): Translate mouse-wheel events.
	(mwheel-scroll): Recognize nil scroll amount as documented.

	* term/w32-win.el (mouse-wheel-scroll-line)
	(mouse-wheel-scroll-screen): Remove.
	([mouse-wheel], [C-mouse-wheel], [S-mouse-wheel]): Use mwheel-scroll.

	* w32-vars.el: (mouse-wheel-scroll-amount): Removed.

2002-05-04  Markus Rost  <rost@math.ohio-state.edu>

	* emacs-lisp/find-func.el (find-function-search-for-symbol): Bind
	case-fold-search when searching.

2002-05-04  Eli Zaretskii  <eliz@is.elta.co.il>

	* apropos.el (apropos-print): Fix the reference to mouse-2.

2002-05-04  Daniel Pfeiffer  <occitan@esperanto.org>

	* play/mpuz.el (mpuz-switch-to-window): Set buffer-read-only directly.

2002-05-04  Kim F. Storm  <storm@cua.dk>

	* cus-edit.el (custom-buffer-verbose-help): New variable.
	(custom-buffer-create-internal): Remove verbose introduction
	in customization buffer when it is nil.

2002-05-03  Dave Love  <fx@gnu.org>

	* international/mule-cmds.el (select-safe-coding-system):
	Don't offer coding systems that use locking shift.
	Ask for confirmation if chosen coding system disagrees with
	a `coding:' spec in the file.

2002-05-03  John Wiegley  <johnw@gnu.org>

	* eshell/esh-var.el (eshell-modify-global-environment): Added this
	customization variable, which will cause any "export" commands
	within any eshell buffer to modify the global Emacs environment.
	It defaults to nil, which means that such commands will only
	modify that Eshell buffer's environment.
	(eshell-var-initialize): Initialize
	`eshell-modify-global-environment'.

	* eshell/em-cmpl.el (eshell-command-completions-alist): Improved
	default completion targets for objdump, nm and readelf.

2002-05-03  Colin Walters  <walters@verbum.org>

	* play/gamegrid.el (gamegrid-user-score-file-directory): New
	variable.
	(gamegrid-add-score-with-update-game-score): Use
	`shared-game-score-directory'.  Correctly handle non-setuid case.

2002-05-02  Colin Walters  <walters@verbum.org>

	* replace.el (occur-mode-map): Bind "q" to `delete-window'.
	(occur-1): If one of the buffers we're searching is the *Occur*
	buffer itself, handle it by creating a temporary buffer.  If any
	of the buffers being searched are killed, note that in the search
	result message.  Also, set local variables before we possibly kill
	the buffer.

2002-05-02  Kim F. Storm  <storm@cua.dk>

	* menu-bar.el (menu-bar-make-toggle): Added optional PROPS arg.
	(menu-bar-options-save): Added cua-mode.
	(menu-bar-options-menu): Added toggle for cua-mode.  Disable
	toggle for transient-mark-mode if cua-mode is enabled.

	* emulation/cua-base.el (cua-inhibit-cua-keys): New buffer-local
	variable.

2002-05-01  Richard M. Stallman  <rms@gnu.org>

	* help.el (view-todo): New function.
	(help-map): Bind C-h C-t to view-todo.
	(help-for-help): Change the text.

2002-05-01  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/f90.el: Yet more doc string, commment and whitespace
	changes.
	(f90-imenu-flag): New name for internal variable f90-imenu.
	(f90-blocks-re, f90-program-block-re, f90-end-if-re,
	f90-no-break-re): Use regexp-opt.
	(f90-end-type-re): Add closing "\\>".
	(f90-indent-region): Correctly indent comments embedded in
	continued lines.
	(f90-indent-new-line): Make it indent the current line, as it
	should.
	(f90-line-continued, f90-get-present-comment-type,
	f90-looking-at-if-then, f90-indent-line, f90-indent-new-line,
	f90-indent-region, f90-indent-subprogram, f90-do-auto-fill,
	f90-join-lines, f90-fill-region, f90-match-end, f90-insert-end,
	f90-change-keywords): Minor code tidying.

	* progmodes/fortran.el (fortran-strip-sequence-nos): Rename from
	typo `fortran-strip-sqeuence-nos'.

2002-05-01  Eli Zaretskii  <eliz@is.elta.co.il>

	* simple.el (clone-indirect-buffer-other-window): Fix a typo in
	pop-up-window.

2002-05-01  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua--pre-command-handler): Only
	interpret delete-selection property if mark-active.
	(cua-mode): Fixed require in defcustom.

2002-05-01  Pavel Jan,Bm(Bk  <Pavel@Janik.cz>

	* calendar/cal-menu.el (cal-menu-x-popup-menu): Fix argument of
	error call.

2002-05-01  Colin Walters  <walters@verbum.org>

	* textmodes/tex-mode.el (tex-validate-buffer): Use
	`occur-revert-arguments' instead of setting `occur-nlines' and
	`occur-buffer'.  Don't test for `input-pending-p' in loop.  Set
	text property `occur-target' instead of `occur'.

2002-04-30  John Wiegley  <johnw@gnu.org>

	* align.el (align-region): Fixed the fix to align-region, because
	the "name" argument was appearing twice.

2002-05-01  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-engine.el (c-beginning-of-decl-1): Better way
	to handle protection labels, one which doesn't get confused by
	inherit colons.

	* progmodes/cc-engine.el (c-end-of-decl-1): Don't treat
	functions that have "class" or "struct" in the return type as
	classes or structs.

2002-04-30  Kim F. Storm  <storm@cua.dk>

	* menu-bar.el (menu-bar-custom-menu): Change "Recently Changed
	Options" to "New Options..."; rephrase tooltip.
	Rephrase tooltip for "Specific Option...".
	Added "Saved Options" item.  [from Simon Marshall]

2002-04-30  Richard M. Stallman  <rms@gnu.org>

	* time.el (display-time-mail-directory)
	(display-time-mail-function): Doc fixes.

	* ediff-hook.el: Remove autoload cookies.

	* language/tibetan.el (tibetan-obsolete-glyphs): Now in tibet-util.el.

	* language/tibet-util.el (tibetan-obsolete-glyphs): From tibetan.el.

	* align.el (align-region): Fix call to `message'.
	Check that (car rule) is a symbol.

	* autoinsert.el (auto-insert-directory): Doc fix.

	* facemenu.el (describe-text-at and stuff): Moved to descr-text.el.

	* descr-text.el: New file, broken out of facemenu.el.

	* emacs-lisp/advice.el (documentation): Add ad-define-subr-args call.

2002-04-29  Markus Rost  <rost@math.ohio-state.edu>

	* mail/emacsbug.el (report-emacs-bug-hook): Use
	replace-match only if search was successful.

2002-04-29  Richard M. Stallman  <rms@gnu.org>

	* net/zone-mode.el (zone-mode): Add write-file-hooks hook locally.

	* mail/emacsbug.el (report-emacs-bug-hook): Don't fail completely
	if the user edits the Emacs version number in the text.

	* filesets.el (filesets-running-xemacs): Make defvar unconditional.
	(filesets-ingroup-files): Renamed from filesets-ingroup-paths.
	(filesets-error): Simplify definition and make conditional
	on filesets-running-xemacs.
	(filesets-find-file-using): Renamed from fsfind-file-using.

2002-04-29  Colin Walters  <walters@verbum.org>

	* ibuf-ext.el (ibuffer-kill-filter-group): Call `delete' function.
	(ibuffer-kill-line): Copy the filter group data structure when
	killing.
	(ibuffer-yank): Handle case where we're yanking on the default
	group correctly.
	(ibuffer-delete-saved-filter-groups): Doc fix.

	* play/gamegrid.el (gamegrid-add-score-with-update-game-score):
	Test whether or not update-game-score is setuid, and do the right
	thing.

2002-04-29  Kim F. Storm  <storm@cua.dk>

	* subr.el (remove-yank-excluded-properties): New helper function.
	(insert-for-yank, insert-buffer-substring-as-yank): Use it.

	* simple.el (yank-excluded-properties): Added help-echo to list.

2002-04-29  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* autoinsert.el (auto-insert-directory): Doc fix.

	* progmodes/f90.el: Add/change doc strings for many inline
	functions.  Whitespace changes.
	(f90-indent-line-no, f90-update-line): Minor code changes.

2002-04-29  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el: New file.

	* emulation/cua-rect.el: New file.

	* emulation/cua-gmrk.el: New file.

	* emulation/keypad.el: New file.

2002-04-29  Triet Hoai Lai  <thlai@ee.usyd.edu.au>

	* language/vietnamese.el (viet-tcvn-decode-table, ccl-decode-tcvn)
	(ccl-encode-tcvn, ccl-encode-tcvn-font, vietnamese-tcvn): New
	Vietnamese coding system.

	* language/viet-util.el: Update Commentary section.

2002-04-29  Pavel Jan,Bm(Bk  <Pavel@Janik.cz>

	* filesets.el (filesets-data): Doc fix.
	(filesets-running-xemacs): Define even when compiling.

	* recentf.el (recentf-cancel-dialog): Remove dot at the end of
	sentence.

2002-04-29  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/fill.el (fill-context-prefix): Fix last change with
	yet-another-approach.

2002-04-28  Markus Rost  <rost@math.ohio-state.edu>

	* net/ange-ftp.el (ange-ftp-passive-host-alist)
	(ange-ftp-bs2000-additional-pubsets):  Fix custom type.

	* files.el (small-temporary-file-directory): Fix custom type.

2002-04-28  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/f90.el (f90-xemacs-flag): New variable.
	(f90-mark-subprogram-overlay): New variable.
	(f90-mark-subprogram): Now it highlights the subprogram.
	(f90-font-lock-keywords-1, f90-font-lock-keywords-2):
	Fix highlighting of various "type" forms.

2002-04-28  Colin Walters  <walters@verbum.org>

	* ibuffer.el (ibuffer-mode): Additional documentation on filter
	groups.

2002-04-28  John Paul Wallington <jpw@shootybangbang.com>

	* ibuf-ext.el (ibuffer-set-filter-groups-by-mode): Don't make an
	ibuffer-mode filter group if `ibuffer-view-ibuffer' is nil.

2002-04-28  Richard M. Stallman  <rms@gnu.org>

	* mail/sendmail.el (mail-recover-1): Decrease non-random-len
	by 1 for the newly-readded #.

	* files.el (make-auto-save-file-name): Specify # as suffix
	in the non-file-visiting case.

	* subr.el (make-temp-file): New arg SUFFIX.

	* filesets.el: New file.

	* replace.el (occur-accumulate-lines): Avoid incf and decf.
	(occur-engine-add-prefix): New function.
	(occur-engine): Avoid using macrolet, incf and decf.
	Use occur-engine-add-prefix instead.
	Rename `l' to `lines' and `c' to `matches'.

	* replace.el (occur-engine, occur-mode-mouse-goto)
	(occur-mode-find-occurrence, occur-mode-goto-occurrence)
	(occur-mode-goto-occurrence-other-window)
	(occur-mode-display-occurrence): A position is just a marker,
	not a list.

	* replace.el (occur-revert-arguments):
	Renamed from occur-revert-properties.  All uses changed.

2002-04-28  Pavel Jan,Bm(Bk  <Pavel@Janik.cz>

	* recentf.el (recentf-menu-before): Use string to specify path in
	the menu.

	* international/mule-cmds.el (read-language-name): Take care of
	non-list values.

2002-04-27  Richard M. Stallman  <rms@gnu.org>

	* custom.el (custom-load-symbol): Moved from cus-edit.el.
	(custom-load-recursion): Likewise.

	* cus-edit.el (custom-load-symbol): Moved to custom.el.
	(custom-load-recursion): Likewise.

	* progmodes/ada-xref.el (ada-add-ada-menu): Menu pseudo-keys
	generated by easymenu are now lowercase.

2002-04-27  Richard M. Stallman  <rms@gnu.org>

	* menu-bar.el (menu-bar-update-buffers): Add menu items
	Next Buffer and Previous Buffer.

	* simple.el (next-buffer, prev-buffer): New commands.
	Bind C-x left and C-x right to them.

	* info.el (Info-header-line): Mark it as risky-local-variable.

	* subr.el (insert-for-yank): Replace `category' property
	with whatever properties it stands for.

	* subr.el (member-ignore-case): Ignore non-strings in LIST.

2002-04-27  Miles Bader  <miles@gnu.org>

	* faces.el (read-face-name): Format the prompt correctly when
	there's no default.

2002-04-26  Andrew Choi  <akochoi@shaw.ca>

	* term/mac-win.el: Don't call ediff-toggle-multiframe.
	Set default directory.  Set process-connection-type to nil.

2002-04-26  Richard M. Stallman  <rms@gnu.org>

	* loadup.el: Explicitly load cus-face and timer.

	* isearch.el: Don't require timer.

	* faces.el: Don't require cus-face.

	* cus-edit.el (customize-face): Use read-face-name
	and handle multiple faces.
	(customize-face-other-window): Make it work similarly.

	* faces.el (read-face-name): New defaulting features.
	New args STRING-DESCRIBING-DEFAULT and MULTIPLE.
	(list-faces-display): Use the face, not its name string,
	as arg when running customize-face.
	Put a `read-face-name' prop on the entire line.
	(describe-face): Handle multiple faces via read-face-name.

	* textmodes/tex-mode.el (tex-start-options): New variable.
	(tex-start-commands): New variable.
	(tex-start-options-string): Variable deleted.
	(tex-start-tex): Use tex-start-options and tex-start-commands,
	not tex-start-options-string.
	(tex-command): Doc fix.

2002-04-26  Sam Steingold  <sds@gnu.org>

	* mail/smtpmail.el (smtpmail-try-auth-methods): When `host' is
	not in the authinfo/netrc, keep `cred' at nil.

2002-04-26  Gerd Moellmann  <gerd@gnu.org>

	* find-file.el: Remove Ada-specific example code.

2002-04-25  Michael Kifer  <kifer@cs.stonybrook.edu>

	* ediff-hooks.el: Put back the autoloads.

2002-04-25  Colin Walters  <walters@verbum.org>

	* ibuffer.el (define column process): Use `ibuffer-aif'.

	* ibuf-ext.el (ibuffer-saved-filter-groups): Don't include broken
	defaults.
	(ibuffer-yank): Be sure to `setq' after we use `nconc'.
	(ibuffer-save-filter-groups): Correctly structure filter groups.
	(ibuffer-switch-to-saved-filter-groups): Correctly extract filter
	groups.

2002-04-25  Simon Josefsson  <jas@extundo.com>

	* mail/sendmail.el (mail-use-dsn): New variable to request
	delivery status notification from MTA.
	(sendmail-send-it): Use it.

	* mail/smtpmail.el (smtpmail-queue-counter): New variable.
	(smtpmail-send-it): Use it to construct new queue filenames
	(needed if you send more than one message per second, which is
	possible if you use Gnus Agent).

	* mail/smtpmail.el (smtpmail-auth-credentials): Support netrc
	files as well.
	(smtpmail-try-auth-methods): Support netrc data.
	(netrc-parse): Autoload netrc.

2002-04-25  Colin Walters  <walters@verbum.org>

	* replace.el (multi-occur-by-filename-regexp): Doc fix.
	(occur-engine): Go to `point-min'.  Make nlines argument actually
	mean number of context lines.  Handle it.  Pad digits to the right.

	* ibuf-ext.el (ibuffer-filtering-groups): Renamed to
	`ibuffer-filter-groups'.  All users updated.
	(ibuffer-show-empty-filter-groups): New variable.
	(ibuffer-saved-filter-groups): New variable.
	(ibuffer-maybe-save-stuff): Renamed from
	`ibuffer-maybe-save-saved-filters'.  Callers updated.
	Handle `ibuffer-saved-filter-groups'.
	(ibuffer-hidden-filtering-groups): Renamed to
	`ibuffer-hidden-filter-groups'.
	(ibuffer-filter-group-kill-ring): New variable.
	(ibuffer-save-with-custom): Doc fix.
	(ibuffer-set-filter-groups-by-mode): New function.
	(ibuffer-clear-filter-groups): New function.
	(ibuffer-current-filter-groups-with-position): Renamed from
	`ibuffer-current-filter-groups'.  Callers updated.
	(ibuffer-kill-filter-group): New function.
	(ibuffer-kill-line): New function.
	(ibuffer-yank): New function.
	(ibuffer-save-filter-groups): New function.
	(ibuffer-delete-saved-filter-groups): New function.
	(ibuffer-switch-to-saved-filter-groups): New function.
	(ibuffer-mark-on-buffer): Add optional arguments for adding a
	specific mark, and marking on a specific group.

	* ibuffer.el (ibuffer-formats): Doc fix.
	(ibuffer-mode-map): Bind <up> to `ibuffer-backward-line'.
	Bind new functions from ibuf-ext.el.  Add menu entries for them.
	Remove superfluous tooltips.
	(ibuffer-toggle-marks): If on a group name, then toggle marks just
	in that group.
	(ibuffer-mark-interactive): Handle filter groups.
	(ibuffer-mark-forward, ibuffer-unmark-forward)
	(ibuffer-mark-for-delete, ibuffer-unmark-backward)
	(ibuffer-mark-for-delete-backwards): Update docs.
	(ibuffer-current-filter-groups): Moved to ibuf-ext.el, and renamed
	to `ibuffer-current-filter-groups-with-position'.
	(ibuffer-redisplay-engine): Handle `ibuffer-show-empty-filter-groups'.
	(ibuffer-mode): Add some documentation about filter groups.

2002-04-25  Andreas Schwab  <schwab@suse.de>

	* find-dired.el (find-name-dired): Don't quote pattern twice.

2002-04-26  Miles Bader  <miles@gnu.org>

	* cus-edit.el (customize-face, customize-face-other-window):
	Use default instead of initial-input for suggested face.

2002-04-25  Gerd Moellmann  <gerd@gnu.org>

	* cus-edit.el (customize-face-other-window, customize-face):
	Interactively, when point is on text with a face, suggest to
	customize that face.

2002-04-25  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/f90.el: General tidy-up of commentary and some doc
	strings.

2002-04-24  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* scroll-all.el (scroll-all-function-all) New function to do the
	actual work.
	(scroll-all-scroll-down-all, scroll-all-scroll-up-all,
	scroll-all-page-down-all, scroll-all-page-up-all,
	scroll-all-beginning-of-buffer-all, scroll-all-end-of-buffer-all):
	Make them use scroll-all-function-all.

	* progmodes/f90.el (f90-get-beg-of-line): Removed and replaced
	with line-beginning-position.
	(f90-get-end-of-line): Removed and replaced with line-end-position.
	(f90-match-piece): Removed and replaced with match-string.
	(f90-current-indentation): Remove `current-column'.
	(f90-get-present-comment-type): Use match-string rather than
	buffer-substring.
	(f90-match-end): Use line-beginning-position, line-end-position
	rather than beginning-of-line, end-of-line.
	(f90-startup-message): Variable removed.

2002-04-24  Colin Walters  <walters@verbum.org>

	* replace.el (occur-accumulate-lines): Add optional argument
	`no-props'.  Handle it.
	(occur-engine): Use it.

	* ibuf-ext.el (toplevel): Remove byte-compile-dynamic.  Try to set
	up autoloads manually.
	(ibuffer-split-list): New function.
	(ibuffer-filtering-groups): New variable.
	(ibuffer-hidden-filtering-groups): New variable.
	(ibuffer-mouse-toggle-filter-group): New function.
	(ibuffer-toggle-filter-group): New function.
	(ibuffer-toggle-filter-group-1): New function.
	(ibuffer-forward-filter-group): New function.
	(ibuffer-backward-filter-group): New funtion.
	(ibuffer-generate-filter-groups): New function.
	(ibuffer-filters-to-filter-group): New function.
	(ibuffer-pop-filter-group): New function.
	(ibuffer-jump-to-filter-group): New function.
	(ibuffer-do-occur): Just use `occur-read-primary-args'

	* ibuffer.el (ibuffer-filter-group-name-face): New.
	(ibuffer-mode-map): Bind and add menu entries for most new
	functions; also, bind the arrow keys to the movement functions.
	(ibuffer-mode-filter-group-map): New.
	(ibuffer-mouse-toggle-mark): Handle group names.
	(ibuffer-mouse-visit-buffer): Error if the current buffer is killed.
	(ibuffer-skip-properties): New function.
	(ibuffer-backward-line, ibuffer-forward-line): Optionally skip
	group names.  Also, handle new properties.
	(ibuffer-visit-buffer, ibuffer-visit-buffer-other-window):
	Move error handling to `ibuffer-current-buffer'.
	(ibuffer-visit-buffer-other-frame, ibuffer-bury-buffer): Ditto.
	(ibuffer-visit-tags-table, ibuffer-do-view-1): Ditto.
	(ibuffer-toggle-marks): Add optional group argument.
	(ibuffer-mark-interactive): Skip group names.
	(ibuffer-current-buffer): Clean up error handling.
	(ibuffer-fontify-region-function): Fontify group names.
	(ibuffer-map-lines): Add extra group argument.  Handle it.
	(ibuffer-current-filter-groups): New function.
	(ibuffer-redisplay): Handle hidden filtering groups.
	(ibuffer-sort-bufferlist): New function, taken from
	`ibuffer-insert-buffers-and-marks'.
	(ibuffer-insert-filter-group): New function.
	(ibuffer-redisplay-engine): Renamed from
	`ibuffer-insert-buffers-and-marks'.  Handle new filtering groups.
	(ibuffer): Add filter-groups argument.  Handle it.
	Use `save-selected-window'.
	(ibuffer-mode): Make `ibuffer-filtering-groups' and
	`ibuffer-hidden-filtering-groups' buffer-local.

	* ibuf-macs.el (ibuffer-save-marks): Call `ibuffer-redisplay-engine'.

2002-04-24  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/easymenu.el (easy-menu-intern): Downcase before interning.
	(easy-menu-define-key-intern): Function deleted; callers intern
	and then call easy-menu-define-key.
	(easy-menu-do-add-item): Explicitly intern the key, but not BEFORE.
	(easy-menu-define-key): Use easy-menu-name-match to match BEFORE.
	(easy-menu-name-match): New function.
	(add-submenu): New function.
	(easy-menu-get-map-look-for-name): Use easy-menu-name-match.

2002-04-24  Eli Zaretskii  <eliz@is.elta.co.il>

	* menu-bar.el (menu-bar-adv-search-menu)
	(menu-bar-adv-search-menu): Improve the help text.

2002-04-24  Simon Josefsson  <jas@extundo.com>

	* net/netrc.el: New file.

2002-04-24  Thomas DeWeese <tdeweese@rochester.rr.com>

	* term/x-win.el (x-select-text, x-cut-buffer-or-selection-value):
	Check if any of the available selection sources has new content
	and if so it will return that content.

2002-04-24

	* international/mule-diag.el (describe-coding-system,
	print-coding-system-briefly): Make printed output have a similar
	format as describe-character-set.

2001-12-20  Pavel Jan,Am(Bk  <Pavel@Janik.cz>

	* play/blackbox.el (bb-member): Remove, use member instead.
	(bb-delete): Remove, use delete instead.
	Update copyright notice.  Defvar for bb-board, bb-x, bb-y,
	bb-score, bb-detour-count and bb-balls-placed.
	Propertize results of rays.

2001-12-19  Karl Fogel  <kfogel@red-bean.com>

	* isearch.el (isearch-forward, isearch-edit-string): Make doc
	strings mention keybinding for `isearch-yank-word-or-char',
	rather than `isearch-yank-word', since the former is bound now
	and the latter is not.
	(isearch-yank-word-or-char): Fix formatting.

2001-12-19  Werner Lemberg  <wl@gnu.org>

	* language/czech.el, language/european.el, language/slovak.el: More
	fixes for language info doc strings.

2001-12-19  Eli Zaretskii  <eliz@is.elta.co.il>

	* loadup.el: Add "language" to the load-path.

2001-12-19  Richard M. Stallman  <rms@gnu.org>

	* international/mule-cmds.el (describe-language-environment):
	Fix calls to help-xref-button.

2001-12-19  Miles Bader  <miles@gnu.org>

	* international/fontset.el: Require `ind-util' when compiling.

2001-12-18  Pavel Jan,Am(Bk  <Pavel@Janik.cz>

	* language/ethio-util.el (ethio-modify-vowel): Use char-to-string
	instead of decompose-composite-char.

2001-12-18  Richard M. Stallman  <rms@gnu.org>

	* simple.el (eval-expression-print-level)
	(eval-expression-print-length): Doc fixes.

	* international/mule-diag.el (describe-character-set):
	Fix the arg to help-xref-button.

	* files.el (directory-free-space-program): New variable.
	(directory-free-space-args): New variable.
	(insert-directory): Use those two variables for getting free space.
	Use file-system-info instead, if that is defined.

	* dired.el (dired-free-space-program): Variable deleted.
	(dired-free-space-args): Variable deleted.
	(dired-insert-directory): Don't try to determine free space.

	* files.el (font-lock-defaults): Add risky-local-variables prop.
	(hack-one-local-variable): Treat various font-lock variables as risky.

2001-12-18  Werner Lemberg  <wl@gnu.org>

	* language/chinese.el, language/cyrillic.el:
	* language/czech.el, language/european.el, language/greek.el:
	* language/hebrew.el, language/indian.el, language/japanese.el:
	* language/korean.el, language/lao.el, language/slovak.el:
	* language/thai.el, language/tibetan.el, language/vietnamese.el:
	Improve documentation strings of coding systems and language infos.

2001-12-18  Werner LEMBERG  <wl@gnu.org>

	Add support for EUC-TW decoding/encoding.

	* language/china-util.el (big5-to-flat-code, flat-code-to-big5,
	euc-to-flat-code, flat-code-to-euc, expand-euc-big5-alist):
	New auxiliary functions to build `big5-to-cns'.
	(big5-to-cns): New translation alist.

	* language/chinese.el: Added new coding system `euc-tw' and its
	alias `euc-taiwan'.
	Updated language `Chinese-CNS' to include euc-tw encoding also.
	(ccl-decode-euc-tw, ccl-encode-euc-tw): New functions for handling
	euc-tw.

2001-12-18  Dave Love  <fx@gnu.org>

	* loadup.el: Add language/utf-8-lang, language/georgian.

	* image-file.el (image-file-name-extensions): Add pnm.  Doc fix.
	(image-file-name-regexps): Doc fix.

	* server.el (server-unload-hook): New function.

	* emacs-lisp/lisp-mnt.el (lm-copyright-prefix): Group the leader.
	(lm-crack-copyright): Cope with multi-line copyright `lines'.

	* simple.el (newline): Doc fix.
	(eval-expression-print-level, eval-expression-print-length): Doc
	fix.  Amend :type.
	(next-line, previous-line): Make arg optional.
	(newline): Doc fix.

	* Makefile.in (DONTCOMPILE): Add various language files.

	* international/quail.el (quail-input-string-to-events): Don't use
	string-to-list.

	* progmodes/f90.el (f90-break-line): Avoid infinite recursion
	calling `newline'.

2001-12-17  Richard M. Stallman  <rms@gnu.org>

	* comint.el (comint-dynamic-list-input-ring-select): New function.
	Switches back to the old window configuration.
	(comint-dynamic-list-input-r
	equivalents of characters in various Mule charsets and for extra
	Unicode characters.  Don't define specific categories for
	Indian/Devanagari, since they aren't used.

2001-12-06  Richard M. Stallman  <rms@gnu.org>

	* textmodes/fill.el (set-justification): Rename arg VALUE to STYLE.
	(set-justification-left, set-justification-right): Doc fix.

	* progmodes/f90.el (f90-break-line): Use (newline 1) to insert newline.
	(bug-f90-mode): Variable deleted.

2001-12-06  Stefan Monnier  <monnier@cs.yale.edu>

	* indent.el (indent-line-function): Default is indent-relative again.

2001-12-07  Miles Bader  <miles@gnu.org>

	* progmodes/compile.el (compilation-error-regexp-alist):
	Added regexps for RXP.

2001-12-05  Eli Zaretskii  <eliz@is.elta.co.il>

	* progmodes/cwarn.el (cwarn-font-lock-match-assignment-in-expression):
	Add shift-assignment operators to those highlighted, and highlight
	the whole operator rather than just the "=".

2001-12-04  Juanma Barranquero  <lektu@terra.es>

	* files.el (save-abbrevs, save-some-buffers): Don't ask the user
	before saving abbrevs if `save-abbrevs' has the value `silently'.

2001-12-04  Andreas Schwab  <schwab@suse.de>

	* xt-mouse.el (turn-off-xterm-mouse-tracking): Doc fix.

2001-12-04  Colin Walters  <walters@debian.org>

	* emacs-lisp/autoload.el (make-autoload): Also generate autoloads
	for `defmacro*' forms.

	* emacs-lisp/lisp-mode.el (toplevel): Define docstring offset for
	`defmacro*'.

2001-12-03  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/antlr-mode.el (antlr-c-common-init): Undo last change.

2001-12-02  Richard M. Stallman  <rms@gnu.org>

	* files.el (insert-directory): If the df output does not look right,
	don't try to use it.  Other cleanups in overall code structure.

2001-12-02  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/outline.el (outline-mode-prefix-map):
	Add bindings for outline-promote and outline-demote.
	(outline-minor-mode-menu-bar-map): New var.
	(outline-minor-mode): Use it.
	(outline-heading-alist): New var (renamed from outline-level-heading).
	(outline-level): Use it.
	(outline-insert-heading, outline-promote, outline-demote):
	Update to use outline-heading-alist.

	* disp-table.el (standard-display-european):
	Simplify since the function is not interactive any more.
	Don't set the existing buffers to unibyte.

	* pcvs-util.el (cvs-file-to-string): Move condition-case outside.

	* pcvs.el (cvs-reread-cvsrc): Don't use cvs-file-to-string.

	* reveal.el (reveal-mode): Fix reveal-mode's lighter.

	* shell.el (shell): Use shell-file-name.
	Pop to buffer before calling comint to set COLUMNS properly.

	* emacs-lisp/cl.el (svref): New alias.

	* progmodes/antlr-mode.el (antlr-c-common-init):
	Don't inhibit adaptive-fill-mode any more.

	* progmodes/delphi.el (delphi-mode): Don't use make-local-hook.

	* progmodes/etags.el (tags-with-face): Use make-symbol.
	(tags-search, tags-query-replace): Use backquotes.

	* textmodes/picture.el (picture-mode-map): Don't use defconst
	for a variable.

2001-12-02  Pavel Jan,Am(Bk  <Pavel@Janik.cz>

	* textmodes/reftex-index.el (reftex-index-mode):
	Remove make-local-hook.

	* textmodes/reftex-toc.el (reftex-toc-mode): Likewise.

2001-12-02  Kim F. Storm  <storm@cua.dk>

	* isearch.el (isearch-resume-enabled): New variable.
	(isearch-done): Use that variable.

2001-12-01  Richard M. Stallman  <rms@gnu.org>

	* wid-edit.el (widget-button-click): Don't move point permanently:
	Avoid mouse-set-point--instead select the window,
	then do save-excursion, then move point.
	Specify the buffer for get-char-property.
	Don't use `@' in interactive.

	* indent.el (indent-line-function):
	Default is indent-to-left-margin again.

	* replace.el (query-replace-read-args): Display message
	if FROM contains `\n' or `\t'.

2001-12-01  Stefan Monnier  <monnier@cs.yale.edu>

	* indent.el (tab-to-tab-stop): Use delete-horizontal-space.

	* bindings.el (minibuffer-local-map): Bind TAB to insert-tab.

	* emacs-lisp/regexp-opt.el (regexp-opt):
	Bind completion-regexp-list to nil.

	* progmodes/hideif.el (hif-nexttoken): Move to bef

	* emacs-lisp/lisp-mode.el (lisp-mode-variables):
	Set syntax-begin-function.
	(lisp-interaction-mode-abbrev-table): Defvar to its correct value.
	(lisp-interaction-mode): Don't set local-abbrev-table any more.
	(lisp-mode-auto-fill): Use syntax-ppss and obey
	comment-auto-fill-only-comments.
	(lisp-fill-paragraph): Use syntax-ppss.

2001-11-25  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mail/rmail.el (rmail-enable-mime-composing): New. A lightweight
	version of rmail-enable-mime.
	(rmail-forward): Use it.

2001-11-25  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/lisp-mode.el (lisp-indent-function): Add doc string.

	* international/quail.el (quail-keyboard-layout-button):
	Define button type.
	(quail-keyboard-customize-button): Likewise.
	(quail-help): Use those button types.  Require `help-mode'.
	Avoid altering the argument `package'.

	* help-mode.el (help-function, help-variable, help-face)
	(help-coding-system, help-input-method, help-character-set):
	Define each button type with its own explicit define-button-type.

	* language/devan-util.el: Comment out parts of the file
	which apparently are garbled.

2001-11-25  Pavel Jan,Am(Bk  <Pavel@Janik.cz>

	* mail/smtpmail.el (smtpmail-deduce-address-list): Don't use
	insert-string.

2001-11-25  Pavel Jan,Am(Bk  <Pavel@Janik.cz>

	* play/snake.el (snake-mode): Remove make-local-hook.

	* play/tetris.el (tetris-mode): Likewise.

	* play/decipher.el (decipher-mode): Likewise.

	* tmm.el (tmm-add-prompt): Likewise.

2001-11-25  Sam Steingold  <sds@gnu.org>

	* menu-bar.el (menu-bar-apropos-menu): New variable.
	Moved all `apropos' bindings to this menu.
	(menu-bar-help-menu): Added `menu-bar-apropos-menu'.

2001-11-24  KAWABATA, Taichi <batta@beige.ocn.ne.jp>

	The following changes are for new indian languages support based
	on Unicode charset and CDAC fonts.

	* international/mule-conf.el: Change indian-1-column charset to
	indian-glyph charset.

	* international/characters.el: Adjusted for the change of
	indian-1-column -> indian-glyph.

	* international/fontset.el: Delete the setting for indian-1-column
	and add the setting for indian-glyph in the default fontset.

	* language/indian.el: Completely re-written.

	* language/devanagari.el: Completely re-written.

	* language/devan-util.el: Completely re-written.

	* language/ind-util.el: New file.

2001-11-24  Richard M. Stallman  <rms@gnu.org>

	* startup.el (command-line-1): Don't do startup screen
	if a subprocess is running.  Call the startup screen buffer
	"GNU Emacs".  Make a special mode-line-format for it.

	* net/browse-url.el (browse-url-galeon-new-window-is-tab): New var.
	(browse-url-galeon): Use that variable.

	* mail/supercite.el (sc-toggle-var): Don't use set-variable or
	eval-expression.  Eval and set the variable simply.

	* files.el (temporary-file-directory): Use defcustom.
	(small-temporary-file-directory): Likewise.
	(normal-backup-enable-predicate): Move down in file
	after definition of temporary-file-directory.

	* bindings.el (last-buffer, unbury-buffer): Doc fixes.

2001-11-24  Colin Walters  <walters@debian.org>

	* calc/calc-ext.el (calc-init-extensions): Update the rest of the
	autoload names to match files renamed on initial calc import.

	* calc/calc.el (Commentary): Cleanup, and add logistic curve
	fitting suggestion from Robert J. Chassell <bob@rattlesnake.com>.

2001-11-23  Colin Walters  <walters@debian.org>

	* Makefile.in (finder_setwins, setwins): Include Calc again.

	* calc/calc-rules.el: Add header comment.

2001-11-23  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (with-vc-properties): Don't bind `filename' locally.
	(with-vc-file, edit-vc-file): Use `make-symbol' for local bindings
	to avoid name clashes.  Fix `lisp-indent-function' property for
	both.

2001-11-23  Francesco Potorti`  <pot@gnu.org>

	* generic-x.el (mailrc-generic-mode): Highlight the `source' keyword.

2001-11-22  Colin Walters  <walters@debian.org>

	* calc/calc-misc.el (report-calc-bug):
	Use `reporter-prompt-for-summary-p'.

	* calc/INSTALL, calc/Makefile: Remove.

2001-11-22  Miles Bader  <miles@gnu.o
	(add-to-list): Delete compatibility code.
	(checkdoc-next-message-error): Doc fix.

2001-11-17  Stephen Eglen  <stephen@gnu.org>

	* locate.el (locate): Show default locate pattern within the
	prompt, but don't insert it into the minibuffer contents.
	Catch the case when pattern is the empty string.

2001-11-17  Eli Zaretskii  <eliz@is.elta.co.il>

	* language/european.el ("French"): New language environment.

2001-11-16  Richard M. Stallman  <rms@gnu.org>

	* calendar/todo-mode.el (todo-save): Fix previous change.

	* subr.el (functionp): Do use cdr-safe on object.

2001-11-16  Stefan Monnier  <monnier@cs.yale.edu>

	* bindings.el (mode-line-mode-name): Only put the help-echo property
	if the local-map property was put as well.
	(global-map): Bind switch-frame, delete-frame, iconify-frame
	and make-frame-visible events.

	* emacs-lisp/elp.el (elp-not-profilable): New var.
	(elp-not-profilable-p): New function.
	(elp-instrument-function): Use it.  Use backquotes and push.

	* emacs-lisp/bytecomp.el (byte-compile-call-tree, byte-code-vector)
	(byte-stack+-info, byte-compile-last-warned-form)
	(byte-compile-last-logged-file): Don't defconst a variable.
	(no-byte-compile): Declare.
	(byte-compile-file): Don't boundp-check no-byte-compile any more.
	(byte-compile-defvar): Leave defconst as is.

	* emacs-lisp/edebug.el (edebug-form-data, edebug-offsets)
	(edebug-offsets-stack, edebug-read-dotted-list, edebug-def-name)
	(edebug-current-offset, edebug-old-def-name, edebug-error-point)
	(edebug-best-error): Don't defconst a variable.
	(edebug-read-syntax-table): Use a char-table.
	(edebug-lemacs-specific): Remove.
	Toplevel: Eliminate check for Lucid Emacs.

	* pcvs-util.el (cvs-prefix-define): Don't defconst a variable.

	* rect.el (move-to-column-force): Mark obsolete.
	(operate-on-rectangle, delete-extract-rectangle-line)
	(insert-rectangle, delete-whitespace-rectangle-line)
	(open-rectangle-line, clear-rectangle-line): Use move-to-column.
	(string-rectangle-history): New var.
	(string-rectangle, string-insert-rectangle): Use it.
	(delete-rectangle-line): Fix pos/column mixup and simplify.

	* startup.el (normal-top-level-add-subdirs-to-load-path): Simplify.
	(normal-top-level, command-line, command-line-1): Simplify.

	* tar-mode.el (tar-mode): Use define-derived-mode.

	* view.el (view-mode-enable): Don't use make-local-hook.

	* emacs-lisp/eldoc.el (eldoc-mode): Use define-minor-mode.

2001-11-16  Richard M. Stallman  <rms@gnu.org>

	* mail/mail-extr.el (mail-extr-voodoo): Treat a number as a word
	if it doesn't make sense as anything else.
	Don't recognize a "telephone number" at the beginning of the name.
	(mail-extr-leading-garbage): Match non-word characters only.

2001-11-16  Pavel Jan,Am(Bk  <Pavel@Janik.cz>

	* startup.el (command-line-processed): Doc fix.

	* apropos.el (apropos-next-label-button): Doc fix.

2001-11-16  Stefan Monnier  <monnier@cs.yale.edu>

	* comint.el (comint-mode): Simplify.
	(make-comint-in-buffer): Run `comint-mode' only if necessary.

	* subr.el (eval-after-load): Make it work with features as well.

	* log-view.el (log-view-mode): Don't mark the buffer unmodified.

	* international/mule-cmds.el (describe-input-method): Setup xref.
	(set-language-environment): Use functionp.
	(locale-language-names, locale-charset-language-names)
	(locale-preferred-coding-systems): Defconst and purecopy.

	* language/european.el (mac-roman): Add mime-charset property.

2001-11-15  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/cl.el (values, values-list, multiple-value-list)
	(multiple-value-apply, nth-value): Use defsubst rather than defalias
	to get better doc strings.

2001-11-15  Pavel Jan,Am(Bk  <Pavel@Janik.cz>

	* derived.el: Fix autoload cookie.

2001-11-15  Richard M. Stallman  <rms@gnu.org>

	* jka-compr.el (jka-compr-partial-uncompress): Fix previous change.

2001-11-15  Stefan Monnier  <monnier@cs.yale.edu>

	* menu-bar.el (menu-bar-edit-menu) <copy>: Put an explicit key binding.

2001-11-15  Richard M. Stallman  <rms@gnu.org>

	* dired.el (dired-undo): Display a message to explain
	that this does not undo file system changes.

2001-11-15  David Kastrup  <David.Kastrup@t-online.de>

	* mouse-drag.el (mouse-drag-throw): Push back non-drag events
	into `unread-command-events' instead of trying keymap
	lookups ourselves.  This makes mouse-clicks do the right
	thing even when keymaps of overlays are involved.
	(mouse-drag-drag): Likewise.

2001-11-15  Andreas Schwab  <schwab@suse.de>

	* progmodes/ada-mode.el (ada-add-extensions): Quote regexp special
	characters and append anchor to pattern added to auto-mode-alist.

2001-11-15  Stefan Monnier  <monnier@cs.yale.edu>

	* server.el (server-process-filter): Run pore/post-comment-hook
	before/after visiting the file.

	* info-look.el (makefile-mode): Add info for automake.
	(autoconf-mode): Fix the name of the index for automake.

	* international/latin-9.el: Give pilcrow punctuation syntax.

2001-11-15  Andre Spiegel  <spiegel@gnu.org>

	* vc.el: Documentation fixes.

2001-11-14  Stefan Monnier  <monnier@cs.yale.edu>

	* smerge-mode.el (smerge-match-conflict): Fix typo.
	(smerge-diff): Be careful to read match-data early enough.

2001-11-14  Colin Walters  <walters@verbum.org>

	* calc/calc-alg.el (calcFunc-esimplify, calcFunc-simplify)
	(calcFunc-subst): Use `defalias' instead of `fset' and
	`symbol-function'.

	* calc/calc-arith.el (calcFunc-abs, calcFunc-float)
	(calcFunc-ceil, calcFunc-round): Ditto.

	* calc/calc-bin.el (calcFunc-clip): Ditto.

	* calc/calc-ext.el (calcFunc-evalv): Ditto.

	* calc/calc-math.el (calcFunc-sqrt, calcFunc-hypot): Ditto.

	* calc/calc-misc.el (math-fixnump, math-fixnatnump)
	(calcFunc-trunc, calcFunc-floor, calc-report-bug): Ditto.

	* calc/calc-units.el (calcFunc-unsimplify): Ditto.

	* calc-aent.el, calc-ext.el, calc-incom.el, calc-misc.el
	* calc-sel.el, calc-vec.el, calc-alg.el, calc-fin.el
	* calc-keypd.el, calc-mode.el, calc-stat.el, calc-yank.el
	* calc-arith.el, calc-forms.el, calc-lang.el, calc-mtx.el
	* calc-store.el, calc.el, calc-bin.el, calc-frac.el, calc-macs.el
	* calc-poly.el, calc-stuff.el, calcalg2.el, calc-comb.el
	* calc-funcs.el, calc-maint.el, calc-prog.el, calc-trail.el
	* calcalg3.el, calc-cplx.el, calc-graph.el, calc-map.el
	* calc-rewr.el, calc-undo.el, calccomp.el, calc-embed.el
	* calc-help.el, calc-math.el, calc-rules.el, calc-units.el
	* calcsel2.el: Style cleanup; don't put closing parens on their
	own line, add "foo.el ends here" to each file, and update
	copyright date.

	* README: Update maintainer.

2001-11-13  Richard M. Stallman  <rms@gnu.org>

	* progmodes/compile.el (recompile): Use compilation-arguments if
	set, so as to be able to M-x recompile the exact command which
	created a compilation-mode buffer.

	* progmodes/ada-mode.el (ada-fill-comment-prefix): Doc fix.

2001-11-13  Gerd Moellmann  <gerd@gnu.org>

	* mouse.el (mouse-drag-region): Don't run the up-event
	handler if window start changed due to the down-mouse event.

2001-11-13  Richard M. Stallman  <rms@gnu.org>

	* mouse.el (mouse-show-mark): Either move point to the mark
	or use highlighting, never both.
	(mouse-buffer-menu): If WINDOW is a frame, select its selected window.

2001-11-13  Simon Josefsson  <jas@extundo.com>

	* mail/smtpmail.el (top-level): Change maintainer to Simon
	Josefsson, cleanup the smtpmail.el header.

	* mail/smtpmail.el (top-level): Don't require cl or base64.
	(smtpmail-cred-server, smtpmail-cred-port, smtpmail-cred-key)
	(smtpmail-cred-user, smtpmail-cred-cert, smtpmail-cred-passwd):
	Defsubst instead of defmacro.
	(smtpmail-intersection): Return value in reverse order.
	(smtpmail-open-stream): Use stringp instead of string-to-list.
	(smtpmail-open-stream, smtpmail-try-auth-methods): New functions,
	separated from smtpmail-via-smtp.

	* mail/smtpmail.el (top-level): Autoload starttls, mail-utils and
	rfc2104.  Require base64 and cl.
	(smtpmail-smtp-service): Doc fix.  :type fix.
	(smtpmail-debug-info): Doc fix.
	(smtpmail-debug-verb, smtpmail-auth-credentials)
	(smtpmail-starttls-credentials, smtpmail-auth-supported):
	New variables.
	(smtpmail-deduce-address-list, smtpmail-send-it): Don't require
	mail-utils (it is autoloaded).
	(smtpmail-cred-server, smtpmail-cred-port, smtpmail-cred-key)
	(smtpmail-cred-user, smtpmail-cred-cert, smtpmail-cred-passwd)
	(smtpmail-find-credentials, smtpmail-intersection): New utility funs.
	(smtpmail-via-smtp): Support STARTTLS, if binary is installed.
	(smtpmail-via-smtp): Support AUTH.
	(smtpmail-via-smtp): Use `smtpmail-debug-verb' to control VERB.

2001-11-13  Richard M. Stallman  <rms@gnu.org>

	* ebuff-menu.el (electric-buffer-update-highlight): New function.
	(electric-buffer-overlay): New variable.
	(electric-buffer-menu-looper): Call electric-buffer-update-highlight.
	(electric-buffer-list): Likewise.

	* isearch.el (isearch-whitespace-chars): Doc fix.
	(isearch-mode): Handle negative search-slow-window-lines correctly.

2001-11-13  Stefan Monnier  <monnier@cs.yale.edu>

	* newcomment.el (comment-normalize-vars): Handle a nil comment-padding.

	* progmodes/ada-mode.el (ada-fill-comment-prefix): GNAT wants 2 spaces.
	From Emmanuel Briot <briot@act-europe.fr>.

2001-11-13  Colin Walters  <walters@debian.org>

	* calc/calc.el (calc-unread-command): Use `unread-command-events'.

	* calc/calc-mode.el (calc-settings-file-name): Don't hardcode
	"~/.emacs"; use `read-file-name'.

	* calc/calc-graph.el, calc/calc-embed.el, calc/calc-graph.el
	* calc/calc-misc.el, calc/calc-mode.el, calc/calc-prog.el
	* calc/calc-sel.el, calc/calc-store.el, calc/calc-yank.el
	* calc/calc.el: Use `frame-width' instead of `screen-width',
	`frame-height' instead of `screen-height', and,
	`executing-kbd-macro' instead of `executing-macro'.

	* calc/calc-embed.el (calc-do-embedded): Call `y-or-n-p' with
	correct number of arguments.

	* calc/calc-aent.el (calc-do-alg-entry):
	Use `blink-paren-function' instead of `blink-paren-hook'.

2001-11-12  Richard M. Stallman  <rms@gnu.org>

	* calendar/todo-mode.el (todo-save): Add save-excursion
	and save-restriction.

	* server.el (server-edit, server-done): Doc fix.

	* simple.el (clone-indirect-buffer): Error if major mode symbol
	has a no-clone-indirect property.
	(clone-buffer): Check for obvious errors before reading clone name.

	* info.el (Info-mode): Add a no-clone-indirect property.

2001-11-12  Sam Steingold  <sds@gnu.org>

	* vc.el (vc-print-log): Bind `inhibit-read-only' to t before and
	set-buffer-modified-p to nil after `vc-exec-after'.
	* log-view.el (log-view-mode-map): Bind "q", "z", "m" and "d".
	(log-view-mode): Make read-only.
	(log-view-current-file): Do final `expand-file-name' in the
	current `default-directory'.
	(log-view-current-tag): Take an optional `where' arg.
	(log-view-diff): New user command.

2001-11-12  Pavel Jan,Am(Bk  <Pavel@Janik.cz>

	* progmodes/cpp.el (cpp-choose-face): Fix typo.

2001-11-12  Sam Steingold  <sds@gnu.org>

	* emacs-lisp/cl-indent.el (toplevel): Indent properly
	`generic-flet', `generic-labels', `with-accessors',
	`with-condition-restarts'.

2001-11-12  Richard M. Stallman  <rms@gnu.org>

	* dired.el: Many trivial doc fixes.
	(dired-get-file-for-visit): New function.
	(dired-find-alternate-file, dired-mouse-find-file-other-window):
	(dired-view-file, dired-find-file-other-window, dired-display-file):
	(dired-find-file): Use dired-get-file-for-visit.

2001-11-12  Alex Schroeder  <kensanata@yahoo.com>

	* sql.el (sql-mode): Doc change.

	* sql.el (sql-mode-syntax-table): The backslash is no longer an
	escape character.

2001-11-12  Colin Walters  <walters@debian.org>

	* calc/calc-keypd.el (toplevel): Bind mouse buttons.
	(calc-do-keypad): Don't attempt to use nonexistent global
	mouse-map, use calc-keypad-map.
	(calc-keypad-x-left-click): Renamed to calc-keypad-left-click.
	(calc-keypad-left-click): Don't use mouse-map; update to new event
	interface.
	(calc-keypad-x-middle-click, calc-keypad-x-right-click): Ditto.
	(calc-keypad-press): Use `unread-command-events' instead of
	`unread-command-char'.

	* calc/calc-ext.el (calc-init-extensions): Update autoload names
	to match files renamed on initial calc import.

2001-11-12  Pavel Jan,Am(Bk  <Pavel@Janik.cz>

	* textmodes/flyspell.el (flyspell-default-dictionary):
	Fix previous change.

2001-11-12  Richard M. Stallman  <rms@gnu.org>

	* textmodes/flyspell.el (flyspell-default-dictionary):
	Fix custom type.

2001-11-11  Richard M. Stallman  <rms@gnu.org>

	* calendar/solar.el (solar-sunrise-and-sunset):
	Exchange the two extreme values of day-length.

	* progmodes/sh-script.el (sh-must-be-shell-mode):
	Allow modes derived from sh-mode.

	* emacs-lisp/checkdoc.el (checkdoc-file-comments-engine):
	Turn off error in some re-search-forward calls.

	* replace.el (query-replace-skip-read-only): New variable.
	(perform-replace): If that variable is non-nil, ignore matches
	that have a read-only property.

	* derived.el (define-derived-mode): Doc fix.

	* server.el (server-buffer-done): Test of server-existing-buffer
	was backwards.
	(server-existing-buffer): Doc fix.

	* textmodes/flyspell.el (flyspell-default-dictionary):
	Allow nil as value, and make nil the default.

2001-11-11  Eli Zaretskii  <eliz@is.elta.co.il>

	* menu-bar.el (menu-bar-edit-menu): Don't use x-selection-exists-p if
	it is not fboundp.
	(clipboard-yank): Ditto.

2001-11-11  Colin Walters  <walters@verbum.org>

	The following changes are based on patches from
	Eli Zaretskii <eliz@is.elta.co.il>, Kai Gro,A_(Bjohann
	<Kai.Grossjohann@CS.Uni-Dortmund.DE>, and others.

	* calc/calc.el (toplevel): Require calc-macs.
	(calc-minibuffer-size): New.
	(calcDigit-nondigit): Use it instead of `buffer-size'.
	(calcDigit-backspace): Likewise.
	(calcDigit-nondigit): Use `minibuffer-contents' instead of
	`buffer-string'.
	(calc-minibuffer-contains): Use `minibuffer-prompt-end' instead of
	`point-min'.
	(calcDigit-key): Use `calc-minibuffer-contains' instead of a
	`save-excursion'.

	* calc/calc-macs.el (calc-record-compilation-date-macro): Return a
	simple `setq' form.

	* calc/calc-ext.el: (toplevel): Require calc.
	(calc-fancy-prefix-map): New.
	(calc-fancy-prefix): Use it.
	(calc-fancy-prefix-other-key): New.

	* calc/calc-aent.el (toplevel): Require calc-macs during compilation.
	(calc-do-quick-calc): Use `frame-width' instead of `screen-width'.
	(calcAlg-edit): Use `minibuffer-contents' instead of `buffer-string'.
	(calcAlg-enter): Likewise.
	(calcAlg-enter): Use `minibuffer-prompt-end' instead of `point-min'.

2001-11-10  Richard M. Stallman  <rms@gnu.org>

	* abbrev.el (read-abbrev-file): Don't set save-abbrevs.
	(quietly-read-abbrev-file): Doc fix.

	* startup.el (command-line): Read standard abbrev
	file (abbrev-file-name), if it exists.

	* files.el (save-abbrevs): Default value is t.

	* progmodes/compile.el (compile-goto-error): Fix previous change
	in the case where subsequent errors have not been parsed yet
	because they are in a different source file.

2001-11-10  Peter Kleiweg  <kleiweg@let.rug.nl>

	* progmodes/ps-mode.el (ps-mode-font-lock-keywords-1):
	Merge two regular expressions into one.
	(ps-mode): Make local bindings for `comment-start' and
	`comment-start-skip'.
	(ps-mode-looking-at-nested): Simplify an if-else construct;
	use `set-match-data' to set the result.

2001-11-10  Richard M. Stallman  <rms@gnu.org>

	* textmodes/flyspell.el (flyspell-correct-word/local-keymap):
	Function deleted.
	(flyspell-correct-word): Old definition deleted.
	(flyspell-correct-word/mouse-keymap): Renamed to flyspell-correct-word.
	All references renamed too.

2001-11-10  Gerd Moellmann  <gerd@gnu.org>

	* Makefile.in (finder_setwins, setwins): Exclude Calc.

2001-11-09  Per Abrahamsen  <abraham@dina.kvl.dk>

	* wid-edit.el (checklist): Removed `:menu-tag'.
	(radio-button-choice): Ditto.
	(editable-list): Ditto.

2001-11-09  Pavel Jan,Am(Bk  <Pavel@Janik.cz>

	* play/gomoku.el: Move definitions of constants to the beginning
	of file, before their use.

2001-11-09  Richard M. Stallman  <rms@gnu.org>

	* textmodes/flyspell.el: Use the keymap property
	instead of local-map, and don't use a minor-mode map.
	(flyspell-mode-map): Variable deleted.
	Don't mess with minor-mode-map-alist.
	(calling add-minor-mode): Specify nil for keymap.
	And always use add-minor-mode, now that it exists.
	(flyspell-overlay-keymap-property-name): Set it to `keymap'.
	(flyspell-mode-on): Don't locally bind flyspell-mouse-map
	or flyspell-local-mouse-map.
	(make-flyspell-overlay): Use flyspell-mouse-map directly.
	(flyspell-mode): Doc fix.
	(flyspell-mode-on): Don't call make-local-hook.

2001-11-09  Sam Steingold  <sds@gnu.org>

	* emacs-lisp/debug.el (debugger-make-xrefs):
	Add buttons to all symbols.

2001-11-09  Andre Spiegel  <spiegel@gnu.org>

	* vc.el: Add John David Smith to credits.

	Suggested by Kalle Olavi Niemitalo <kon@iki.fi>:

	* vc-hooks.el (vc-error-occured): Backquotified.
	(vc-file-prop-obarray): Use prime length for better efficiency.

	* vc.el (vc-clear-context): Fill obarray with 0, not nil.

2001-11-09  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (Info-file-list-for-emacs): Add entries for Calc.

2001-11-09  Miles Bader  <miles@gnu.org>

	* subr.el (functionp): Don't consider macros as functions.

2001-11-08  Miles Bader  <miles@gnu.org>

	* subr.el (functionp): Make work correctly for macros and unbound
	symbols.

	* comint.el (comint-send-input): Fix description of
	`comint-process-echoes' in the doc-string.

2001-11-08  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/mule.el (make-translation-table): Doc fix.
	Suggested by Alex Schroeder <alex@gnu.org>.

2001-11-07  Richard M. Stallman  <rms@gnu.org>

	* info.el (Info-fontify-node): Highlight every third menu item.

2001-11-07  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-edit.el (custom-face-value-create): Don't ignore the
	`customized-face' attribute when finding the current face spec.

2001-11-07  Stefan Monnier  <monnier@cs.yale.edu>

	* subr.el (with-local-quit): New macro.
	(make-syntax-table): Always inherit.
	(functionp): Be more careful when `object' is a symbol.

	* dabbrev.el (dabbrev-completion): Use "*Completions*".

2001-11-07  Paul Eggert  <eggert@twinsun.com>

	* dired.el (dired-move-to-filename-regexp):
	Do not distinguish between ASCII letters and non-ASCII characters.
	Don't allow comma except in the form "month day, year".
	Don't allow space between month name and comma.
	Clean up the code that checks for trailing period, comma, and space.
	Remove now-obsolete comments, and add more commentary about
	Japanese dates.
	Always gobble up trailing spaces, instead of doing it only sometimes.

2001-11-07  Miles Bader  <miles@gnu.org>

	* paren.el (show-paren-match-face): Add dark-background variant.

2001-11-06  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/lisp-mode.el (lisp-imenu-generic-expression): Paren typo.
	(lisp-mode-variables): Don't set paragraph-{start,separate}.
	Don't disable adaptive-fill-mode.
	(lisp-fill-paragraph): Use tab-width rather than 8.
	Prevent filling the first line of docstrings.

2001-11-06  Richard M. Stallman  <rms@gnu.org>

	* play/gomoku.el (gomoku): Doc fix.

	* jka-compr.el (jka-compr-partial-uncompress):
	Support an alternative of not using dd.
	(jka-compr-dd-program): Use defcustom to define this.
	(jka-compr-load-suffixes): Use defcustom.
	(jka-compr-mode-alist-additions): Use defcustom.

2001-11-06  Stefan Monnier  <monnier@cs.yale.edu>

	* font-lock.el (font-lock-match-c-style-declaration-item-and-skip-to-next):
	Also work when LIMIT is further than the end of line.

2001-11-06  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/quail.el (quail-update-leim-list-file): Print the
	offending file name if some of its quail-define-package forms is broken.

2001-11-05  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/lisp-mode.el (eval-last-sexp-1): Return the value
	of the evaluated form.

2001-11-05  Paul Eggert  <eggert@twinsun.com>

	* ls-lisp.el (ls-lisp-time-to-seconds): New function.
	(ls-lisp-format-time): Emulate GNU fileutils 4.1.1 ls, whose time
	stamps always line up by default.  Also, it uses a slightly
	different window to determine whether files are "recent".

2001-11-05  Andrew Innes  <andrewi@gnu.org>

	* makefile.w32-in (bootstrap-clean-CMD, bootstrap-clean-SH):
	Don't attempt to remake autoloads before nuking .elc files.

2001-11-04  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/lisp-mode.el (last-sexp-toggle-display): Cope if
	previous-single-property-change or next-single-char-property-change
	returns nil.

	* international/mule-cmds.el (set-locale-environment):
	Make it interactive; make arg optional.

	* international/mule-diag.el (help-funs): Require help-funs.

2001-11-04  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/internal.el (term-setup-hook): Add IT-setup-unicode-display.

2001-11-04  Miles Bader  <miles@gnu.org>

	* startup.el (fancy-splash-head): Reapply Gerd's hack to make the
	shadow of the splash image grey on a dark background instead of black.

2001-11-03  Stefan Monnier  <monnier@cs.yale.edu>

	* term.el (all faces): Don't (copy-face 'default <foo>).

	* term/xterm.el (function-key-map):
	Add entry for `ESC [ 3 ~' -> <delete>
	Add entries `ESC O 5 [ABCD]' -> C-{up,down,right,left}.
	Use inheritance so that .emacs and terminfo take precedence.

2001-11-03  Eli Zaretskii  <eliz@is.elta.co.il>

	* tooltip.el (tooltip-delay): Decrease to 0.7.
	(tooltip-hide-delay): Enlarge to 10.

2001-11-03  Richard M. Stallman  <rms@gnu.org>

	* startup.el (fancy-splash-tail): Explain how to recover
	from a crash, if there was a crash.
	(command-line-1): Reorganize display of startup screen,
	to simplify the logic.  Use a temp buffer for it.

2001-11-03  Eli Zaretskii  <eliz@is.elta.co.il>

	* frame.el (set-background-color, set-foreground-color):
	Call face-set-after-frame-default, to propagate the new colors to
	the frame's parameters alist.

	* calendar/timeclock.el (timeclock-out): Signal an error if
	timeclock-last-event is nil.

2001-11-02  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/fill.el (fill-context-prefix): Fix braino.

	* international/quail.el (quail-help):
	Use `help-buffer' and move `help-setup-xref' to beginning.

	* international/mule-cmds.el (describe-language-environment):
	Use `help-buffer' and move `help-setup-xref' to beginning.

	* international/mule-diag.el (list-character-sets)
	(sort-listed-character-sets, describe-character-set)
	(describe-coding-system, describe-fontset, list-fontsets):
	Use `help-buffer' and move `help-setup-xref' to beginning.
	(describe-char-after): Use `internal-describe-syntax-value'.

2001-11-02  Richard M. Stallman  <rms@gnu.org>

	* mouse.el (popup-menu): If the user refuses to select
	from a menu, don't try to invoke the menu.

2001-11-02  Miles Bader  <miles@gnu.org>

	* help-mode.el (help-xref): New button type.
	(help-function, help-variable, help-face, help-coding-system)
	(help-input-method, help-character-set, help-type, help-symbol)
	(help-back, help-info, help-customize-variable, help-customize-face)
	(help-function-def, help-variable-def): Use it as a supertype.
	Remove `action' property.

	* international/mule-diag.el (describe-character-set)
	(describe-coding-system): Pass correct args to `help-xref-button'.
	(sort-listed-character-sets): New button type.
	(list-character-sets): Use it.
	(list-charset-chars): New button type.
	(list-character-sets-1): Use it.

2001-11-01  Stefan Monnier  <monnier@rum.cs.yale.edu>

	* indent.el (tab-always-indent, indent-for-tab-command):
	Remove redundant `never' setting.

	* fill.el (fill-region-as-paragraph): Don't forget to skip
	over current whitespace before looking for a preceding space.

2001-11-01  Richard M. Stallman  <rms@gnu.org>

	* files.el (file-newest-backup): Don't pass backup file name
	thru file-name-sans-versions, because it never has version numbers.

	* textmodes/sgml-mode.el (sgml-xml-guess): Fix regexp
	to avoid ambiguous nested loops.

	* files.el (find-file-noselect): Offer to change buffer-read-only
	only when the file's read-only status has changed from before
	as well as disagreeing with the buffer's current status.
	(buffer-file-read-only): New var, local in all buffers.

	* buff-menu.el (buffer-menu): Doc fix.
	(buffer-menu-other-window): Doc fix.
	(list-buffers, list-buffers-noselect): Doc fix.

2001-11-01  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (command-line): If the terminal Emacs is running on
	has erase char set to ^H, use the Backspace key for deleting
	backward, and the Delete key for deleting forward.

2001-11-01  Miles Bader  <miles@gnu.org>

	* button.el (define-button-type): Make sure every user-defined
	button type has a supertype.

2001-10-31  Jason Rumney  <jasonr@gnu.org>

	* international/mule-cmds.el (locale-language-names): Add chs and
	cht as aliases for Chinese-GB and Chinese-BIG5.

2001-10-31  Richard M. Stallman  <rms@gnu.org>

	* bindings.el (mode-line-frame-identification): Add doc string.
	(mode-line-position, mode-line-modes): New variables.
	(mode-line-format): Use mode-line-position for the part
	that displays the position-in-buffer info.
	Use mode-line-modes for the part that displays major and minor modes.

2001-10-31  Sam Steingold  <sds@gnu.org>

	* emacs-lisp/debug.el (debugger-make-xrefs): New function.
	(debugger-setup-buffer): Call it.
	(debugger-mode-map): Bind RET and mouse-2.

2001-10-31  Pavel Jan,Am(Bk  <Pavel@Janik.cz>

	* startup.el: Document command line option --no-window-system
	instead of --no-windows.

2001-10-30  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/autoconf.el (autoconf-mode): Fix comment-start-skip.

	* font-lock.el (java-font-lock-syntactic-face-function): New fun.
	(font-lock-defaults-alist): Use it.
	From David Ponce <david.ponce@wanadoo.fr>

	* progmodes/perl-mode.el (perl-indent-line): Use `eq' to compare
	output of `char-after'.

	* bindings.el (ctl-x-map): Add binding for C-x (, C-x ) and C-x e.

	* simple.el (reindent-then-newline-and-indent): Insert the newline
	before indenting the first line.
	(undo-get-state, undo-revert-to-state): New funs.
	(shell-command): Don't kill the buffer even if empty.
	(transpose-subr-start1, transpose-subr-start2, transpose-subr-end1)
	(transpose-subr-end2): Remove.
	(transpose-subr): Add `special' arg and simplify.
	(transpose-subr-1): Rewrite.
	(do-auto-fill): Use fill-indent-according-to-mode and fill-nobreak-p.
	(rfc822-goto-eoh): Simplify.

2001-10-30  Richard M. Stallman  <rms@gnu.org>

	* enriched.el (enriched-face-ans): Fix previous change.

2001-10-30  Gerd Moellmann  <gerd@gnu.org>

	* international/iso-acc.el (iso-accents-compose): Remove a
	superfluous setq.

2001-10-30  Eli Zaretskii  <eliz@is.elta.co.il>

	* buff-menu.el (list-buffers-noselect): If the buffer's name
	starts with a blank, but it visits a file, do show it (for files
	whose names start with a blank).

2001-10-30  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/fill.el (sentence-end-double-space)
	(sentence-end-without-period): Move to paragraphs.el.
	(fill-indent-according-to-mode): Change default to t.
	(fill-context-prefix): Simplify control-flow and use a more
	sophisticated merge that unifies both previous checks.
	(fill-single-word-nobreak-p, fill-french-nobreak-p): New funs.
	(fill-nobreak-predicate): Make it into a defcustom'd hook.
	(fill-nobreak-p): New fun.
	(fill-region-as-paragraph): Use it.
	Handle `fill-indent-according-to-mode' slightly differently.
	(fill-individual-paragraphs-prefix): Simplify the control-flow.
	(fill-individual-paragraphs-citation): Fix.

	* textmodes/paragraphs.el (use-hard-newlines): Use define-minor-mode.
	(paragraph-start): Change default to the `text-mode' value.
	(sentence-end-double-space, sentence-end-without-period):
	Move from fill.el.
	(forward-paragraph): Use `parstart' and `parsep' for temp variables
	rather than rebinding `paragraph-start' and `paragraph-separate'.

	* indent.el (indent-line-function): Change default to indent-relative.
	(tab-always-indent): Add an `never' setting.
	(indent-according-to-mode): Handle `indent-relative' and
	`indent-relative-maybe' specially.
	(indent-for-tab-command): Rename `prefix-arg' to `arg'.
	Handle the `never' case for `tab-always-indent'.
	Don't call indent-according-to-mode for indent-relative' and
	`indent-relative-maybe'.
	(insert-tab): Rename `prefix-arg' to `arg'.
	(indent-region): Indent the first line as well.
	(indent-relative): Don't mark the buffer modified if the indentation
	is unchanged.

	* textmodes/text-mode.el (paragraph-indent-minor-mode):
	Don't set paragraph-separate.  Set paragraph-start more carefully.
	Set indent-line-function.
	(paragraph-indent-text-mode): Use it and define-derived-mode.
	(text-mode-map): Remove the \t binding.
	(text-mode): Simplify now that the default is more favorable.

2001-10-29  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/find-func.el (find-function-search-for-symbol):
	If the regexp doesn't match, use a looser one.
	(find-variable-noselect): Add `file' argument.

	* pcvs.el (cvs-mode-commit-hook): New hook.
	(cvs-mode-commit): Run it.

	* log-edit.el (log-edit): Run hook after `log-edit-files'.

	* emacs-lisp/edebug.el (delay-mode-hooks): Add edebug-spec.
	(edebug-instrument-function): Use `find-function-noselect'.

2001-10-29  Richard M. Stallman  <rms@gnu.org>

	* term.el (term-if-emacs19): Macro deleted.
	Callers changed to use progn instead.

	* frame.el (blink-cursor-mode): Doc fix.

	* files.el (find-backup-file-name): Use make-backup-file-name.

	* emacs-lisp/edebug.el (edebug-window-live-p): Always alias to
	window-live-p.
	(edebug-set-conditional-breakpoint): Unconditionally use
	the former Emacs >=19 definition.
	(edebug-mark): Define unconditionally.
	(edebug-eval-expression): Always call read-from-minibuffer
	and specify history list.
	(edebug-lemacs-specific): Override emacs-mark, edebug-window-live-p,
	edebug-set-conditional-breakpoint.
	(edebug-emacs-version-specific): Function deleted;
	do the job at top level.
	(edebug-emacs-19-specific): Function deleted, this is the default.

2001-10-29  Sam Steingold  <sds@gnu.org>

	* w32-fns.el (convert-standard-filename): Handle cygwin-specific
	"/cygdrive/LETTER/" pathnames.

2001-10-29  Eli Zaretskii  <eliz@is.elta.co.il>

	* faces.el (invert-face): Check for 'unspecified, not for nil,
	when testing whether face colors are not specified.
	From David.Kastrup@t-online.de (David Kastrup).
	(read-face-name): Doc fix.
	(make-face-bold, make-face-unbold, make-face-italic)
	(make-face-unitalic, make-face-bold-italic, invert-face):
	Remove trailing blank from the prompt passed to read-face-name.

2001-10-29  Sam Steingold  <sds@gnu.org>

	* emacs-lisp/bytecomp.el (byte-recompile-directory):
	Report numbers of files skipped and failed too.
	(byte-compile-file): Return 'no-byte-compile for skipped files.

2001-10-29  Kai Gro,A_(Bjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* log-view.el (log-view-mode-map): Bind `M-n' and `M-p', not `M n'
	and `M p'.

2001-10-29  Gerd Moellmann  <gerd@gnu.org>

	* international/iso-acc.el (iso-accents-compose): Push SECOND-CHAR
	as is on unread-command-events instead of `(SECOND-CHAR)'.

2001-10-29  Andre Spiegel  <spiegel@gnu.org>

	* vc.el: Mention vc-*-switches in backend API documentation.
	(vc-annotate): Adapt doc string to recent change.

2001-10-29  Gerd Moellmann  <gerd@gnu.org>

	* enriched.el (enriched-face-ans): Handle face attributes
	of the form `(FACE1 FACE2 ...)'.

	* dired-x.el (dired-omit-startup): Show ``Omit'' only in Dired buffers.

2001-10-29  Alex Schroeder  <kensanata@yahoo.com>

	* progmodes/sql.el (sql-mysql): Doc change by RMS.

	* progmodes/sql.el (sql-db2): Doc change.
	(sql-help): Doc change by Christian Egli <christian.egli@stest.ch>.
	(sql-mysql): Doc change by Christian Egli <christian.egli@stest.ch>.

2001-10-29  Gerd Moellmann  <gerd@gnu.org>

	* env.el (substitute-env-vars): Don't quote argument to `rx';
	it's a macro.

2001-10-28  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-start.el (recursive-load-depth-limit): Added.

2001-10-28  Richard M. Stallman  <rms@gnu.org>

	* textmodes/ispell.el (version18p, version20p): Vars deleted.
	All uses removed--assume Emacs version is >= 20.

	* mail/supercite.el (sc-emacs-features): Test for "Emacs 19"
	by really checking that it is not version 18.

	* emacs-lisp/lisp-mode.el (eval-defun): Doc fix.

2001-10-28  Miles Bader  <miles@gnu.org>

	* faces.el (face-attribute): Add INHERIT argument, consider face
	inheritance if it's non-nil.
	(face-attribute-merged-with): New function.
	(face-attribute-specified-or): New macro.
	(face-foreground, face-background, face-stipple): Add INHERIT
	argument.  Use `face-attribute-specified-or'.

2001-10-28  Stefan Monnier  <monnier@cs.yale.edu>

	* font-lock.el: Require `syntax'.
	(font-lock-defaults-alist): Don't define keywords for lisp languages.
	Use `c-font-lock-syntactic-face-function' for c languages.
	(font-lock-mode): Don't unset vars when turning the mode off.
	(font-lock-default-fontify-buffer): Don't unset vars at the end.
	(font-lock-extra-managed-props): New var.
	(font-lock-default-unfontify-region): Use it.
	(font-lock-apply-syntactic-highlight): Flush the syntax cache.
	Don't eval the value when there's no match.
	(font-lock-ppss-stats): New var.
	(font-lock-ppss): New fun.
	(font-lock-fontify-syntactically-region): Use it and syntax.ppss.
	(font-lock-apply-highlight): Allow `highlight' to set several props.
	(font-lock-set-defaults): Use dolist.
	(font-lock-unset-defaults): Remove.
	(font-lock-match-c-style-declaration-item-and-skip-to-next):
	Try to recognize prototypes using `foo P_ ((args))'.
	({c,c++,java,objc}-font-lock-keywords-{1,2,3}): Don't setq a defconst.
	(c-font-lock-keywords-2): Fix last change to still use Anders' trick.
	(c-font-lock-syntactic-face-function): New function.
	(font-lock-match-c++-style-declaration-item-and-skip-to-next)
	(c++-keywords): Use a more sophisticated regexp to handle
	shallowly nested templates.

2001-10-27  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/sgml-mode.el (sgml-empty-tags): New var.
	(sgml-tag): Use it.  Cleanup with `cond'.
	(sgml-tags-invisible): Make sgml-tags-invisible buffer-local.
	Mark the overlays and only delete those that are marked.
	(sgml-skip-close-p): Remove.
	(sgml-value): Replace sgml-skip-close-p with its definition.
	(html-tag-alist): Use sgml-xml a bit more.
	(html-mode): Set sgml-empty-tags.

	* textmodes/texnfo-upd.el: Use `when', `dolist', `push', ...
	(texinfo-update-node, texinfo-sequential-node-update):
	Don't bind the obsolete `auto-fill-hook'.
	(texinfo-multi-file-included-list,texinfo-multi-file-master-menu-list):
	Use `set-buffer' rather than `switch-to-buffer'.
	(texinfo-multi-file-update): Use "Top" rather than `up-node-name'.
	Use `set-buffer' rather than `switch-to-buffer'.

	* mail/sendmail.el (mail-mode-syntax-table): Let it inherit from
	text-mode-syntax-table.
	(mail-mode): Use define-derived-mode.
	Fix ordering of alternatives in adaptive-fill-regexp.
	(mail-mode-map): Don't rely on keymap's internal representation.

2001-10-27  Sam Steingold  <sds@gnu.org>

	* textmodes/sgml-mode.el (sgml-xml): Renamed from `html-xhtml'.
	(sgml-xml-guess): Extracted from `html-mode' and generalized.
	(sgml-mode-common): Call it.
	(sgml-mode, html-mode): Set `mode-name' based on `sgml-xml'.
	(sgml-tag, sgml-skip-close-p, html-tag-alist, html-line)
	(html-horizontal-rule, html-image, html-ordered-list):
	(html-unordered-list, html-list-item, html-paragraph):
	(html-checkboxes, html-radio-buttons): Use `sgml-xml' instead of
	`html-xhtml'.

2001-10-26  Masayuki Ataka  <ataka@milk.freemail.ne.jp>

	* textmodes/texinfmt.el (texinfo-format-ifnotinfo): New function.
	(ifnothtml): New alias.

2001-10-27  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/text-mode.el (text-mode): Use define-derived-mode.
	(toggle-text-mode-auto-fill): Use derived-mode-p.

2001-10-27  Gerd Moellmann  <gerd.moellmann@t-online.de>

	* net/ange-ftp.el (ange-ftp-send-cmd): Call fix-name-func for
	`mdtm'.  From "Forrest Cahoon" <forrest.cahoon@merrillcorp.com>.

2001-10-26  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/pc-win.el (x-frob-font-slant, x-frob-font-weight):
	Add make-obsolete cookies, to follow faces.el.

	These changes avoid warnings from the byte compiler in faces.el:

	* faces.el (internal-get-face): Use facep instead of the obsolete
	internal-find-face.
	(internal-frob-font-weight, internal-frob-font-slant):
	New defaliases for obsolete functions.
	(x-make-font-bold, x-make-font-demibold, x-make-font-unbold)
	(x-make-font-italic, x-make-font-oblique, x-make-font-unitalic)
	(x-make-font-bold-italic): Use internal-frob-font-weight and
	internal-frob-font-slant aliases instead of the obsolete
	x-frob-... functions.

2001-10-26  Sam Steingold  <sds@gnu.org>

	* textmodes/sgml-mode.el (html-mode): Set `html-xhtml' from the
	DOCTYPE; set `mode-name' based on it.
	(html-tag-alist): Use `html-xhtml' for "li", "dt" and "dd".
	(sgml-tag): Close empty tags in XHTML.

2001-10-26  Jason Rumney  <jasonr@gnu.org>

	* w32-fns.el: (w32-charset-info-alist): Use ANSI for iso10646-1
	when UNICODE is not defined.

2001-10-26  Sam Steingold  <sds@gnu.org>

	* font-lock.el (c-font-lock-keywords-2): Do not require labels to
	be alone on the line.

2001-10-26  Eli Zaretskii  <eliz@is.elta.co.il>

	* button.el (button): Special face definition for MS-DOS terminals.

2001-10-26  Sam Steingold  <sds@gnu.org>

	* progmodes/sh-script.el (sh-font-lock-syntactic-keywords):
	Protect the /= test by checking that the args are non-nil.
	(sh-font-lock-close-heredoc): Check eof for being non-nil.

2001-10-26  Tomas Abrahamsson  <tab@lysator.liu.se>

	* textmodes/artist.el (artist-version): 1.2.4.
	(artist-butlast-fn): New variable.
	(artist-butlast): New function.
	(artist-ellipse-mirror-quadrant): Use it.
	(artist-mouse-draw-poly): Use nil for `point-list'.
	(artist-mouse-draw-poly): Check for point-list being nil.

2001-10-26  Peter Kleiweg  <kleiweg@let.rug.nl>

	* progmodes/ps-mode.el (ps-mode-print-function): Remove quote for
	lambda expression.
	(ps-mode-menu-main): Submenu with options on/off was replaced with
	a toggle button.
	(ps-mode, ps-run-mode): Define with `define-derived-mode'
	(ps-mode): Autoload cookie added on same line as comment
	(ps-mode-tabkey, ps-mode-backward-delete-char):
	(ps-mode-r-balance): Replace `delete-horizontal-space' and
	`indent-to' with `indent-line-to'
	(ps-mode-print-buffer, ps-mode-print-region): Use `funcall'
	instead of `eval'.
	(ps-mode-print-region): Use `with-temp-buffer'.
	(ps-run-start): Use of `mapconcat'.  Use `apply' instead of `eval'.
	(numerous places): Add back-tick and tick around names in
	docstrings, fix punctuation in docstrings, remove trailing spaces.

2001-10-25  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/sgml-mode.el (sgml-font-lock-keywords-1): Ignore comments.
	(sgml-font-lock-keywords-2): Use `eval'.  Moved from sgml-mode-common.
	(sgml-font-lock-syntactic-keywords): New var.
	(sgml-mode-common): Drop the two args.
	Don't make buffer-local variables that aren't used.
	Don't set sgml-font-lock-keywords-2 now that it uses `eval instead.
	Don't set `before-string' props from sgml-display-text.
	(sgml-mode): Use define-derived-mode.
	(sgml-tags-invisible): Use sgml-display-text.
	(sgml-quote): New command.
	(html-tag-alist): Add args for `span'.
	(html-mode): Use define-derived-mode.
	Set sgml-display-text and sgml-tag-face-alist.

2001-10-25  Sam Steingold  <sds@gnu.org>

	* add-log.el (add-log-always-start-new-record): New user option.
	(add-change-log-entry): Use it.

2001-10-25  Richard M. Stallman  <rms@gnu.org>

	* progmodes/etags.el (tags-query-replace): Make tags-loop-scan
	bind case-fold-search if FROM is not all lower case.

2001-10-25  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (normal-top-level): Check for frame-initial-frame
	only if it's really used.

	* mail/mh-utils.el (mh-recenter): Call recenter with arg `(4)'.

	* progmodes/compile.el (compilation-parse-errors-filename-function):
	New variable.
	(compilation-parse-errors): Use it.

2001-10-25  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/checkdoc.el (checkdoc-eval-defun): Call eval-defun
	interactively so that C-u M-C-x still does edebug.
	(checkdoc-sentencespace-region-engine): Don't force a double-space
	after `.' if it doesn't look like an end-of-sentence.
	(debug-ignored-errors): Add `disambiguate ...'.

2001-10-24  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/texinfo.el (texinfo-environments)
	(texinfo-environment-regexp): Hoist.
	(texinfo-font-lock-keywords): Use `italic' and `bold' faces.
	Only highlight the menu name in menu items.
	Setup `@foo ... @end foo' as text clones.
	(texinfo-clone-environment): New function.
	(texinfo-mode): Simplify auto-fill-inhibit-regexp.
	(texinfo-insert-block): Simplify.
	(texinfo-insert-quote): Insert a plain " if preceded by \ or if
	the command is repeated.
	(texinfo-last-unended-begin, texinfo-next-unmatched-end): New funs.
	(texinfo-insert-@end): Simplify.

	* textmodes/texnfo-upd.el (texinfo-section-types-regexp)
	(texinfo-section-level-regexp, texinfo-subsection-level-regexp)
	(texinfo-subsubsection-level-regexp)
	(texinfo-update-menu-same-level-regexps)
	(texinfo-update-menu-higher-regexps)
	(texinfo-update-menu-lower-regexps): Hoist to eliminate warnings.

	* derived.el (define-derived-mode): Use {delay,run}-mode-hooks.
	(derived-mode-p): Autoload.

	* subr.el (delay-mode-hooks, delayed-mode-hooks, run-mode-hooks):
	New vars and functions.
	(text-clone-maintain, text-clone-create): New functions.

2001-10-25  Miles Bader  <miles@gnu.org>

	* facemenu.el (facemenu-add-new-face): Fix variable names.

2001-10-24  Richard M. Stallman  <rms@gnu.org>

	* facemenu.el (facemenu-unlisted-faces): Improve doc strings
	of t and nil values.
	(facemenu-set-face): Handle START and END interactively.
	(facemenu-set-foreground): Don't use a face; specify color directly.
	(facemenu-set-background): Likewise.
	(facemenu-set-face-from-menu): Doc fix.
	(facemenu-active-faces): Use face-attribute-vector
	to handle bare attributes not in faces.
	(facemenu-get-face): Don't handle face names fg:... and bg:...
	specially.
	(facemenu-add-new-face): New argument MENU.
	New way to handle adding colors to the color menus.

	* env.el (substitute-env-vars): Quote the arg to rx.

2001-10-24  Sam Steingold  <sds@gnu.org>

	* mouse.el (mouse-buffer-menu-mode-groups): Added "Version
	Control" and "SGML" groups.

2001-10-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-engine.el (c-beginning-of-member-init-list):
	Better handling of C++ template args to avoid confusion with `<'
	and `>' used as operators in member init expressions.

2001-10-24  Gerd Moellmann  <gerd@gnu.org>

	* replace.el (perform-replace): Move START and END parameters
	to the end of the argument list and make them optional.

	* progmodes/ebrowse.el, progmodes/etags.el: Adapt to change in
	perform-replace.

	* international/fontset.el (x-must-resolve-font-name): New function.
	(x-complement-fontset-spec): Use it.

2001-10-23  Stefan Monnier  <monnier@cs.yale.edu>

	* uniquify.el (uniquify-get-proposed-name): Fix (.. "usr" "/usr" 0).

	* progmodes/compile.el (compile-mouse-goto-error, compile-goto-error):
	Turn caadr into caar of cdr.

2001-10-23  Gerd Moellmann  <gerd@gnu.org>

	* info.el (Info-fontify-node): Bind down-mouse-{1,2} instead
	of mouse-{1,2} since dragging is on the down event.

	* play/doctor.el (make-doctor-variables): Remove a '($ please)'.

	* mail/mh-utils.el (mh-recenter): Call `recenter' with arg t
	if ARG is nil.

	* desktop.el (desktop-last-buffer): New variable.
	(desktop-create-buffer): Set it.
	(desktop-read): Bind it and switch to that buffer.

2001-10-22  Gerd Moellmann  <gerd@gnu.org>

	* progmodes/compile.el (compilation-set-window-height):
	Select old window only if it's still live.

2001-10-22  Pavel Jan,Am(Bk  <Pavel@Janik.cz>

	* help-mode.el (help-buffer): Remove debugging code.
	From Stefan Monnier <monnier@cs.yale.edu>.

2001-10-22  Eli Zaretskii  <eliz@is.elta.co.il>

	* files.el (file-name-sans-extension, file-name-extension):
	Don't count the leading dots in file names as signaling an extension.

2001-10-22  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-diff-switches): Doc rewritten.

2001-10-22  Eli Zaretskii  <eliz@is.elta.co.il>

	* tooltip.el (tooltip-set-param): Doc fix.

	* textmodes/sgml-mode.el (sgml-mode-map): Bind 8-bit codes above
	127 to sgml-maybe-name-self.
	(sgml-name-8bit-mode): Doc fix.
	(sgml-char-names-table): New variable.
	(sgml-name-char): Support non-ASCII and mule-unicode-*
	characters.  Doc fix.
	(sgml-maybe-name-self): Convert unibyte characters to multibyte.

	* tooltip.el (tooltip-x-offset, tooltip-y-offset): Mention in the
	doc string the effect of `left' and `top' parameters in
	tooltip-frame-parameters, the default values, and the units.
	(tooltip-frame-parameters): Mention `top' and `left' in the doc string.
	(tooltip-show): Mention in the doc string the `top' and `left'
	parameters in tooltip-frame-parameters, and x-max-tooltip-size.

2001-10-22  Andre Spiegel  <spiegel@gnu.org>

	Add autoscaling support for vc-annotate.
	From J.D. Smith <jdsmith@alum.mit.edu>.

	* vc.el (vc-annotate-display-default): Accept colormap scaling
	ratio (now deprecated).
	(vc-annotate-display-autoscale): Added.
	(vc-annotate-add-menu): New autoscaling menu options "Span to
	Oldest" and "Span Oldest->Newest".  Easymenu support added for
	toggle menus driven by customize variable `vc-annotate-display-mode'.
	(vc-annotate-display-select): Added.
	(vc-annotate): Changed temp-buffer-show-function to
	`vc-annotate-display-select'.
	(vc-annotate-display): Removed arguments BUFFER and BACKEND.
	Added argument OFFSET.  Instead of backend function, calls now
	generic `vc-annotate-difference'.
	(vc-annotate-difference): Added as generic function instead of
	backend-specific function.  No longer takes argument POINT, but
	instead accepts a time OFFSET.
	(vc-default-annotate-current-time): Added.

	* vc-cvs.el (vc-cvs-annotate-difference): Removed to generic
	version in vc.el, with
	(vc-cvs-annotate-current-time): Added, as override of default.
	(vc-cvs-annotate-time): Added.  Taken mostly from the (now removed)
	`vc-cvs-annotate-difference'.

2001-10-22  Gerd Moellmann  <gerd@gnu.org>

	* saveplace.el (save-place): Require `saveplace'.

	* progmodes/cwarn.el (cwarn-font-lock-feature-keywords-alist):
	Use `sexp' for :value-type instead of `face'.

2001-10-21  Eli Zaretskii  <eliz@is.elta.co.il>

	* mail/rmailsum.el (rmail-summary-font-lock-keywords): Fix the
	regexps due to 5-digit message IDs.

2001-10-21  Jason Rumney  <jasonr@gnu.org>

	* term/w32-win.el (redisplay-dont-pause): Don't set.

2001-10-21  Miles Bader  <miles@gnu.org>

	* help-funs.el (help-manyarg-func-alist): Variable removed.

2001-10-21  Miles Bader  <miles@gnu.org>

	* help-funs.el (help-manyarg-func-alist): Remove entries for
	`insert', `insert-and-inherit', `insert-before-markers',
	`insert-before-markers-and-inherit', `message', `message-box',
	`message-or-box', `propertize', `format', `encode-time', `append',
	`concat', `vconcat', `nconc', `widget-apply', `make-hash-table',
	`insert-string', `ml-if', `ml-provide-prefix-argument', and
	`ml-prefix-argument-loop'.

2001-10-21  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-diff-internal, vc-coding-system-for-diff)
	(vc-default-diff-tree): New functions.
	(vc-version-diff): Use them.  As a result, coding systems are now
	set up properly for all sorts of diffs, and tree diffs can now
	also be done locally.
	(vc-diff): With a prefix argument, don't require that it's called
	from a buffer under version control.
	(diff-switches): Remove duplicate definition.

	* vc-cvs.el (vc-cvs-diff-tree): New function.

2001-10-21  Miles Bader  <miles@gnu.org>

	* help-funs.el (help-manyarg-func-alist): Remove entries for
	`list', `vector', `make-byte-code', `call-process',
	`call-process-region', `string', `+', `-', `*', `/', `max', `min',
	`logand', `logior', and `logxor'.

	* wid-edit.el (checkbox): Swap bg/fg colors in image, and invert
	image bits to compensate.  Use `make-string' instead of
	`make-bool-vector' (XBM apparently wants byte-aligned rows).

2001-10-20  Kim F. Storm  <storm@cua.dk>

	* simple.el (kill-ring-save): Don't show extent of copied region
	if using transient-mark-mode and region is fully visible.

See ChangeLog.9 for earlier changes.

;; Local Variables:
;; coding: iso-2022-7bit
;; End:

    Copyright (C) 2001, 2002 Free Software Foundation, Inc.
  Copying and distribution of this file, with or without modification,
  are permitted provided the copyright notice and this notice are preserved.
