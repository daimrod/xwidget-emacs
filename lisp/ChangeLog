2001-01-26  Dave Love  <fx@gnu.org>

	* progmodes/delphi.el (delphi-comment-face, delphi-string-face) 
	(delphi-keyword-face, delphi-other-face): Fix :type.

	* textmodes/flyspell.el: Doc fixes.  Add :version to new options.

	* mail/feedmail.el (feedmail): Add :link.
	(feedmail-send-it): Doc fix.

	* mail/sendmail.el: Doc fixes.
	(sendmail-send-it): Fix the non-ASCII regexp and use
	rfc2047-encode-string.

	* dired.el, dired-aux.el: Revert last change.

2001-01-26  Gerd Moellmann  <gerd@gnu.org>

	* makefile.w32-in (DONTCOMPILE): Add various term files.

2001-01-26  Dave Love  <fx@gnu.org>

	* Makefile.in (DONTCOMPILE): Add various term files.

2001-01-26  Gerd Moellmann  <gerd@gnu.org>

	* man.el (Man-default-man-entry, Man-mode): Doc fix.

	* startup.el (display-startup-echo-area-message): Make sure
	the echo area is resized to fit the size of the startup
	message.

	* gud.el (gud-perldb-massage-args): Avoid nreverse'ing a list
	part of which is a constant.

2001-01-26  Eli Zaretskii  <eliz@is.elta.co.il>

	* loadup.el (Top-level) [ms-dos]: Don't load international/ccl
	twice.

2001-01-26  Richard M. Stallman  <rms@caffeine.ai.mit.edu>

	* simple.el (next-line): Don't let `newline' expand abbrevs.
	Simplify slightly.
	(open-line): Don't let `newline' expand abbrevs.

2001-01-25  John Wiegley  <johnw@gnu.org>

	* eshell/esh-util.el (eshell-ange-ls-uids): Changed use of `alist'
	to `repeat' in the :type field.

	* pcomplete.el (pcomplete-file-ignore): Changed a :type field to
	allow a choice of regexp or nil.
	(pcomplete-dir-ignore): Same.

	* eshell/em-unix.el (eshell/occur): Fixed bug causing `occur' (as
	a command) to always fail.

2001-01-25  Gerd Moellmann  <gerd@gnu.org>

	* iswitchb.el (iswitchb-make-buflist): When nconc'ing lists, don't
	discard the result.
	(iswitchb-to-end): Likewise.

2001-01-25  Sam Steingold  <sds@gnu.org>

	* vc-cvs.el (vc-cvs-mode-line-string): Doc & comment fix.
	Require vc.

2001-01-25  Stefan Monnier  <monnier@cs.yale.edu>

	* smerge-mode.el (smerge-font-lock-keywords): Relax submatch 1.

	* emacs-lisp/easy-mmode.el (define-minor-mode): Docstring fix.

2001-01-25  Dave Love  <fx@gnu.org>

	* lisp/international/mule-diag.el (describe-char-after): Doc fix.
	(describe-coding-system): Tweak the English text.

	* loadup.el: Preload international/ccl for utf-8.

2001-01-25  Eli Zaretskii  <eliz@is.elta.co.il>

	* mail/rmail.el (rmail-redecode-body): Doc fix.

2001-01-25  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el (reset-language-environment): Reset
	coding-category-utf-8 to mule-utf-8.

	* international/mule-conf.el (coding-category-utf-8): Initialize
	to mule-utf-8.

	* loadup.el: Preload international/utf-8.

	* international/utf-8.el: New file.

2001-01-24  Stefan Monnier  <monnier@cs.yale.edu>

	* diff-mode.el (diff-mode): Disable preliminary support for `compile'.

2001-01-24  Sam Steingold  <sds@gnu.org>

	* dired.el (dired-replace-in-string): Removed.
	(dired-sort-toggle): Use `replace-regexps-in-string'
	instead of `dired-replace-in-string'.

	* dired-aux.el (dired-shell-stuff-it, dired-rename-subdir)
	(dired-rename-subdir-2, dired-insert-subdir-doinsert): Ditto.

	* gs.el (gs-replace-in-string): Removed.
	(gs-options): Use `replace-regexps-in-string'
	instead of `gs-replace-in-string'.

2001-01-24  Eli Zaretskii  <eliz@is.elta.co.il>

	* mail/emacsbug.el (report-emacs-bug): Mention the fact that the
	bug report is mailed to an email list and posted to a news group.

2001-01-24  Gerd Moellmann  <gerd@gnu.org>

	* comint.el (comint-replace-by-expanded-history-before-point): Fix
	change of 2000-08-03 to move point to the start of the line again.

	* startup.el (tool-bar-images-pixel-height): New variable.
	(command-line): After loading the user's init file, when
	tool-bar-mode is on, increase the frame's size by some lines for
	the tool-bar.

	* frame.el (frame-initialize): Create the initial frame invisible.

2001-01-24  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* language/chinese.el (chinese-iso-8bit): MIME:GB2312.
	(chinese-big5): MIME:Big5.

2001-01-24  Gerd Moellmann  <gerd@gnu.org>

	* international/mule-cmds.el (universal-coding-system-argument):
	Handle commands with prefix args.

2001-01-24  Edward M. Reingold  <reingold@emr.cs.uiuc.edu>

	* calendar/diary-lib.el (diary-float): Fix case of MONTH
	being a list of numbers.
	(diary-mail-entries): Rewritten.

2001-01-23  Dave Love  <fx@gnu.org>

	* international/mule.el (make-coding-system): Fix typo.

	* textmodes/outline.el (outline-mode) <font-lock-defaults>: Add
	backward-paragraph as font-lock-beginning-of-syntax-function.

2001-01-23  Eli Zaretskii  <eliz@is.elta.co.il>

	* font-lock.el (font-lock-mode): Doc fix.

2001-01-23  Kenichi Handa  <handa@etl.go.jp>

	* international/mule.el (make-translation-table): Fix docstring.

2001-01-22  Eli Zaretskii  <eliz@is.elta.co.il>

	* mail/rmail.el (rmail-redecode-body): New function.

	* icomplete.el (icomplete-minibuffer-setup-hook): Doc fix.

2001-01-22  Gerd Moellmann  <gerd@gnu.org>

	* isearch.el (isearch-lazy-highlight-case-fold-search)
	(isearch-lazy-highlight-regexp): New variables.
	(isearch-lazy-highlight-cleanup): Update lazy highlight if
	case-fold search or regexp search has been toggled.

	* wid-edit.el (widget-button-click): Avoid a save-excursion
	around running a global binding.

	* isearch.el (isearch-lazy-highlight-initial-delay): Set default
	to 0.25.

2001-01-20  Miles Bader  <miles@gnu.org>

	* cus-edit.el (custom-face-save): Do post-processing on the face's
	new value like `custom-face-set' does.

2001-01-19  Eli Zaretskii  <eliz@is.elta.co.il>

	* mail/emacsbug.el (report-emacs-bug): Report the value of
	LC_CTYPE, not LC_TYPE.

	* isearch.el (isearch-forward): Add isearch-toggle-case-fold,
	isearch-toggle-regexp and isearch-edit-string to doc string.

2001-01-19  Gerd Moellmann  <gerd@gnu.org>

	* textmodes/texinfo.el (texinfo-mode): Use backward-paragraph
	as font-lock-beginning-of-syntax-function in font-lock-defaults.

	* jit-lock.el (jit-lock-fontify-now): Don't bind
	font-lock-beginning-of-syntax-function to nil.

2001-01-19  Eli Zaretskii  <eliz@is.elta.co.il>

	* mail/emacsbug.el (report-emacs-bug): Report values of
	locale-coding-system, default-enable-multibyte-characters, and the
	environment variables LC_ALL, LC_TYPE, and LANG.

2001-01-19  Gerd Moellmann  <gerd@gnu.org>

	* font-lock.el (font-lock-default-fontify-region): Fix last
	change.

	* font-lock.el (font-lock-multiline): Default to nil.
	(font-lock-default-fontify-region): If font-lock-multiline is
	nil, don't check the property `font-lock-multiline'.

	* jit-lock.el (jit-lock-after-change): If font-lock-multiline
	is nil, don't check the `font-lock-multiline' text property.

2001-01-19  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper.el: Call initial-major-mode on startup.

	* ediff.el (ediff-patch-file): Use better defaults.

	* ediff-vers.el: Fix for 8+3 DOS file systems.

2001-01-19  Colin Walters <walters@cis.ohio-state.edu>

	* ediff-util.el (ediff-compare-custom-diffs-maybe): Put diff in
	diff mode, if available.

2001-01-19  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff-hook.el (ediff-xemacs-init-menus): Fixed add-menu-button.

	* ediff-init.el (subst-char-in-string): Define and use it, unless
	it's already defined.

2001-01-18  Gerd Moellmann  <gerd@gnu.org>

	* tooltip.el (tooltip-hide-delay): New user-option.
	(tooltip-show): Use tooltip-hide-delay instead of the default.

2001-01-18  Kenichi Handa  <handa@etl.go.jp>

	* mail/sendmail.el (mail-setup): Call set-buffer-multibyte because
	kill-local-variable doesn't work for enable-multibyte-characters.

2001-01-17  Dave Love  <fx@gnu.org>

	* ediff-init.el (ediff-before-setup-hook)
	(ediff-merge-filename-prefix): Add :version.

	* international/latin1-disp.el: Require disp-table.
	(latin1-display): Fix :set.

	* net/eudc-vars.el (eudc-server, eudc-protocol): Fix :type.

2001-01-17  Gerd Moellmann  <gerd@gnu.org>

	* isearch.el (isearch-lazy-highlight-initial-delay)
	(isearch-lazy-highlight-interval): Default to 0.

2001-01-17  Bob Glickstein  <bobg@zanshin.com>

	* isearch.el (isearch-highlight): Set isearch-overlay priority to
	1 here rather than each time through
	isearch-lazy-highlight-new-loop.
	(isearch-lazy-highlight-max): Variable deleted.
	(isearch-lazy-highlight-max-at-a-time): New user variable, like
	isearch-lazy-highlight-max but controls a single invocation of
	isearch-lazy-highlight-update.
	(isearch-lazy-highlight-wrapped): Variable recreated.
	(isearch-lazy-highlight-window-start): New variable.
	(isearch-lazy-highlight-cleanup): Restored to behavior of
	before 2-Jan.
	(isearch-lazy-highlight-remove-overlays): Function deleted;
	behavior folded into isearch-lazy-highlight-cleanup.  "Keep"
	behavior removed.
	(isearch-lazy-highlight-new-loop): Restore old behavior of calling
	isearch-lazy-highlight-update in a loop rather than just once.
	Test isearch-invalid-regexp here and decide not to start a new
	loop, rather than testing it each time through
	isearch-lazy-highlight-update.
	(isearch-lazy-highlight-search): Function restored.
	(isearch-lazy-highlight-update): Get called in a timer loop again,
	but this time highlight more than one match each time through.
	Only highlight matches in the visible part of the window.  Start
	at point, move in the direction of the search, and wrap around at
	the edge of the window.  Use sit-for to force redisplay and ensure
	window-start is credible.  "Face suppressing" behavior removed;
	overlay priorities should make it unnecessary, right?
	(isearch-highlight): Face suppressing behavior removed.
	(isearch-dehighlight): Face suppressing behavior removed.
	(isearch-set-lazy-highlight-faces-at): Removed.

2001-01-17  Kenichi Handa  <handa@etl.go.jp>

	* language/european.el ("Latin-1"): Make the format of description
	about additional language environments same as that of Latin-2.

2001-01-16  Dave Love  <fx@gnu.org>

	* isearch.el (isearch-lazy-highlight): Add :version.

	* simple.el (backward-delete-char-untabify-method)
	(next-line-add-newlines): Add :version.

2001-01-16  Gerd Moellmann  <gerd@gnu.org>

	* bindings.el: Bind <backspace> and <delete> via function-key-map.
	Don't bind <delete> otherwise.

	* simple.el (delete-key-deletes-forward-mode): Bind <backspace>
	and <delete> via function-key-map.

	* textmodes/flyspell.el (mail-mode-flyspell-verify): Check in
	Subject line only if point is after the `Subject:'.

2001-01-16  Kenichi Handa  <handa@etl.go.jp>

	* language/japanese.el ("Japanese"): Add japanese-jisx0213-1 and
	japanese-jisx0213-2 in `charset' property of this lang. env.

	* language/european.el ("Latin-1"): Add description for Dutch and
	Spanish lang. env.

	* international/mule.el (decode-char): Fix conditions.
	(encode-char): Handle eight-bit-control too.
	(transform-make-coding-system-args): New function.
	(make-coding-system): Accept XEmacs style arguments for CCL base
	coding system.

2001-01-15  Gerd Moellmann  <gerd@gnu.org>

	* progmodes/etags.el (find-tag-noselect): Save the value of
	tags-file-name before switching buffers, for the case it has a
	buffer-local value.

2001-01-15  Alex Schroeder  <alex@gnu.org>

	* ansi-color.el (ansi-colors) <defgroup>: Fix :version.
	From Dave Love <fx@gnu.org>.
	(ansi-color-for-comint-mode): Fix :version.

2001-01-15  Alex Schroeder  <alex@gnu.org>

	* ansi-color.el (ansi-color-unfontify-region): Doc change.

2001-01-14  Eli Zaretskii  <eliz@is.elta.co.il>

	* dired.el (dired-insert-directory): If file-system-info fails,
	remove the " free " part, but don't signal an error.

2001-01-12  Sam Steingold  <sds@gnu.org>

	* bookmark.el (bookmark-maybe-historicize-string):
	Use new backquote syntax.

2001-01-12  Richard M. Stallman  <rms@caffeine.ai.mit.edu>

	* subr.el (last): Handle a list that doesn't end in nil.

2001-01-12  Sam Steingold  <sds@gnu.org>

	* emacs-lisp/lisp-mode.el (lisp-mode-shared-map): Bind `backspace'
	to `backward-delete-char-untabify'.

2001-01-12  Dave Love  <fx@gnu.org>

	* cus-edit.el (customize-menu-create): Fix the :filter following
	easymenu change.

	* wid-edit.el (function): Add :match-alternatives.
	(widget-color-action): Doc fix.

2001-01-12  Gerd Moellmann  <gerd@gnu.org>

	* calendar/calendar.el (calendar-basic-setup): Doc fix.

2001-01-12  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el (prefer-coding-system): Fix
	docstring.

	* international/ccl.el (define-ccl-program): Fix docstring.

2001-01-11  Dave Love  <fx@gnu.org>

	* international/mule-cmds.el (standard-display-european-internal):
	Set display table for 2208 as for 160.

	* progmodes/ada-mode.el (ada-popup-key): Fix last change.

	* progmodes/fortran.el (fortran-mode-map): Modify Customization
	entry for custom-menu-create change.
	(fortran-strip-sqeuence-nos): Make arg optional.  Fix regexp and
	don't cons it in the search loop.

	* imenu.el (imenu--truncate-items): Revert last change.

2001-01-11  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (Info-setup-header-line): If the node header includes
	either Next: or Prev: links, don't show the File: and Node: parts
	in the header line.

2001-01-11  Gerd Moellmann  <gerd@gnu.org>

	* comint.el (comint-goto-process-mark): Don't print a message
	when running in batch mode.

	* isearch.el (isearch-search): In the condition-case handler for
	`error', set isearch-invalid-regexp to the whole error message.

	* subr.el (eval-after-load): Call load-symbol-file-load-history to
	ensure that eval-after-load works for files dumped with Emacs.

	* help.el (load-symbol-file-load-history): New function extracted
	from function symbol-file.
	(symbol-file): Use it.

	* toolbar/save.xpm, toolbar/undo.xpm: Use the same colors as
	exit.xpm.

2001-01-11  Eli Zaretskii  <eliz@is.elta.co.il>

	* progmodes/etags.el (find-tag-interactive): If last-tag is nil,
	behave as if there were no prefix argument.
	(find-tag-noselect): If last-tag is nil, behave as if the NEXT-P
	argument were nil.

2001-01-11  Richard M. Stallman  <rms@gnu.org>

	* isearch.el (isearch-lazy-highlight-update):
	Don't look for more potential matches once maximum is exceeded.
	Use overlays-in to check correctly for overlap with current match.
	Ignore empty matches.

2001-01-11  Miles Bader  <miles@gnu.org>

	* textmodes/ispell.el (ispell-adjusted-window-height): New function.
	(ispell-overlay-window, ispell-help, ispell-show-choices)
	(ispell-command-loop): Use it instead of `window-height'.

2001-01-10  Gerd Moellmann  <gerd@gnu.org>

	* files.el (confirm-kill-emacs): New user-option.
	(save-buffers-kill-emacs): Ask for final confirmation before
	killing Emacs.

	* isearch.el (isearch-done): Set isearch-lazy-highlight-start
	to nil.

2001-01-10  Dave Love  <fx@gnu.org>

	* progmodes/etags.el (tags-apropos-additional-actions): Fix :type.

	* progmodes/sh-script.el (sh-imenu-generic-expression): Fix doc,
	:type.

	* hi-lock.el (hi-lock-exclude-modes): Fix :type.

	* calculator.el (calculator-number-digits): Fix :type.

	* vc-cvs.el (vc-cvs-header): Fix :type.
	* vc-rcs.el (vc-rcs-header): Fix :type.
	* vc-sccs.el (vc-sccs-header): Fix :type.

	* progmodes/ada-mode.el (ada-popup-key): Fix :type.

	* ansi-color.el (ansi-colors) <defgroup>: Fix :version.

	* eshell/esh-util.el (eshell-ange-ls-uids): Fix :type.

2001-01-10  Gerd Moellmann  <gerd@gnu.org>

	* simple.el (set-variable): Force a thorough redisplay for the
	case that the variable has an effect on the display, like
	`tab-width' has.

2001-01-10  Andre Spiegel  <spiegel@gnu.org>

	* vc.el: Add documentation for backend interface.

2001-01-10  Kenichi Handa  <handa@etl.go.jp>

	* font-lock.el (c-font-lock-extra-types): Add "Lisp_Object".

	* international/mule-conf.el (latin-extra-code-table): Set to t
	for \223 and \224.

2001-01-09  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el (locale-language-names): Map "es" to
	"Spanish" and "nl" to "Dutch".

2001-01-09  Gerd Moellmann  <gerd@gnu.org>

	* bindings.el (global-map): Bind <home> to beginning-of-line,
	<end> to end-of-line, C-<home> to beginning-of-buffer, and
	C-<end> to end-of-buffer.

	* language/european.el: Add Dutch and Spanish language info
	to be able to use the appropriate tutorials.

2001-01-09  Alex Schroeder  <alex@gnu.org>

	* ansi-color.el (ansi-color-process-output): Use markers instead
	of positions for start and end of region.
	(ansi-color-apply-on-region): Rewrote code to make it more robust.
	Previously, occasional mistakes happend when fontifying many
	chunks of output (eg. ls --color=yes /dev).  This happened
	whenever an overlay was created up to the end of the region, which
	coincided with the process-mark.  New text would then be added
	within that overlay instead of after it.
	(ansi-color-make-extent): Overlays are created with the property
	`modification-hooks' set to '(ansi-color-freeze-overlay).
	(ansi-color-freeze-overlay): New function.  When inserting text at
	the end of the overlay, the overlay will resize.

2000-01-09  Alex Schroeder  <alex@gnu.org>

	* ansi-color.el (ansi-color-process-output): Doc change.
	(ansi-color-unfontify-region): Doc change.  No longer installed
	automatically in font-lock-unfontify-region-function.
	(ansi-color-apply): Doc change.
	(ansi-color-apply-on-region): Use extents or overlays instead of
	text-properties.
	(ansi-color-make-extent): New function.
	(ansi-color-set-extent-face): New function.

2000-01-09  Alex Schroeder  <alex@gnu.org>

	* ansi-color.el (ansi-color-process): Removed, Emacs and XEmacs
	both use ansi-color-process-output, now.
	(ansi-color-process-output): Doesn't return string anymore.  It is
	installed in comint-output-filter-functions for both Emacs and
	XEmacs, now.
	(ansi-color-unfontify-region): Simplified code removing variables
	pos and start-ansi.
	(ansi-color-apply): Put text-property ansi-color before putting
	text-property face because ansi-color-unfontify-region is called
	immediately after the call to put-text-property.
	(ansi-color-context-region): Doc change.
	(ansi-color-filter-region): Simplified code.
	(ansi-color-apply-on-region): Changed start to start-marker, using
	a marker explicitly.  Put text-property ansi-color before putting
	text-property face because ansi-color-unfontify-region is called
	immediately after the call to put-text-property.

2000-01-09  Alex Schroeder  <alex@gnu.org>

	* ansi-color.el (ansi-color-faces-vector): Doc change.
	(ansi-color-for-comint-mode): Changed :type property to choice.
	(ansi-color-last-context): Removed.
	(ansi-color-process-output): Don't use ansi-color-last-context, as
	the main functions will store their context now.
	(ansi-color-context): Doc change.
	(ansi-color-filter-apply): Rewrote it based on ansi-color-apply.
	Uses ansi-color-context such that repeated calls will strip
	partial escape sequences, too.
	(ansi-color-apply): Simplified code.  Colorize end of string if
	face is not null.  Store context in new (FACE STRING) format, such
	that repeated calls will strip partial escape sequences, too.
	Append faces to face property using ansi-color-apply-sequence such
	that cumulative mode actually works.
	(ansi-color-context-region): New variable.
	(ansi-color-filter-region): Rewrote it based on
	ansi-color-apply-on-region.  Uses ansi-color-context-region such
	that repeated calls will strip partial escape sequences, too.
	(ansi-color-apply-on-region): Simplified code.  Colorize end of
	region if face is not null.  Store context in new (FACE POS)
	format, such that repeated calls will strip partial escape
	sequences, too.  Append faces to face property using
	ansi-color-apply-sequence such that cumulative mode actually
	works.
	(ansi-color-apply-sequence): New function.
	(ansi-color-get-face): When the default face is added to the list
	of faces, all previous settings are discarded and the list of
	faces is set to '(default).

2000-01-09  Alex Schroeder  <alex@gnu.org>

	* ansi-color.el (ansi-color-faces-vector): Use nil for the default
	face, such that ansi-color-apply and ansi-color-apply-on-region
	will do the right thing.
	(ansi-color-apply): Do the right thing, ie. if ansi-color-get-face
	returns nil, set the list of faces back to nil instead of
	appending the result of ansi-color-get-face to the front of the
	list.

2000-01-09  Alex Schroeder  <alex@gnu.org>

	* ansi-color.el (ansi-color-for-comint-mode): Doc change.
	(ansi-color-process): Doc change.
	(ansi-color-last-context): New buffer-local variable.
	(ansi-color-process-output): New function.  It is automatically
	added to comint-output-filter-functions if this is XEmacs.
	(ansi-color-unfontify-region): New optional parameter for XEmacs
	compatibility.  Check wether font-lock-syntactic-keywords is
	boundp before removing the syntax table text property, as XEmacs
	doesn't have it.
	(ansi-color-filter-region): Doc change.
	(ansi-color-apply-on-region): Doc change.
	(ansi-color-make-face): New function.  Compatibility layer for
	XEmacs.  Return temporary faces instead of cons cells for XEmacs.
	(ansi-color-make-color-map): Use ansi-color-make-face.
	(ansi-color-get-face): Avoid face text property '(nil) as results
	in an errow for XEmacs.

2000-01-09  Alex Schroeder  <alex@gnu.org>

	* ansi-color.el (ansi-color-unfontify-region): New function.  Uses
	text-property ansi-color in order to preserve fontification by
	ansi-color.  When the package is loaded, a lambda expression is
	put onto font-lock-mode-hook.  This lambda expression will check
	font-lock-unfontify-region-function and replace
	font-lock-default-unfontify-region with
	ansi-color-unfontify-region.
	(ansi-color-apply): Add text-property ansi-color in addition to
	text-property face.
	(ansi-color-apply-on-region): Add text-property ansi-color in
	addition to text-property face.
	(save-buffer-state): Copy of the macro that is also used by
	lazy-lock and font-lock.

	(ansi-color-for-comint-mode): New option.
	(ansi-color-for-comint-mode-on): Set ansi-color-for-comint-mode.
	(ansi-color-for-comint-mode-off): Ditto.
	(ansi-color-for-comint-mode-filter): Ditto.
	(ansi-color-process): New function.  Uses
	ansi-color-for-comint-mode to decide what to do.  This function is
	added to comint-preoutput-filter-functions when the package is
	loaded.

	(ansi-color-for-shell-mode-set): Removed.
	(ansi-color-for-shell-mode): Removed.

2000-01-09  Alex Schroeder  <alex@gnu.org>

	* ansi-color.el (ansi-color-for-shell-mode-set): New function with
	the lambda expression from the ansi-color-for-shell-mode :set
	property.  Additionally, modify shell-mode-hook to enable or
	disable font-lock-mode for future shell buffers.
	(ansi-color-for-shell-mode): The :set property calls
	ansi-color-for-shell-mode-set instead of a lambda expression.

2000-01-09  Alex Schroeder  <alex@gnu.org>

	* ansi-color.el (ansi-color-for-shell-mode): Doc change.
	(ansi-color-context): New variable.
	(ansi-color-apply): Save context between calls.

2001-01-09  Eli Zaretskii  <eliz@is.elta.co.il>

	* isearch.el (isearch, isearch-lazy-highlight-face): New
	definitions for face colors and attributes.

	* wid-edit.el (widget-choose): Call display-popup-menus-p instead
	of display-mouse-p.

2001-01-09  Kenichi Handa  <handa@etl.go.jp>

	* international/mule.el (make-coding-system): If the coding system
	accepts extra latin codes, register such codes as safe for the
	coding system.

2001-01-08  Richard M. Stallman  <rms@caffeine.ai.mit.edu>

	* emacs-lisp/bytecomp.el (byte-compile-log-1): In non-batch case,
	don't mention the file name or the date here, because they are
	logged at the start of the file.

2001-01-08  Richard M. Stallman  <rms@gnu.org>

	* mouse-drag.el (mouse-drag-should-do-col-scrolling):
	Change screen-width to frame-width.

2001-01-08  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (Info-search): Print the default as part of the prompt.

2001-01-08  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-default-latest-on-branch-p): New function, replaces
	constant implementations in backends.

	* vc-cvs.el (vc-cvs-latest-on-branch-p): Removed.
	(vc-cvs-checkout): Renamed arg WRITABLE to EDITABLE.

	* vc-rcs.el (vc-rcs-checkout, vc-rcs-cancel-version): Renamed arg
	WRITABLE to EDITABLE.

	* vc-sccs.el (vc-sccs-latest-on-branch-p): Removed.
	(vc-sccs-checkout, vc-sccs-cancel-version): Renamed arg WRITABLE
	to EDITABLE.

2001-01-08  Eli Zaretskii  <eliz@is.elta.co.il>

	* emacs-lisp/copyright.el (copyright-current-year): Now a defvar.
	(copyright, copyright-update): Compute the current year at run
	time.

2001-01-08  Gerd Moellmann  <gerd@gnu.org>

	* isearch.el (isearch-old-signal-hook): Removed.
	(isearch-mode): Add isearch-done to kbd-macro-termination-hook
	instead of setting signal-hook-function.
	(isearch-done): Remove isearch-done from kbd-macro-termination-hook.

2001-01-08  Kevin Gallagher  <kevingal@onramp.net>

	* emulation/edt.el: Update to version 4.0.  Provide support for
	EDT scroll margins at top and bottom of the window.  Provide an
	emulation of the EDT SUBS command (bound to GOLD-Enter, by
	default).  Enhance edt-quit, bound to GOLD-q by default, to warn
	user when file-related buffer modifications exist.  Provide
	support for running EDT Emulation in XEmacs.  Provide customize
	access to some user updatable variables.  Add Commentary section
	to file header.  Fixed a few minor bugs and cleaned up some code.

	* emulation/edt-mapper.el: Update to version 4.0.  Provide support
	for detecting a keypress that generates an ASCII key sequence.
	(Previously, only a keypress that generates a vector was
	recognized.)  Embed Window Manager name into name of the generated
	EDT Emulation initialization file since the initialization file is
	Window Manager specific.  Add Commentary section to file header.

2001-01-07  Eli Zaretskii  <eliz@is.elta.co.il>

	* mail/sendmail.el (mail-mode): Doc fix.

	* info.el (Info-goto-emacs-command-node): Doc fix.
	(Info-goto-emacs-key-command-node): Doc fix.

2001-01-06  Eli Zaretskii  <eliz@is.elta.co.il>

	* ediff-vers.el (noninteractive): Don't load generic-sc on MS-DOS
	systems without long file-name support.

2001-01-06  Andrew Innes  <andrewi@gnu.org>

	* makefile.w32-in (custom-deps): Set EMACSLOADPATH explicitly.

2001-01-06  Eli Zaretskii  <eliz@is.elta.co.il>

	* isearch.el (isearch-lazy-highlight-remove-overlays): Doc fix.
	(isearch-lazy-highlight-update): Doc fix.

	* ffap.el (ffap-bindings): Doc fix.

	* dired-x.el (dired-virtual-guess-dir): Doc fix.

2001-01-05  Dave Love  <fx@gnu.org>

	* emacs-lisp/cl-seq.el (remove, remq): Remove.

2001-01-05  Gerd Moellmann  <gerd@gnu.org>

	* mouse-drag.el (mouse-drag-safe-scroll): Bind
	scroll-preserve-screen-position to nil.

	* isearch.el (isearch-old-signal-hook): New variable.
	(isearch-mode): Set signal-hook-function to isearch-done.
	(isearch-done): Restore old signal-hook-function.

	* info.el (Info-fontify-node): Mark one more char as intangible.

2000-01-05  Kenichi Handa  <handa@etl.go.jp>

	* composite.el (compose-last-chars): New argument COMPONENTS.  If
	it is non-nil, compose preceding characters by compose-region with
	COMPONENTS.

	* international/quail.el (quail-input-string-to-events): New function.
	(quail-input-method): Convert input string to events here.
	(quail-start-translation): Return input string, not event list.
	(quail-start-conversion): Likewise.

2001-01-04  Gerd Moellmann  <gerd@gnu.org>

	* tooltip.el (tooltip-cancel-delayed-tip)
	(tooltip-start-delayed-tip): Renamed from tooltip-disable-timeout
	and tooltip-add-timeout.
	(tooltip-show): Set border color from faces's foreground.
	(tooltip-show-help-function): If called with the same help string
	as last time, do nothing.
	(tooltip-help-tips): Don't set tooltip-help-message to nil.

	* startup.el (fancy-splash-screens): Don't bind show-help-function
	to nil.

	* tooltip.el (tooltip-frame-parameters): Remove colors.
	(tooltip): New face
	(tooltip-set-param): New function.
	(tooltip-show): Set up color frame parameters from face `tooltip'.
	Display the tooltip text in face `tooltip'.

2001-01-04  Dave Love  <fx@gnu.org>

	* whitespace.el (whitespace-global-mode): Fix typo.

	* hilit19.el, mail/rnewspost.el, mail/rnews.el: Moved to obsolete.

2001-01-04  Eli Zaretskii  <eliz@is.elta.co.il>

	* help.el (help-for-help): Fix a typo in a doc string.  From
	kwzh@gnu.org (Karl Heuer).

2001-01-03  Dave Love  <fx@gnu.org>

	* dired-x.el: Doc fixes.  Maintainer change.
	(dired-guess-shell-gnutar, dired-guess-shell-znew-switches): Fix
	:type.
	(dired-guess-shell-alist-default): Don't use xloadimage for PNG.
	(dired-guess-shell-alist-user): Customize.
	(dired-x-help-address): Set to bug-gnu-emacs.
	(dired-x-maintainer, dired-x-file, dired-x-version): Deleted.
	(dired-default-directory): Renamed from default-directory.

	* hl-line.el (hl-line): Doc fix.

2001-01-03  Karl Fogel  <kfogel@red-bean.com>

	* mail/mail-hist.el (mail-hist-text-too-long-p): Doc fix.

2001-01-02  Richard M. Stallman  <rms@gnu.org>

	* isearch.el (isearch-lazy-highlight-cleanup): Arg now says
	to remove all the current alternative-match highlighting.
	If nil, remove only what's outside the current window.
	(isearch-lazy-highlight-remove-overlays): Take optional
	region within which NOT to remove them.
	(isearch-lazy-highlight-new-loop): Greatly simplified.
	(isearch-lazy-highlight-update): Find all the other occurrences
	visible in the window, in just one call.
	(isearch-lazy-highlight-start): Now holds start of region to scan.
	(isearch-lazy-highlight-end): Now holds end of region to scan.
	(isearch-lazy-highlight-wrapped): Variable deleted.
	(isearch-lazy-highlight-search): Function deleted.

2000-01-02  Andrew Innes  <andrewi@gnu.org>

	* w32-fns.el (convert-standard-filename): Do length check on name
	before aref.

2001-01-02  Dave Love  <fx@gnu.org>

	* progmodes/cperl-mode.el (cperl-invalid-face): Don't double-quote
	value.
	(cperl-init-faces): Allow cperl-invalid-face to be a normal face.

	* ls-lisp.el (ls-lisp) <defgroup>: Add :version.

	* net/browse-url.el (browse-url-filename-alist): Avoid backquote
	read syntax.

	* calendar/todo-mode.el (todo): Add :link, :version.
	(todo-save-top-priorities): Remove autoload cookie.
	(todo-add-category, todo-add-item-non-interactively)
	(todo-insert-item, todo-mode, todo-cp, todo-show): Fix autoload
	cookie.

2001-01-02  Gerd Moellmann  <gerd@gnu.org>

	* comint.el (comint-input-history-ignore): New variable.
	(comint-read-input-ring): Ignore entries matching
	comint-input-history-ignore.

2001-01-02  Eric M. Ludlam  <zappo@gnu.org>

	* emacs-lisp/lisp-mnt.el (lm-copyright-prefix): New Variable.
	(lm-copyright-mark): New function.
	(lm-crack-copyright): New function.
	(lm-verify): Check that the file has a copyright.
	Check that the file is copyright Free Software Foundation.

2000-12-30  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-diag.el (print-fontset): Indent font name by
	24 columns, not 25.

2000-12-29  Gerd Moellmann  <gerd@gnu.org>

	* textmodes/flyspell.el (mail-mode-flyspell-verify): Spell-check
	in Subject line.

	* mail/mailabbrev.el (mail-abbrevs-enable, mail-abbrevs-disable):
	Use mail-mode-hook instead of mail-setup-hook.  Otherwise
	continuing an interrupted message with C-u C-x m for instence,
	winds up in Mail mode without abbrevs.

2000-12-29  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Handle form feed better when ps-zebra-stripe-follow is
	non-nil.  Adding almost all customization variables on ps-setup.  Doc
	fix.
	(ps-print-version): New version number (6.3.3).
	(ps-end-with-control-d): Initialization fix.
	(ps-lines-printed): New var.
	(ps-skip-newline): New fun.
	(ps-setup, ps-prologue-file, ps-begin-job, ps-begin-page)
	(ps-next-line, ps-continue-line, ps-plot-region)
	(ps-generate-postscript-with-faces, ps-end-job): Code fix.

2000-12-29  Kenichi Handa  <handa@etl.go.jp>

	* international/fontset.el (x-complement-fontset-spec): Resolve
	ASCII font name so that the same family name is used for fonts
	registered in x-font-name-charset-alist.
	(create-fontset-from-fontset-spec): Adjusted for the above change.
	The name of fontset alias should be a unresolved ASCII font name.

2000-12-28  Gerd Moellmann  <gerd@gnu.org>

	* simple.el (delete-key-deletes-forward-mode): Bind backspace
	and delete in isearch-mode-map.

2000-12-28  Richard M. Stallman  <rms@gnu.org>

	* dired-x.el (dired-guess-shell-alist-default):
	Use xpdf instead of acroread.

2000-12-28  Kenichi Handa  <handa@etl.go.jp>

	* textmodes/artist.el (artist-butlast): Deleted.
	(artist-ellipse-mirror-quadrant): Use butlast instead of
	artist-butlast.

	* subr.el (butlast, nbutlast): Moved from cl.el to here.

	* emacs-lisp/cl.el (butlast, nbutlast): Moved to subr.el.

2000-12-27  Eli Zaretskii  <eliz@is.elta.co.il>

	From Francis J. Wright <F.J.Wright@maths.qmw.ac.uk>:

	* ls-lisp.el: Better support for the Mac and MS-Windows.
	(ls-lisp): New defgroup.
	(ls-lisp-emulation, ls-lisp-ignore-case, ls-lisp-dirs-first)
	(ls-lisp-verbosity, ls-lisp-use-insert-directory-program)
	(ls-lisp-support-shell-wildcards): New defcustoms.
	(ls-lisp-parse-symlink): New function.
	(insert-directory): Code to convert switches to a list and set up
	the wildcard argument copied from ls-lisp-insert-directory.
	(ls-lisp-insert-directory): New argument TIME-INDEX.  Add support
	for -C and -R switches.
	(ls-lisp-column-format): New function.
	(ls-lisp-delete-matching, ls-lisp-handle-switches)
	(ls-lisp-format-time): Add doc strings.
	(ls-lisp-handle-switches): Handle -U, -S, -X, and -F switches.
	Support ls-lisp-dirs-first.
	(ls-lisp-classify, ls-lisp-extension): New functions.
	(ls-lisp-format): Optionally support emulation of symlinks.
	Support -i, -s, and -G switches.

2000-12-27  Gerd Moellmann  <gerd@gnu.org>

	* textmodes/texinfo.el (texinfo-mode): Set fill-column to 70.

	* version.el (emacs-version): Print X scroll bar information.

	* scroll-bar.el (toplevel): Check for x-toolkit-scroll-bars
	instead of x-toolkit-scroll-bars-p.

	* loadup.el (toplevel): Check for x-toolkit-scroll-bars instead
	of x-toolkit-scroll-bars-p.

2000-12-27  Eli Zaretskii  <eliz@is.elta.co.il>

	* ffap.el (ffap-bindings): Make interactive and add an autoload
	cookie.
	(ffap-bindings): Doc fix, to reflect the above change.

2000-12-27  Kenichi Handa  <handa@etl.go.jp>

	* term.el (term-char-mode): Define all non-ascii self-inserting
	characters to 'term-send-raw in term-raw-map.

2000-12-25  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper-init (viper-restore-cursor-type): Added condition-case
	guard.

	* ediff-init.el (ediff-quit-hook,ediff-suspend-hook): Changed
	initialization; use add-hook.
	(ediff-file-remote-p): Use file-local-copy.

	* ediff-ptch.el (ediff-prompt-for-patch-buffer): Improved defaults.

	* ediff.el (ediff-patch-buffer): Bug fix.
	(ediff-revision): Allow selection of the file at the prompt.

2000-12-23  Stefan Monnier  <monnier@cs.yale.edu>

	* subr.el (combine-run-hooks): Remove.

	* emacs-lisp/edebug.el (define-minor-mode): Improve the spec
	and remove the rogue second spec.

2000-12-23  Gerd Moellmann  <gerd@gnu.org>

	* progmodes/compile.el (compilation-forget-errors): Fix indentation.

2000-12-22  Stefan Monnier  <monnier@cs.yale.edu>

	* smerge-mode.el (smerge-basic-map): Use `=' rather than `d'.
	Use minibuffer menu prompt for the `=' prefix.
	(smerge-command-prefix): Change default to C-^.
	(smerge-mode): Don't assume font-lock doesn't move point.

	* skeleton.el (skeleton-internal-1): Make sure the first line of
	the region is also re-indented.
	(skeleton-end-newline): New var.
	(skeleton-end-hook): Use it.

2000-12-22  Markus Rost  <markus.rost@mathematik.uni-regensburg.de>

	* comint.el (comint-password-prompt-regexp): Support CVS.

2000-12-22  Gerd Moellmann  <gerd@gnu.org>

	* simple.el (delete-key-deletes-forward-mode): Simplify.  Also
	backspace key combinations, depending on
	delete-key-deletes-forward.

	* bindings.el ([C-backspace]): Bind C-backspace to kill-word.

	* simple.el (delete-key-deletes-forward): Doc fix.

2000-08-22  Emmanuel Briot  <briot@gnat.com>

	* xml.el (top level comment): Updated to reflect the fact that
	white spaces are relevant in the XML file.
	(xml-parse-file): Do not kill an existing Emacs buffer if the file
	to parse was already edited. This allows for on-the-fly analysis
	of XML files.
	(xml-parse-tag): Check that the casing is the same in the start
	tag and end tag, since XML is case-sensitive.  Allows for spaces
	in the end tag, after the name of the tag.
	(xml-parse-attlist): Allow for the character '-' in the name of
	attributes, as in the standard http-equiv attribute Do not save
	the properties in the XML tree, since they are not relevant.

2000-12-21  Stefan Monnier  <monnier@cs.yale.edu>

	* generic.el (generic-read-type): Undo last change, inline into
	`generic-mode' and then remove.
	(generic-mode): Inline generic-read-type.
	(define-generic-mode): Push the symbol name rather than the symbol
	onto generic-mode-list.

2000-12-21  Gerd Moellmann  <gerd@gnu.org>

	* generic.el (generic-read-type): Build an alist for
	completing-read as in 20.7.

	* play/landmark.el (lm): Use interactive spec `P'.
	(toplevel): Don't set debug-on-error.

	* server.el (server-switch-buffer): Choose a window on a visible
	frame.

2000-12-21  Dave Pearson  <davep@davep.org>

	* quickurl.el: Commentry change, I've moved my web site.

2000-12-21  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ebnf2ps.el: Fix a problem with skip-chars-forward: it doesn't accept
	ranges like \177-\237, but accepts the character sequence from \177 to
	\237.  Doc fix.
	(ebnf-version): New version (3.4).
	(ebnf-setup): Code fix.
	(ebnf-range-regexp): New fun.
	(ebnf-8-bit-chars): Const fix.

	* ebnf-bnf.el: Fix the same problem as described on ebnf2ps.el log
	entry.  Doc fix.
	(ebnf-bnf-lex): Code fix.
	(ebnf-bnf-comment-chars): Const fix.

	* ebnf-iso.el: Fix the same problem as described on ebnf2ps.el log
	entry.  Doc fix.
	(ebnf-iso-comment-chars): Const fix.

	* ebnf-otz.el: Doc fix.

	* ebnf-yac.el: Fix the same problem as described on ebnf2ps.el log
	entry.  Doc fix.
	(ebnf-yac-skip-code): Code fix.
	(ebnf-yac-comment-chars): Const fix.

2000-12-21  Eli Zaretskii  <eliz@is.elta.co.il>

	* files.el (insert-directory-safely): New function.
	(recover-file): Use it instead of insert-directory.  From Markus
	Rost <markus.rost@mathematik.uni-regensburg.de>

2000-12-21  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el (select-safe-coding-system): Check
	coding-category-list more rigidly.  Improve help message.

	* dired.el (dired-move-to-filename-regexp): Fix previous change.

2000-12-21  Miles Bader  <miles@gnu.org>

	* mail/sendmail.el (mail-mode): Set `comment-start' to the yank
	prefix.

2000-12-21  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-diag.el (describe-char-after): Make *Help*
	buffer inherit multibyteness of the current buffer.

	* international/mule.el (make-char): Docstring adjusted for the
	change of make-char-internal.

2000-12-20  Stefan Monnier  <monnier@cs.yale.edu>

	* international/iso-cvt.el: Docstrings fix.

2000-12-20  Dave Love  <fx@gnu.org>

	* subr.el (eval-after-load): Doc fix.

2000-12-20  Kenichi Handa  <handa@etl.go.jp>

	* jka-compr.el (jka-compr-partial-uncompress): Don't use `concat'
	for numbers.

2000-12-20  Miles Bader  <miles@gnu.org>

	* international/quail.el (quail-help): Resize the help window
	again after it has all its contents.  Remove unneeded progn.

2000-12-19  Gerd Moellmann  <gerd@gnu.org>

	* pcmpl-linux.el: Fix copy/paste error.

2000-12-19  Andrew Innes  <andrewi@gnu.org>

	* simple.el (delete-key-deletes-forward-mode): Fix typo in
	docstring.

2000-12-19  Carsten Dominik  <dominik@strw.leidenuniv.nl>

	* progmodes/idlw-rinfo.el: Fixed copyright notice.

	* progmodes/idlw-toolbar.el: Fixed copyright notice.

	* progmodes/idlw-shell.el: Fixed copyright notice.

	* progmodes/idlwave.el: Fixed copyright notice.

	* textmodes/reftex-dcr.el (reftex-view-crossref): Added SPACE and
	TAB as key separators.

2000-12-19  Alex Schroeder  <alex@gnu.org>

	* sql.el (sql-sybase-options): New option.
	(sql-sybase): Use it.  Add sql-database to the list of parameters
	provided for login.  The options -w 2048 -n are not used any more.
	(sql-postgres-options): Changed default from "--pset" to "-P".
	(sql-mysql-options): Doc change.
	(sql-stop): Doc change.

2000-12-19  Kenichi Handa  <handa@etl.go.jp>

	* international/quail.el (quail-input-method): Always hide
	the guidance buffer on exiting.

2000-12-18  Gerd Moellmann  <gerd@gnu.org>

	* tooltip.el (tooltip-mode): Signal an error if x-show-tip
	isn't fboundp.

	* server.el (server-buffer-done): Bury the buffer before
	killing it.

	* faces.el (face-spec-set): Interpret a nil in specs for
	foreground and background colors as `unspecified', for
	compatibility with 20.x.

2000-12-18  Dave Love  <fx@gnu.org>

	* simple.el (mail-user-agent): Doc fix.
	(input-mode-8-bit): Removed.

	* international/mule.el (set-keyboard-coding-system): Doc fix.
	(keyboard-coding-system): New option.

	* mail/sendmail.el (send-mail-function): Customize.

2000-12-18  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/codepage.el (cp866-decode-table): New table.

2000-12-18  Gerd Moellmann  <gerd@gnu.org>

	* version.el (emacs-version): Remove `%a' from the time format
	because the weekday doesn't fit well into each locale.

2000-12-18  Miles Bader  <miles@gnu.org>

	* image-file.el (image-file-name-extensions): Add "pgm" and "ppm".

	* textmodes/artist.el (artist-replace-chars, artist-replace-char):
	Check that emacs-major-version is `=' to 20, not `>='.
	(artist-replace-chars): Use `make-string' instead of a loop.

2000-12-17  Stefan Monnier  <monnier@cs.yale.edu>

	* pcvs.el (cvs-diff-backup-extractor): Return full-path for file.
	(cvs-execute-single-file): Don't change directory.
	Patch from Per Cederqvist.

2000-12-16  Eli Zaretskii  <eliz@is.elta.co.il>

	* textmodes/ispell.el (check-ispell-version): If
	`ispell-program-name' is "aspell", pass it the -v switch instead
	of -vv.

2000-12-16  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-diag.el (mule-diag): Insert information about
	configure options, multibyte awareness, language env.

	* international/ja-dic-cnv.el (skkdic-get-candidate-list): Fix the
	regexp to search for candidates.

2000-12-15  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (Info-forward-node): If the node has an
	Info-header-line, widen the buffer before searching for "next:"
	and "up:" pointers, and set the search limit to stay in the
	current node.

2000-12-16  Miles Bader  <miles@gnu.org>

	* simple.el (delete-trailing-whitespace): Remove extraneous let.

2000-12-15  Miles Bader  <miles@gnu.org>

	* comint.el (comint-send-string, comint-send-region): Also accept
	a buffer, buffer-name, or nil for PROCESS, for compatibility with
	process-send-string/region.

2000-12-15  Gerd Moellmann  <gerd@gnu.org>

	* isearch.el (isearch-lazy-highlight-max): New user-option.
	(isearch-lazy-highlight-update): Don't highlight more than
	isearch-lazy-highlight-max matches.

	* mail/mh-utils.el (mh-find-path): Set read-mail-command.

2000-12-15  Richard M. Stallman  <rms@gnu.org>

	* sort.el (sort-columns): Fix error message.

	* dabbrev.el (dabbrev--last-case-pattern): Value is now
	`upcase' or `downcase' or nil.
	(dabbrev-expand): Don't do anything with dabbrev--last-case-pattern.
	Pass new record-case-pattern arg to dabbrev--substitute-expansion.
	(dabbrev--substitute-expansion): New arg record-case-pattern.
	If it is non-nil, set dabbrev--last-case-pattern.
	If ABBREV is " ", use dabbrev--last-case-pattern to change EXPANSION.

	* dabbrev.el (dabbrev--find-expansion): Remove extra nreverse.

2000-12-15  Miles Bader  <miles@gnu.org>

	* paths.el (Info-default-directory-list): Don't delete
	configure-info-directory from the list of standard info
	directories when appending it to the end -- their order is
	important.

	* faces.el (read-face-attribute): If there's no entry for the
	user's input in VALID, just use it as-is (this will often result
	in an error, but it may be OK for e.g. colors using hexadecimal
	notation, and at least will yield a better error message).

	* window.el (mode-line-window-height-fudge): Function removed.
	(height-affecting-face-attributes, mode-line-window-height-fudge):
	Variables removed.
	* textmodes/ispell.el (ispell-overlay-window): Ensure that the new
	window is really the right size.  Use vertical-motion
	rather than forward-line.
	(ispell-help): Don't use ispell-mode-line-window-height-fudge.
	(ispell-command-loop, ispell-show-choices): Use the variable
	ispell-choices-win-default-height, rather than the function.
	(ispell-choices-win-default-height): Function removed.
	(ispell-mode-line-window-height-fudge): Function removed.

2000-12-14  Stefan Monnier  <monnier@cs.yale.edu>

	* add-log.el (add-change-log-entry): Only expand-file-name if non-nil.

2000-12-14  Eli Zaretskii  <eliz@is.elta.co.il>

	* paths.el (Info-default-directory-list): If
	configure-info-directory is not one of the standard directories,
	put it first in the list; otherwise put it last.  Doc string
	changed accordingly.

	* info.el (Info-directory-list): Change doc string to reflect the
	change in Info-default-directory-list.

	* simple.el (delete-key-deletes-forward-mode): Treat ms-dos and
	windows-nt as windowed environments, even under -nw.

	* startup.el (command-line): Don't call x-backspace-delete-keys-p
	if not fboundp.  Switch delete-forward mode for the <delete> key
	on all PC platforms, even under -nw.

	* term/internal.el ([M-delete]): Remap to M-d.

2000-12-14  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/lisp-mnt.el: Change maintainer to FSF.

2000-12-14  Eli Zaretskii  <eliz@is.elta.co.il>

	* frame.el (show-cursor-in-non-selected-windows): Doc fix.

2000-12-14  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (command-line): Call delete-key-deletes-forward-mode,
	if appropriate.

	* simple.el (delete-key-deletes-forward): New user-option.
	(delete-key-deletes-forward-mode): New function.

	* bindings.el: Bind `delete' to backward-delete-char.

	* emacs-lisp/easymenu.el (easy-menu-current-active-maps): Test
	if symbol is bound before getting its value.

	* tooltip.el (tooltip-show): If an error is signaled in
	x-show-tip, display that error, and display the help in the
	echo area.

2000-12-14  Kenichi Handa  <handa@etl.go.jp>

	* international/ja-dic-cnv.el (skkdic-set-okuri-nasi): Show
	"... entries" messages for every 10000 entries, not 10.

2000-12-13  Karl Fogel  <kfogel@red-bean.com>

	* bookmark.el: Provide a generic exit hook, as suggested by
	Ovidiu Predescu <ovidiu@cup.hp.com>:
	(bookmark-exit-hook): New var.
	(bookmark-exit-hook-internal): New func, replaces
	old raw lambda form in `kill-emacs-hook', and runs new
	`bookmark-exit-hooks'.  No longer tests for the bookmark feature,
	as logically that feature must have been provided if this function
	is running.
	Removed ;;;###autoload before the `add-hook' call.

2000-12-13  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/easymenu.el (easy-menu-define): Setup indentation.
	(easy-menu-current-active-maps): New function.
	(easy-menu-get-map): Use it.
	Make a proper menu entry when creating a new keymap.

2000-12-13  Kenichi Handa  <handa@etl.go.jp>

	* international/characters.el: Fix cases and syntaxes for
	mule-unicode-0100-24ff.

	* dired.el (dired-move-to-filename-regexp): Fixed for the case
	that a Japanese character is not appended after day and year.

	* info.el (Info-suffix-list): Change format for a command that
	requires arguments.
	(info-insert-file-contents): Adjusted for the above change.

2000-12-12  Andreas Schwab  <schwab@suse.de>

	* tar-mode.el (tar-extract): Base the name of the subfile buffer
	on the name of the tar buffer.  Verify that the existing buffer is
	visiting the same subfile.

2000-12-12  Dave Love  <fx@gnu.org>

	* subdirs.el: Add obsolete.

2000-12-12  Gerd Moellmann  <gerd@gnu.org>

	* mail/rmailsum.el (rmail-summary-expunge)
	(rmail-summary-expunge-and-save): Use rmail-expunge-confirmed
	instead of rmail-confirm-expunge.

	* replace.el (perform-replace): Don't use an empty match adjacent
	to a non-empty match when computing the next match before the
	replacement is performed.

2000-12-12  Milan Zamazal  <pdm@freesoft.cz>

	* progmodes/glasses.el: Use `define-minor-mode' for the minor mode
	definition (patch by Stefan Monnier).
	(glasses-mode): Use jit-lock instead of `after-change-functions'
	(patch by Stefan Monnier).

2000-12-12  Miles Bader  <miles@gnu.org>

	* info.el (Info-last-preorder): Don't barf on nodes without a prev.
	(Info-scroll-down): Respect `Info-scroll-prefer-subnodes'.

2000-12-12  Andrew Choi  <akochoi@i-cable.com>

	* term/mac-win.el: Remove load for ls-lisp.

	* loadup.el: Load ls-lisp for system-type `macos'.

2000-12-12  Miles Bader  <miles@gnu.org>

	* simple.el (delete-horizontal-space): Add BACKWARD-ONLY parameter.
	Respect field end too.
	(just-one-space): Respect fields as `delete-horizontal-space'.
	(newline-and-indent, reindent-then-newline-and-indent): Use
	`delete-horizontal-space'.

2000-12-11  Stefan Monnier  <monnier@cs.yale.edu>

	* newcomment.el (comment-indent-new-line): Use delete-horizontal-space
	(so as to obey the field property in the minibuffer).

	* obsolete/c-mode.el: Moved from lisp/progmodes.
	* obsolete/auto-show.el: Moved from lisp.
	* obsolete/ooutline.el: Moved from lisp/textmodes.

2000-12-11  Carsten Dominik  <dominik@strw.leidenuniv.nl>

	* progmodes/idlwave.el: Updated to IDLWAVE version 4.7.  Too many
 	changes to list them here.

	* progmodes/idlw-shell.el: Updated to IDLWAVE version 4.7.  Too
	many changes to list them here.

	* progmodes/idlw-rinfo.el: Updated to IDLWAVE version 4.7.  Too
	many changes to list them here.

	* progmodes/idlw-toolbar.el: Updated to IDLWAVE version 4.7.

2000-12-11  Gerd Moellmann  <gerd@gnu.org>

	* simple.el (kill-new): Don't try to setcar kill-ring if it is
	nil.

	* cus-edit.el (custom-save-variables, custom-save-faces):
	Comment fix.

	* hscroll.el: Moved to `obsolete' subdir.

2000-12-11  Miles Bader  <miles@gnu.org>

	* window.el (window-text-height): Function removed (now in C).

2000-12-10  Stefan Monnier  <monnier@cs.yale.edu>

	* log-edit.el (log-edit-parent-buffer): New var.
	(log-edit): Set it.  Add BUFFER argument.
	(log-edit-done): Use char-before.
	Don't bother checking validity of vc-comment-ring.
	Only bury the buffer if log-edit popped it up.

	* pcvs.el: Update references to CVS-Edit (now Log-Edit).
	(cvs-mode-diff-help): Remove.
	(cvs-mode-commit): Use the new `log-edit' BUFFER argument.
	(cvs-mode-marked): Set up the default for CMD manually.

	* pcvs-defs.el (cvs-mode-diff-map): Use minibuffer menu prompt.
	Remove binding for ? now made unnecessary.

2000-12-10  Carsten Dominik  <dominik@strw.leidenuniv.nl>

	* textmodes/reftex.el (reftex-scanning-info-available-p): New
 	function
	(reftex-TeX-master-file): Check for `tex-main-file' early enough.

	* textmodes/reftex-global.el (reftex-create-tags-file): Fixed bug
	when master file is not open.

2000-12-09  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/ada-stmt.el: Update `maintainer'.

2000-12-09  Stephen Gildea  <gildea@alum.mit.edu>

	* time-stamp.el (time-stamp-old-format-warn): Reorder custom
	choices to match documentation string.

2000-12-09  Miles Bader  <miles@gnu.org>

	* minibuf-eldef.el: New file.

	* window.el (fit-window-to-buffer): Don't pass last argument to
	pos-visible-in-window-p, now that its meaning is inverted.

2000-12-08  Eli Zaretskii  <eliz@is.elta.co.il>

	* image.el (create-image): Doc fix; spotted by Per Cederqvist
	<ceder@lysator.liu.se>.

2000-12-08  Stefan Monnier  <monnier@cs.yale.edu>

	* autoinsert.el (auto-insert-alist): Add missing final \n.

	* pcvs-defs.el (cvs-menu): Move.  Make submenu for diff commands.
	(cvs-menu-map): Remove.
	* pcvs.el (cvs-menu): Use `cvs-menu' rather than `cvs-menu-map'.
	(cvs-mode-quit): Turn it back into a plain function.

	* textmodes/texnfo-upd.el (texinfo-chapter-level-regexp)
	(texinfo-filter): Remove (move to texinfo.el).

	* textmodes/texinfo.el: Move the (require 'cl) to the front of the
	file where it's more visible.
	(texinfo-filter, texinfo-chapter-level-regexp): New variables
	moved from texnfo-upd.el (for AUCTeX's compatibility, originally).
	(texinfo-mode): Use texinfo-chapter-level-regexp for page-delimiter.
	(texinfo-inside-macro-p): Only catch `scan-error's.
	(texinfo-inside-env-p): Make better use of the match info.
	(texinfo-insert-quote): Collapse calls to `texinfo-inside-macro-p'.
	(texinfo-insert-@end): Slight re-organization.
	Also remove useless `looking-at' call.

2000-12-08  Andrew Innes  <andrewi@gnu.org>

	* w32-fns.el: Add clipboard support from term/w32-win.el, so it is
	accessible in -nw mode.

	* term/w32-win.el: Remove stuff about selection timeout, which is
	irrelevant on Windows.  Move clipboard support to w32-fns.el, so
	it is accessible in -nw mode.

2000-12-08  Dave Love  <fx@gnu.org>

	* emacs-lisp/lisp-mode.el (lisp-mode): Set
	font-lock-keywords-case-fold-search.

2000-12-08  Gerd Moellmann  <gerd@gnu.org>

	* textmodes/ispell.el (ispell): Doc fix.

2000-12-08  Kenichi Handa  <handa@etl.go.jp>

	* international/quail.el (quail-insert-decode-map): Check the
	frame width of a window displaying the current buffer, not that of
	the selected frame.
	(quail-help): Make sure that the help buffer has window before
	inserting text in it.

2000-12-07  Sam Steingold  <sds@gnu.org>

	* loadup.el: Load emacs-lisp/backquote instead of autoloading.
	Backquote is used in isearch.el, so autoloading saves nothing.

2000-12-07  Eli Zaretskii  <eliz@is.elta.co.il>

	* startup.el (normal-top-level-add-subdirs-to-load-path): Ignore
	the CVS and RCS subdirectories case-insensitively.

	* dired.el (dired-insert-directory): If file-system-info is
	fboundp, call it instead of invoking dired-free-space-program.

2000-12-07  Gerd Moellmann  <gerd@gnu.org>

	* server.el (server-visit-files): Push files on file-name-history.

	* progmodes/cc-langs.el: Update copyright.

	* progmodes/idlw-shell.el, progmodes/idlwave.el: Update copyright.

	* bindings.el (mode-line-mode-menu): Add glasses-mode.

	* bindings.el (mode-line-mode-menu): Reverse the order
	of define-keys so that the menu appears in alphabetical order.

2000-12-07  Milan Zamazal  <pdm@freesoft.cz>

	* progmodes/glasses.el (glasses-mode): Update mode line at the end
	of the function.

2000-12-07  Dave Love  <fx@gnu.org>

	* jka-compr.el (jka-compr-compression-info-list): Fix :type.

	* facemenu.el (facemenu-unlisted-faces): Fix value.

2000-12-07  Stefan Monnier  <monnier@cs.yale.edu>

	* font-lock.el (font-lock-default-fontify-region):
	Include the terminating \n (off-by-one error).
	(font-lock-set-defaults): Use dolist.

	* derived.el (define-derived-mode): Don't use combine-run-hooks.

2000-12-07  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el (describe-language-environment): Fix
	for the case that an input method title is not string but a list.

	* ps-bdf.el (bdf-read-font-info): Modify the kludgy code for fonts
	of wrong SIZE record.

2000-12-06  Dave Love  <fx@gnu.org>

	* newcomment.el (comment-region, comment-dwim): Doc fix.

	* textmodes/texinfo.el: Require tex-mode when compiling.
	(texinfo-update-node): Doc fix.
	(texinfo-imenu-generic-expression): Add @anchor.
	(texinfo-font-lock-keywords): Add @uref.
	(texinfo-inside-macro-p): Don't use ignore-errors.
	(texinfo-insert-quote): Match more contexts.

	* international/mule.el (decode-char, encode-char): Doc fix.
	(auto-coding-alist): Customize.

	* files.el (load-file): Fix change of 2000-03-12.

	* wid-edit.el (widget-text-keymap): Doc fix.

2000-12-06  Andrew Innes  <andrewi@gnu.org>

	* makefile.w32-in (lisp): Set to an absolute directory, namely
	$(CURDIR).

2000-12-06  Eli Zaretskii  <eliz@is.elta.co.il>

	* emacs-lisp/autoload.el (update-file-autoloads): Use raw-text to
	read generated-autoload-file, and set buffer-file-coding-system to
	raw-text-unix after reading the file.

	* international/mule-conf.el (file-coding-system-alist): Use
	raw-text for reading loaddefs.el and raw-text-unix for writing
	it.

2000-12-06  Gerd Moellmann  <gerd@gnu.org>

	* replace.el (occur): Make line-number-width 1 smaller for the
	colon following the line number.

	* startup.el (fancy-splash-text, command-line-1): Use
	`File' for the menu name instead of `Files'.

	* tmm.el: Update copyright.

	* cus-start.el: Add entry for even-window-heights.

2000-12-06  Miles Bader  <miles@gnu.org>

	* faces.el (frame-set-background-mode): Avoid stomping on
	locally modified faces.

2000-12-06  Kenichi Handa  <handa@etl.go.jp>

	* international/fontset.el: Correct the font registries for
	japanese-jisx0213-1 and japanese-jisx0213-2.

2000-12-05  Gerd Moellmann  <gerd@gnu.org>

	* textmodes/reftex-toc.el (reftex-toc-menu): Fix typo.

	* iswitchb.el: Update customization commentary.

2000-12-05  Rob Riepel  <riepel@Stanford.EDU>

	* emulation/tpu-edt.el (tpu-help): Fixed previous screen logic.
	(tpu-search-highlight): Fixed comparison of overlay end positions.
	(tpu-trim-line-ends): Implemented trimming logic locally.

	* emulation/tpu-extras.el (tpu-write-file-hook)
	(tpu-set-cursor-bound): Replaced picture-clean with
	tpu-trim-line-ends.

2000-12-05  Kenichi Handa  <handa@etl.go.jp>

	* language/chinese.el (chinese-iso-8bit): Change mime-charset name
	to cn-gb.
	(cn-gb, gb2312): New aliases for chinese-iso-8bit.

2000-12-04  Dave Love  <fx@gnu.org>

	* emacs-lisp/cl-indent.el: Remove erroneous spec for condition-case.

2000-12-04  Gerd Moellmann  <gerd@gnu.org>

	* mail/rmailsum.el (rmail-summary-expunge)
	(rmail-summary-expunge-and-save): Ask for confirmation with
	rmail-expunge-confirmed.

	* mail/rmail.el (rmail-expunge-confirmed): New function.
	(rmail-expunge): Use it.

	* progmodes/etags.el (tag-partial-file-name-match-p): New function.
	(etags-recognize-tags-table, find-tag-in-order): New
	functionality: interpret file names as tags.

2000-12-04  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (Info-scroll-prefer-subnodes): New defcustom.
	(Info-scroll-up): If Info-scroll-prefer-subnodes is nil, don't
	visit the first subnode until the bottom of the current node is
	visible.

2000-12-04  Gerd Moellmann  <gerd@gnu.org>

	* format.el (format-decode): Don't change buffer's undo list.

2000-12-04  Kenichi Handa  <handa@etl.go.jp>

	* faces.el (face-font-registry-alternatives): Add entries for CJK
	fonts.  Doc-string adjusted for the actual usage of this data.

	* international/fontset.el: Change the font registries for CJK
	fonts in the default fontset.  Don't append '*' to registries.

2000-12-03  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/easy-mmode.el (define-derived-mode)
	(easy-mmode-derived-mode-p): Remove (moved to derived.el).

	* derived.el (define-derived-mode): Revived, moved from easy-mmode.el.
	(derived-mode-p): New function.
	(derived-mode-make-docstring): Add `docstring' argument.
	Use it if available and complete it if necessary.

2000-12-03  Andreas Schwab  <schwab@suse.de>

	* type-break.el (type-break): Don't make parent of itself.

2000-12-03  Miles Bader  <miles@gnu.org>

	* simple.el (delete-trailing-whitespace): Don't delete newlines too.

2000-12-02  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/tex-mode.el (tex-start-shell): Obey shell-file-name.
	(tex-main-file, tex-file): Simplify.
	(tex-generate-zap-file-name): Use subst-char-in-string.
	(tex-strip-dots): Remove.

	* tmm.el (tmm-get-keymap): Eval the menu name in `menu-item'.

	* textmodes/ispell.el (check-ispell-version): Don't use match-beginning
	to check if the match succeeded.

2000-12-02  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (use-fancy-splash-screens-p): New function.
	(command-line-1): Use it to determine whether or not to use
	a fancy splash screen.

2000-12-02  Andreas Schwab  <schwab@suse.de>

	* emacs-lisp/eldoc.el (eldoc): Don't make parent of itself.

2000-12-02  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/mule.el (make-char): Fix last change.

	* textmode/texinfo.el (texinfo-open-quote, texinfo-close-quote):
	New defcustoms.
	(texinfo-insert-quote): Don't call tex-insert-quote, to avoid
	autoloading tex-mode; instead, do the same manually.  Use
	texinfo-open-quote and texinfo-close-quote.  Insert literal quote
	with numeric argument.  Docstring fix.
	(toplevel): Require cl when compiling.

	* international/mule.el (make-char): Doc fix.

2000-12-02  Jason Rumney  <jasonr@gnu.org>

	* term/w32-win.el (x-select-enable-clipboard): Customize (as per
	the Emacs Lisp manual)

2000-12-02  Eli Zaretskii  <eliz@is.elta.co.il>

	* dos-w32.el (find-buffer-file-type-coding-system): Doc fix.

	* term/pc-win.el (x-select-enable-clipboard): Customize (as per
	the Emacs Lisp manual).

2000-12-02  Gerd Moellmann  <gerd@gnu.org>

	* simple.el (next-line-add-newlines): Change default to nil.

2000-12-01  Eli Zaretskii  <eliz@is.elta.co.il>

	* files.el (revert-buffer, recover-file): Bind
	coding-system-for-read to emacs-mule-unix, not to no-conversion.

2000-12-01  Gerd Moellmann  <gerd@gnu.org>

	* hi-lock.el (hi-lock-refontify): Call jit-lock-refontify.

2000-12-01  Miles Bader  <miles@gnu.org>

	* window.el (fit-window-to-buffer): Handle non-nil `truncate-lines'.

2000-12-01  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-diag.el (describe-char-after): Fix typo.
	(describe-character-set, non-iso-charset-alist): Fix typo.

2000-12-01  Miles Bader  <miles@gnu.org>

	* image-file.el (image-file-name-regexp): Automatically add
	upper-case variants of each filename extension in
	`image-file-name-extensions', since they seem to be common.

	* simple.el (minibuffer-contents)
	(minibuffer-contents-no-properties, delete-minibuffer-contents):
	New functions.
	* filecache.el (file-cache-directory-name)
	(file-cache-minibuffer-complete): Ignore the minibuffer prompt.

2000-12-01 Milan Zamazal <Milan.Zamazal@qbizm.com>

	* filecache.el (file-cache-minibuffer-complete): Don't try to
	delete the minibuffer prompt.

2000-11-30  Dave Love  <fx@gnu.org>

	* cus-start.el: Fix read-buffer-function type.

2000-11-30  Gerd Moellmann  <gerd@gnu.org>

	* md5.el: Removed.  There's a built-in function, now.

2000-11-30  Markus Rost  <rost@math.ohio-state.edu>

	* mail/rmail.el (rmail-set-message-counters): Don't use "D"
	as dummy 0-th char of rmail-deleted-vector.

2000-11-30  Eli Zaretskii  <eliz@is.elta.co.il>

	* ps-print.el (ps-end-job): Bind case-fold-search only after
	switching to ps-spool-buffer.

2000-11-30  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Line number font customization.  PostScript: Lines and
	PageCount are initialized on each page.  Doc Fix.
	(ps-print-version): New version number (6.3.2).
	(ps-lpr-switches, ps-font-info-database, ps-font-size)
	(ps-header-font-size, ps-header-title-font-size, ps-left-header)
	(ps-right-header): Customization fix.
	(ps-setup, ps-select-font, ps-begin-file, ps-header-sheet, ps-end-job):
	Fix code.
	(ps-end-with-control-d, ps-line-number-font, ps-line-number-font-size):
	New vars.

2000-11-30  Gerd Moellmann  <gerd@gnu.org>

	* bs.el: Fix typos and spelling errors.
	(bs-appearance) <defgroup>: Renamed from bs-appearence.
	(bs-configuration): Doc fix.

	* bs.el: Undo mistaken change of 2000-11-28.  Update copyright.

2000-11-30  Rob Riepel  <riepel@Stanford.EDU>

	* emulation/tpu-edt.el (tpu-version): New version.
	(tpu-search-overlay, tpu-replace-overlay): New initial range.
	(tpu-original-mode-line): Variable deleted.
	(tpu-mark-flag): New initial value.
	(tpu-set-mode-line): Don't redefine mode-line-format.  Add
	tpu-mark-flag to minor-mode-alist.
	(tpu-update-mode-line): New mark flag logic.
	(tpu-get): Use find-file-wildcards.
	(tpu-search-highlight): Move overlay less, reset overlay properly.
	(tpu-unselect): Deactivate mark.
	(tpu-lm-replace): Reset overlay properly.
	(tpu-forward-line): Use forward-visible-line.
	(tpu-edt-on): Set transient mark mode.  ispell autoloads deleted.

	* emulation/tpu-extras.el (tpu-forward-line): Use
	forward-visible-line.

2000-11-30  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-edit.el (custom-face-value-create): Always emphasize tag.

2000-11-30  Edward M. Reingold  <reingold@emr.cs.uiuc.edu>

	* calendar/diary-lib.el (diary-entry-time): Anchor pattern correctly
	and skip whitespace and newlines.

2000-11-30  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/cl.el (third...tenth): Really undo change of 2000-08-05.

2000-11-29  Gerd Moellmann  <gerd@gnu.org>

	* help.el (describe-function-1): Regexp-quote function name
	when used as part of a regexp.

	* toolbar/tool-bar.el (tool-bar-add-item-from-menu): Use
	face-attribute instead of face-foreground and face-background.
	(tool-bar-add-item): Likewise, and handle unspecified colors.

	* enriched.el (enriched-face-ans): Use face-attribute instead
	of face-foreground and face-background.

	* faces.el (face-foreground, face-background, face-stipple):
	Return nil if attribute is unspecified, for backward
	compatibility.

	* files.el (auto-mode-alist): Add an entry for antlr-mode.

	* play/5x5.el: Remove version info.

	* toolbar/tool-bar.el (tool-bar-mode): Doc fix.

	* frame.el (blink-cursor-mode): Doc fix.

2000-11-29  Christoph Wedler  <Christoph.Wedler@sap.com>

	* antlr-mode.el: New commands to run ANTLR from within Emacs and
	to create Makefile rules.
	(antlr-tool-command): New user option.
	(antlr-ask-about-save): New user option.
	(antlr-makefile-specification): New user option.
	(antlr-file-formats-alist): New variable.
	(antlr-special-file-formats): New variable.
	(antlr-unknown-file-formats): New user option.
	(antlr-help-unknown-file-text): New variable.
	(antlr-help-rules-intro): New variable.
	(antlr-mode-map): Add [C-c C-r] for `antlr-run-tool'.
	(antlr-mode-menu): Add entries.
	(antlr-file-dependencies): New function.
	(antlr-directory-dependencies): New function.
	(antlr-superclasses-glibs): New function.
	(antlr-run-tool): New command.
	(antlr-makefile-insert-variable): New function.
	(antlr-insert-makefile-rules): New function.
	(antlr-show-makefile-rules): New command.

	* antlr-mode.el: More Emacs/XEmacs stuff.
	(antlr-no-action-keywords): New constant with value nil.
	(antlr-font-lock-keywords-alist): Use it.  Old value would break
	syntax highlighting in Emacs-21.0.
	(antlr-default-directory): Emacs/XEmacs dependend function.
	(antlr-read-shell-command): Ditto.
	(antlr-with-displaying-help-buffer): Ditto.

2000-11-29  Christoph Wedler  <Christoph.Wedler@sap.com>

	* antlr-mode.el: imenu, parsing and highlighting changes.
	(antlr-imenu-create-index-function): Don't create extra submenus
	for definitions in different grammar classes.  It is not necessary
	for the menu and would make command `imenu' awkward to use.
	(antlr-skip-file-prelude): With ANTLR-2.7+, you can specify named
	header actions and more than one.
	(antlr-font-lock-tokendef-face): Changed color.
	(antlr-font-lock-tokenref-face): Changed color.
	(antlr-font-lock-additional-keywords): Also highlight lowercase.
	(antlr-mode-syntax-table): New variable.
	(antlr-mode): Populate and use it instead `java-mode-syntax-table'.
	(antlr-with-syntax-table): Don't copy syntax table.

2000-11-29  Christoph Wedler  <Christoph.Wedler@sap.com>

	* antlr-mode.el: Minor changes: language setting.
	(antlr-language-alist): The value for file option "language" can
	be both an identifier and a string.
	Reported by Rajesh Radhakrishnan <radhakrs@email.uc.edu>.
	(antlr-language-limit-n-regexp): Change accordingly.

2000-11-29  Christoph Wedler  <Christoph.Wedler@sap.com>

	* antlr-mode.el: Minor changes: tabs, hiding.
	(antlr-tab-offset-alist): Set `indent-tabs-mode' to nil instead t.
	(antlr-action-visibility): Also allow value nil to also hide the
	braces.  Renamed from `antlr-tiny-action-length'.
	Suggested by Jay@aol.com.
	(antlr-hide-actions): Change accordingly.  Hide line if completely
	hidden action is on a line of its own.

2000-11-29  Stefan Monnier  <monnier@cs.yale.edu>

	* subr.el (combine-run-hooks): Only run-hooks if there's a hook to run.

	* sort.el (sort-columns): Don't concat strings with numbers.

2000-11-29  Dave Love  <fx@gnu.org>

	* cus-edit.el (face): Fix :format.

	* mail/feedmail.el: Require smtpmail when compiling.
	(mail-do-fcc): Autoload.
	(feedmail) <defgroup>: Fix :link.
	(feedmail-nuke-body-in-fcc): Fix :type.
	(feedmail-send-it): Add autoload cookie.

2000-11-29  Stefan Monnier  <monnier@cs.yale.edu>

	* newcomment.el (comment-indent): Save excursion around call to
	comment-indent-function.

2000-11-29  Miles Bader  <miles@gnu.org>

	* subr.el (member-ignore-case): Return the tail of the list who's
	car matches, like `member', not the matching element itself.

2000-11-29  Kenichi Handa  <handa@etl.go.jp>

	* xml.el (xml-parse-tag): Fix finding opening tag.  A tag name
	should not contain `\n'.

2000-11-28  Gerd Moellmann  <gerd@gnu.org>

	* hi-lock.el (hi-lock-refontify): Call jit-lock-refontify.

	* hscroll.el: Add hints to `automatic-hscrolling' to doc strings.

	* dired-aux.el (dired-do-create-files): Construct default file
	name for dired-mark-read-file-name so that when the user enters
	just RET, the target file will end up in the target directory.

	* abbrev.el (prepare-abbrev-list-buffer): Get the value of
	local-abbrev-table before changing buffers because it might
	have a buffer-local binding.

2000-11-28  Miles Bader  <miles@gnu.org>

	* simple.el (delete-horizontal-space): Handle fields more generally.

2000-11-28  Gerd Moellmann  <gerd@gnu.org>

	* simple.el (delete-horizontal-space): Handle minibuffer prompt.

2000-11-28  Dave Love  <fx@gnu.org>

	* progmodes/ps-mode.el (ps-mode): Set comment-start and
	comment-start-skip locally.

	* progmodes/fortran.el (fortran-mode): Don't set
	fortran-comment-line-start-skip.  Set comment-start to
	fortran-comment-line-start.
	(fortran-fill-paragraph) <non-empty-comment>: Remove regexp group.
	(fortran-comment-line-start-skip): Simplify slightly.

2000-11-28  Gerd Moellmann  <gerd@gnu.org>

	* play/5x5.el: Remove RCS keyword.

	* bs.el: Mistaken commit, undone 2000-11-30.

2000-11-28  Milan Zamazal  <pdm@freesoft.cz>

	* textmodes/tildify.el (tildify-string-alist): Add
	`plain-tex-mode' here.

2000-11-28  Colin Walters  <walters@cis.ohio-state.edu>

	* chistory.el (Command-history-setup): Remove extraneous `keymap'
	reference.

2000-11-28  Miles Bader  <miles@gnu.org>

	* cus-face.el (custom-face-attributes): Add post-filter function
	for :box.  Make pre-filter function for :box handle all cases.

	* wid-edit.el (widget-choose): Make sure pop-up window is large
	enough to display all the choices, as there's no way to scroll it.

2000-11-28  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-conf.el: Make the coding system no-conversion
	safe for all characters.

2000-11-27  Dave Love  <fx@gnu.org>

	* net/ldap.el (ldap) <defgroup>: Add :version.

	* tooltip.el (tooltip-use-echo-area): Doc fix.

	* cus-start.el <minibuffer-prompt-properties>: Add version.
	<read-buffer-function>: Add.

	* apropos.el (apropos-print): Add help-echo to active text.

	* term/x-win.el (x-select-enable-clipboard): Customize (per lispref).

2000-11-27  Gerd Moellmann  <gerd@gnu.org>

	* mail/rmail.el (rmail-automatic-folder-directives): Add a custom
	type, group and version.

2000-11-27  Eli Zaretskii  <eliz@is.elta.co.il>

	* select.el (x-get-selection): Docstring fix.

2000-11-27  Dave Pearson <davep@hagbard.demon.co.uk>

	* play/5x5.el (5x5-play-solution): Bind hinhibit-quit to t.

2000-11-27  Andrew Innes  <andrewi@gnu.org>

	* makefile.nt (.SUFFIXES): Add .SUFFIXES.

	* makefile.w32-in (.SUFFIXES): Add .SUFFIXES.

2000-11-27  Miles Bader  <miles@gnu.org>

	* dired.el (dired-get-filename): Return filename verbatim if
	LOCALP is `verbatim'.
	* dired-aux.el (dired-add-entry): Call `dired-get-filename' with
	`verbatim' so that we don't inadvertently delete a non-existant
	directory name.

2000-11-27  Kenichi Handa  <handa@etl.go.jp>

	* international/characters.el: Specify cases and syntaxes for
	mule-unicode-0100-24ff.

2000-11-27  Gerd Moellmann  <gerd@gnu.org>

	* toolbar/tool-bar.el (tool-bar-add-item-from-menu): Handle case
	that foreground and/or background colors of the face `tool-bar'
	are unspecified.

2000-11-27  Miles Bader  <miles@gnu.org>

	* wid-edit.el (widget-field-buffer, widget-field-start)
	(widget-field-end): Handle widget field `pseudo-overlays'.
	(widget-field-value-delete): Delete WIDGET from `widget-field-new'
	if it's there instead of in `widget-field-list'.

	* help.el (help-manyarg-func-alist): Correct entry for `vconcat'.
	(help-make-xrefs): Delete extraneous newlines at the end of the
	docstring.

2000-11-25  Jason Rumney  <jasonr@gnu.org>

	* startup.el (command-line): Call set-locale-environment after
	Window System init file is read, as it can result in a call to
	redraw-frame.

2000-11-25  Eli Zaretskii  <eliz@is.elta.co.il>

	* simple.el (shell-command): Mention the effect of the prefix
	argument in the doc string.

2000-11-25  Miles Bader  <miles@gnu.org>

	* cus-face.el (custom-face-attributes): Add "None" choice to :stipple.

	* wid-edit.el (widget-field-value-delete): Don't try to delete
	overlay when it's the `pseudo-overlay' that exists at some points.

2000-11-24  Jason Rumney  <jasonr@gnu.org>

	* international/mule-cmds.el (locale-language-names): Add "jp" as
	a non-standard alternative for Japanese.

2000-11-24  Andre Spiegel  <spiegel@gnu.org>

	* vc-hooks.el: Require 'cl during compilation.

2000-11-24  Gerd Moellmann  <gerd@gnu.org>

	* faces.el (face-set-after-frame-default): Let face attributes
	specified for new frames override frame parameters.

	* startup.el (command-line): Fix computation of the source file
	for user-init-file when user-init-file is a compiled file.

2000-11-24  Miles Bader  <miles@gnu.org>

	* cus-edit.el (custom-filter-face-spec, custom-pre-filter-face-spec)
	(custom-post-filter-face-spec): New functions.
	(custom-face-set, custom-face-value-create): Filter the face spec
	before and after customization.
	(custom-face-set): If VALUE specifies a null face, pass a
	non-null-but-otherwise-ignored face-spec instead to `face-spec-set'.
	* cus-face.el (custom-face-attributes): Remove SET and GET
	functions.  Add some IN-FILTER and OUT-FILTER functions in the few
	cases they're needed.

	* wid-edit.el (checkbox): Add a small `X' to the the :on-glyph, so
	that it's distinguishable from the :off-glyph on dark-background
	displays.  Set its background color too.

	* cus-start.el (all): Restore entry for `mode-line-inverse-video',
	so that people can easily turn it off.

2000-11-24  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff-diff.el: Moved variables around to have it compile under NT.

	* ediff-help.el (ediff-use-long-help-message): Made it customizable.

	* ediff-init.el (ediff-abbrev-jobname): Use capitalize.

	* ediff-wind.el (ediff-skip-unsuitable-frames): Deleted the
	redundant skip-small-frames test.

	* viper-cmd.el (viper-change-state-to-vi): Disable overwrite mode.
	(viper-downgrade-to-insert): protect against errors in hooks.

	* viper-init.el (viper-vi-state-hook,viper-insert-state-hook)
	(viper-replace-state-hook,viper-emacs-state-hook): Do cursor handling.
	(viper-restore-cursor-type,viper-set-insert-cursor-type): New
	functions.

	* viper-util.el (viper-memq-char): Bug fixes.

	* viper.el (viper-mode): Fix cursor handling.

2000-11-24  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-diag.el (list-iso-charset-chars): For
	two-byte charset, fix the `while' condition.
	(list-non-iso-charset-chars): Fix the `while' condition.

2000-11-23  Stefan Monnier  <monnier@cs.yale.edu>

	* subr.el (add-hook, remove-hook): Don't call make-local-hook
	if the variable is make-variable-buffer-local.

	* progmodes/ada-stmt.el (ada-template-map): Initialize
	and bind it to C-c t in ada-mode-map.
	(ada-stmt-mode-hook): New function extracted from old code.
	Only change the buffer-local side of skeleton-*.
	(ada-mode-hook): Use it.

2000-11-23  Eli Zaretskii  <eliz@is.elta.co.il>

	* iswitchb.el (iswitchb-minibuf-depth): New variable.
	(iswitchb-read-buffer): Record in iswitchb-minibuf-depth the value
	we expect to be returned by minibuffer-depth once we prompt the
	user in the minibuffer.
	(iswitchb-entryfn-p): If minibuffer-depth returns the same value
	as recorded in iswitchb-minibuf-depth, return non-nil.

2000-11-23  Eli Zaretskii <eliz@is.elta.co.il>

	* hscroll.el (turn-on-hscroll, hscroll-mode, hscroll-global-mode)
	(hscroll-window-maybe): Docstring fix.

2000-11-23  Dave Love  <fx@gnu.org>

	* rect.el (string-rectangle): Don't test delete-selection-mode.

2000-11-23  Gerd Moellmann  <gerd@gnu.org>

	* avoid.el (mouse-avoidance-too-close-p): Return nil if mouse
	is in the tool bar.

	* dired-aux.el (dired-add-entry): Don't call dired-get-filename
	with `no-dir'; we want the directory part to be able to remove
	it.

2000-11-22  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/outline.el (outline-flag-region):
	Don't bind inhibit-read-only since we don't modify the buffer.
	(outline-isearch-open-invisible): Don't jump to overlay-start
	since we're trying to unhide text around point.
	(outline-discard-overlays): Use dolist.

	* autoinsert.el (auto-insert-alist): Add `provide' to elisp skeleton.

2000-11-22  Gerd Moellmann  <gerd@gnu.org>

	* mail/rmail.el (rmail-confirm-expunge): Default to
	y-or-n-p.

2000-11-22  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/tex-mode.el (tex-font-lock-keywords-1):
	Fix ARG regexp to skip quoted braces.
	(tex-font-lock-keywords-2): Fix ARG regexp to skip quoted braces.
	Remove `bf' and `it' from `bold' and `italic' (they were wrong and
	are (correctly) handled separately).
	Remove `caption' and `footnote' from `citations': they contain text.
	Don't highlight `textmd', `texttt' and `textrm' with bold-italic.
	(latex-skeleton-end-hook): New function.
	(latex-mode): Use it.
	(tex-start-tex-marker): Remove.
	(tex-send-tex-command): Don't set tex-start-tex-marker.
	(tex-error-parse-syntax-table): New var.
	(tex-compilation-parse-errors): Use it.
	Ignore tex-start-tex-marker.  Don't bother with marker-position.
	(tex-validate-buffer): Don't bother with marker-position.

	* textmodes/flyspell.el (flyspell-prog-text-faces): New var.
	(flyspell-generic-progmode-verify): Use it.

2000-11-22  Sam Steingold  <sds@gnu.org>

	* simple.el (delete-trailing-whitespace): New interactive
	function.

	* progmodes/ada-mode.el (ada-mode): Use it instead of
	`ada-remove-trailing-spaces'.
	(ada-remove-trailing-spaces): Removed.

	* textmodes/two-column.el (2C-merge): Recommend it in the doc.

	* textmodes/picture.el (picture-clean): Removed.
	(picture-mode-exit): Call it instead of `picture-clean'.

2000-11-22  Gerd Moellmann  <gerd@gnu.org>

	* frame.el (show-cursor-in-non-selected-windows): Doc fix.

	* hi-lock.el (hi-lock-refontify): Don't call non-existent
	jit-lock-fontify-buffer; it should anyway be unneccessary to
	do anything special when jit-lock is active.
	(hi-yellow, hi-pink, hi-green, hi-blue): Fix defface specs.

2000-11-22  Dave Love  <fx@gnu.org>

	* calendar/todo-mode.el (todo-top-priorities): Use
	todo-tmp-buffer-name.  From Milan Zamazal <Milan.Zamazal@qbizm.com>.

	* language/chinese.el, language/cyrillic.el:
	* language/devanagari.el, language/ethiopic.el, language/greek.el:
	* language/hebrew.el, language/indian.el, language/japanese.el:
	* language/korean.el, language/lao.el, language/misc-lang.el:
	* language/thai.el, language/tibetan.el, language/vietnamese.el:
	Use provide.

	* cus-edit.el (custom-buffer-create-internal): Save some consing.
	(custom-variable-set): Improve validation error mesage.

	* rect.el (string-rectangle): Revert last change.
	(string-rectangle-line): New arg DELETE.
	(string-rectangle): Check delete-selection-mode.

	* emacs-lisp/edebug.el (edebug-version)
	(edebug-maintainer-address): Deleted.
	(edebug-submit-bug-report): Just alias to report-emacs-bug.
	(edebug-read-function): Account for other `'#' read forms.
	(edebug-mode-menus): Make some items toggles.
	(edebug-outside-unread-command-event, unread-command-event):
	Remove these to avoid warnings.

2000-11-22  David Ponce  <david@dponce.com>

	* recentf.el (recentf-menu-items-for-commands)
	(recentf-make-menu-items, recentf-make-menu-item)
	(recentf-filter-changer): Added :help and :active menu-item properties.

	(recentf-build-dir-rules, recentf-dump-variable)
	(recentf-edit-list, recentf-open-files-item)
	(recentf-open-files): Replaced unnecessary `mapcar' with new
	built-in `mapc'.

2000-11-23  Miles Bader  <miles@gnu.org>

	* faces.el (menu): Make inverse-video on ttys too.

2000-11-22  Stefan Monnier  <monnier@cs.yale.edu>

	* simple.el (comment-line-break-function): Use the new name
	indent-new-comment-line -> comment-indent-new-line.
	(clone-indirect-buffer): Don't ignore NORECORD.
	(next-completion): Properly handle the case where items are adjacent.

	* mouse.el (popup-menu): Stupid typo.

2000-11-22  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/authors.el: Remove autoload cookies, add author,
	maintainer, keywords tags.

	* rect.el (replace-rectangle): Don't call string-rectangle-line
	with too many arguments.

2000-11-22  Andre Spiegel  <spiegel@gnu.org>

	* ediff-util.el (ediff-file-checked-out-p)
	(ediff-file-checked-in-p): Call vc-state instead of
	vc-locking-user, which no longer exists.

	* emulation/viper-util.el (viper-file-checked-in-p): Same as above.

2000-11-22  Dave Love  <fx@gnu.org>

	* md5.el (md5): Provide.
	(md5): Fix error call.

2000-11-22  Miles Bader  <miles@gnu.org>

	* textmodes/refill.el (refill-adjust-ignorable-overlay)
	(refill-fill-paragraph-at): Remove debugging code.

	* calendar/calendar.el (generate-calendar-window): When we don't
	call `fit-window-to-buffer', make sure the top line is fully visible.

	* image-file.el (insert-image-file): Don't make `read-only'
	property rear-nonsticky.

	* isearch.el (isearch-original-minibuffer-message-timeout): New var.
	(isearch-mode): Set `minibuffer-message-timeout' to nil, after
	stashing away its original value.
	(isearch-edit-string): Temporarily restore `minibuffer-message-timeout'
	in the recursive edit.
	Bind `isearch-original-minibuffer-message-timeout' to protect it.
	(isearch-done): Restore `minibuffer-message-timeout'.

	* cus-start.el: Remove entry for `mode-line-inverse-video'.

2000-11-21  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/ada-mode.el (ada-mode): `set '' -> `setq'.

	* find-lisp.el (find-lisp-find-files-internal):
	Use dolist, when and file-name-as-directory.

	* emacs-lisp/edebug.el (edebug-form-spec prop): Use dolist.
	(define-derived-mode, define-minor-mode): Add specs.

	* window.el: General comment and spacing fixes.
	(save-selected-window): Use backquotes.
	(window-safely-shrinkable-p): New function.
	(shrink-window-if-larger-than-buffer): Use it.

	* subr.el (make-local-hook): Docstring fix.

	* shell.el (shell-mode): Use define-derived-mode.

	* newcomment.el (comment-indent): Insert comment before calling
	comment-indent-function.  Don't insert in column 0.
	(comment-dwim): Indent before inserting comment.

	* isearch.el (isearch-mode-map): Fix docstring.  Init in defvar.
	(minibuffer-local-isearch-map): Init in defvar.  Use inheritance.
	(isearch-clean-overlays, isearch-range-invisible, isearch-unread):
	Use mapc rather than map.

	* files.el (find-buffer-visiting): Compare all attributes before
	declaring two files identical (rather than just their inode-no).
	(auto-mode-alist): Use \' rather than $.

	* which-func.el: Update maintainer line.

	* pcvs.el (uniquify-buffer-file-name): Remove advice.
	* uniquify.el (uniquify-list-buffers-directory-modes): New var.
	(uniquify-buffer-file-name): Use it.

2000-11-22  Miles Bader  <miles@gnu.org>

	* cus-start.el: Add entry for `minibuffer-prompt-properties'.
	* simple.el (minibuffer-avoid-prompt): New function.

2000-11-21  Gerd Moellmann  <gerd@gnu.org>

	* Makefile.in (.SUFFIXES): Add .SUFFIXES.

2000-11-21  Miles Bader  <miles@gnu.org>

	* emacs-lisp/advice.el (ad-special-forms): Correct the conditional
	inclusion of `track-mouse'.

	* textmodes/refill.el (refill-ignorable-overlay): New variable.
	(refill-adjust-ignorable-overlay): New function.
	(refill-fill-paragraph-at): Use `refill-ignorable-overlay' to fill
	only the paragraph's tail if possible.
	Update `refill-ignorable-overlay'.
	(refill-mode): Initialize/cleanup `refill-ignorable-overlay'.

	* textmodes/refill.el (refill-fill-paragraph-at): Don't leave
	point inside the fill-prefix.

	* textmodes/refill.el (refill-post-command-function): Don't reset
	refill-doit in the case where a self-insertion command doesn't
	case a refill.  Use `refill-fill-paragraph-at', getting position
	from `refill-doit'.
	(refill-after-change-function): Set `refill-doit' to END.
	(refill-fill-paragraph-at): New function, mostly from old
	refill-fill-paragraph.
	(refill-fill-paragraph): Use `refill-fill-paragraph-at'.
	(refill-pre-command-function): New function.
	(refill-mode): Add it to `pre-command-hook'.

2000-11-20  Gerd Moellmann  <gerd@gnu.org>

	* textmodes/artist.el (artist-mode): Fix autoload cookie.

	* font-lock.el (java-keywords): Add MATCH-HIGHLIGHT part for
	javadoc tags.

2000-11-20  Andre Spiegel  <spiegel@gnu.org>

	* vc.el, vc-hooks.el: Undo prev change (moved functions back to
	vc.el).

	* vc-rcs.el (vc-rcs-state): Before calling vc-workfile-unchanged-p,
	require vc.

	* vc-cvs.el (vc-cvs-checkout): Fix bug that broke C-x v ~-style
	checkouts.

2000-11-20  Dave Love  <fx@gnu.org>

	* Makefile.in (DONTCOMPILE): Omit bindings.el.

2000-11-20  Eli Barzilay <eli@www.barzilay.org>

	* calculator.el (calculator-paste): Use `if' instead of `and'
	and `or'.
	(calculator-help): Don't use electric-describe-mode for XEmacs.

2000-11-19  Gerd Moellmann  <gerd@gnu.org>

	* info.el (info-menu-5): Doc fix.

	* textmodes/artist.el: New file.

2000-11-19  Andre Spiegel  <spiegel@gnu.org>

	* vc-rcs.el (vc-rcs-state): Call vc-workfile-unchanged-p only here,
	and differentiate according to checkout model.
	(vc-rcs-fetch-master-state): Don't call vc-workfile-unchanged-p,
	since this function is only concerned with master state.

	* vc-hooks.el (vc-workfile-unchanged-p,
	vc-default-workfile-unchanged-p): Moved here from vc.el.

	* vc.el (vc-workfile-unchanged-p,
	vc-default-workfile-unchanged-p): See above.

2000-11-19  Miles Bader  <miles@gnu.org>

	* image-file.el (insert-image-file): Make `intangible' and
	`read-only' properties rear-nonsticky too.

2000-11-18  Gerd Moellmann  <gerd@gnu.org>

	* ps-print.el: Update copyright notice.

	* tooltip.el (tooltip-x-offset, tooltip-y-offset): New user-options.
	(tooltip-show): Use the offsets.

	* bindings.el (mode-line-modified): Fix a typo.
	(mode-line-toggle-modified, mode-line-widen)
	(mode-line-abbrev-mode, mode-line-auto-fill-mode): Fix typos.

2000-11-17  Vinicius Jose Latorre <vinicius@cpqd.com.br>

	* ps-print.el (toplevel): Test for find-coding-system being
	fboundp before calling ps-x-find-coding-system.

2000-11-16  Stefan Monnier  <monnier@cs.yale.edu>

	* vc.el (vc-version-diff): Bind inhibit-read-only when inserting text.
	(vc-version-backup-file): Docstring fix.

2000-11-16  Gerd Moellmann  <gerd@gnu.org>

	* files.el (basic-save-buffer): Don't add a newline if
	find-file-literally is non-nil.
	(find-file-literally): Extend doc string.

	* sort.el (sort-columns): If sort-fold-case it non-nil, invoke
	sort(1) with the `-f' argument.

2000-11-16  Andre Spiegel  <spiegel@gnu.org>

	* vc.el: Updated backend documentation.
	(vc-default-check-headers): New function.

	* vc-{cvs,rcs,sccs}.el: Functions reordered.

	* vc.el (vc-revert-buffer): Ask for confirmation if file seems
	up-to-date.
	(vc-do-command): In the asynchronous case, output messages only if
	the minibuffer is not active.

	* vc-cvs.el (vc-cvs-revert): Use `cvs unedit' only if
	`vc-cvs-use-edit' is on.
	(vc-cvs-checkout): When this is used for reverting the workfile,
	make a backup of the original contents and revert to that in case
	of error.
	(vc-cvs-print-log, vc-cvs-diff): Use asynchronous mode only for
	remote repositories.

	* vc.el (vc-annotate): Changed handling of prefix arg; now asks
	for both version and ratio in the minibuffer.

	* vc-cvs.el (vc-cvs-annotate-command): New optional arg VERSION.
	Use vc-do-command to perform the annotation, not call-process.

2000-11-16  Kenichi Handa  <handa@etl.go.jp>

	* international/quail.el (quail-start-translation): Don't call
	`message' before reading key sequence.

2000-11-16  Miles Bader  <miles@lsi.nec.co.jp>

	* net/ange-ftp.el (ange-ftp-file-modtime): Don't use `caddr'.

2000-11-16  Kenichi Handa  <handa@etl.go.jp>

	* window.el (fit-window-to-buffer): Be sure to acquire at least
	one text line even if the buffer is empty.

2000-11-16  Gerd Moellmann  <gerd@gnu.org>

	* net/ange-ftp.el (ange-ftp-file-writable-p)
	(ange-ftp-file-readable-p, ange-ftp-file-executable-p): Bind
	ange-ftp-process-verbose to nil.

2000-11-15  Dave Love  <fx@gnu.org>

	* wid-edit.el (widget-specify-field, widget-specify-button): If
	:help-echo is a function, set help-echo of overlay to
	widget-mouse-help.
	(widget-mouse-help): New function.
	(widget-echo-help): Rewritten for :help-echo functions only taking
	a widget arg.

	* net/eudc-bob.el (eudc-bob-can-display-inline-images): Use
	display-graphic-p.
	(eudc-bob-display-jpeg) <!eudc-xemacs-p>: Test create-image bound
	and that JPEG is available.
	(eudc-bob-toggle-inline-display): Avoid non-existent `imagep'.

	* international/mule-cmds.el (locale-charset-language-names):
	Match @euro.

2000-11-15  Gerd Moellmann  <gerd@gnu.org>

	* faces.el (face-set-after-frame-default): If
	`inhibit-default-face-x-resources' is bound, don't intialize the
	default face from X resources.

2000-11-15  Eli Zaretskii  <eliz@is.elta.co.il>

	* Makefile.in (custom-deps, finder-data, autoloads, recompile):
	Don't set EMACSLOADPATH.

2000-11-15  Eli Zaretskii  <eliz@is.elta.co.il>

	* textmodes/texinfo.el (texinfo-insert-@uref): Renamed from
	texinfo-insert-@url.
	(texinfo-insert-@url): A defalias for texinfo-insert-@uref.
	(texinfo-mode-map): Bind "C-c C-c u" to texinfo-insert-@uref.

2000-11-14  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/checkdoc.el (checkdoc-minor-mode) <defvar>: Remove.
	(checkdoc-minor-mode-map): New map, replaces checkdoc-minor-keymap.
	(checkdoc-minor-keymap): Backward compatibility.
	(checkdoc-minor-menu): Don't bother checking checkdoc-minor-keymap.
	(checkdoc-minor-mode) <defun>: Use easy-mmode-define-minor-mode.
	(checkdoc-this-string-valid-engine): Be a bit more strict
	to avoid matching substrings of `...' quoted vars/funs.
	(checkdoc-defun-info): Only look for `interactive' if alone.
	(debug-ignored-errors): Add "arg doesn't appear in docstring".

	* progmodes/compile.el (grep): `tag-default' can be nil.

	* newcomment.el (comment-indent): Paren typo.

2000-11-14  Dave Love  <fx@gnu.org>

	* calculator.el: New maintainer version.

	* diff-mode.el (diff-imenu-generic-expression): Modify unidiff pattern.

	* cmuscheme.el: Doc fixes.
	(cmuscheme) <defgroup>: Use `scheme' as parent.
	(cmuscheme-program-name): Remove.  Change uses to
	scheme-program-name.

	* xscheme.el (scheme-program-name): Don't define here.

	* progmodes/scheme.el (scheme-program-name): New variable
	(originally in cmuscheme).

2000-11-14  Miles Bader  <miles@gnu.org>

	* window.el (fit-window-to-buffer): Handle windows without mode-lines.
	Handle header-lines.  Don't loop forever if we can't enlarge the
	window anymore.  Simplify a bit.

2000-11-14  Kenichi Handa  <handa@etl.go.jp>

	* window.el (fit-window-to-buffer): Don't check
	window-text-height.  Assure that the last line is fully visible.

	* international/quail.el (quail-show-guidance-buf): Call
	fit-window-to-buffer to assure the enough height of the guidance
	buffer.
	(quail-update-guidance): Avoid making the guidance buffer shorter.

2000-11-14  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/tex-mode.el (tex-font-lock-keywords-1): Use `keep'
	rather than `prepend' and add an interesting comment.
	(tex-math-face, tex-font-lock-syntactic-face-function):
	New face and function to use it.
	(tex-define-common-keys, tex-mode-map): Use menu-item rather
	than `menu-enable' symbol property.
	(tex-mode-map): Bind {, (, [ and $ to skeleton-pair-insert-maybe.
	(tex-mode): Add some latex-mode commands for auto-selection.
	Use tex-font-lock-syntactic-face-function.
	(tex-insert-quote): Simplify.
	(tex-shell): New mode.
	(tex-start-shell): Use it.
	(tex-shell-proc, tex-shell-buf): New functions.
	(tex-send-command): Use it.
	(tex-main-file): Fix the meaning of the new arg REALFILE.
	(tex-send-tex-command): New function split from `tex-start-tex'.
	Set compilation-last-buffer and compilation-parsing-end.

	* newcomment.el (comment-indent-default): Stick \s<\s< to the left
	when it follows non-comment text on the line.

	* emacs-lisp/lisp-mode.el (lisp-mode-variables):
	Set font-lock-defaults.
	(lisp-mode-shared-map): Init inside the defvar.
	(emacs-lisp-mode, lisp-mode, lisp-interaction-mode):
	Use define-derived-mode.

2000-11-14  Miles Bader  <miles@lsi.nec.co.jp>

	* faces.el (header-line): Use `:box nil' for color/gs displays too.

2000-11-14  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/byte-opt.el (byte-compile-unfold-lambda): Don't
	recursively optimize body because that can lead to infinite
	recursion; see comment there.

2000-11-13  Eli Zaretskii  <eliz@is.elta.co.il>

	* faces.el (face-spec-set-match-display): Revert the change from
	2000-10-24.  Add a FIXME for after v21.1.

2000-11-13  Miles Bader  <miles@gnu.org>

	* textmodes/fill.el (skip-line-prefix): New function.
	(fill-region-as-paragraph, fill-region):  Return the fill-prefix.
	(fill-paragraph): Don't leave point inside the fill-prefix.
	* textmodes/refill.el (refill-fill-paragraph-at): Don't leave
	point inside the fill-prefix.

2000-11-13  Miles Bader  <miles@lsi.nec.co.jp>

	* calendar/calendar.el (generate-calendar-window): Use
	`fit-window-to-buffer'.

2000-11-12  Stefan Monnier  <monnier@cs.yale.edu>

	* gud.el (gud-minor-mode): New var.
	(gud-symbol, gud-val): New functions.
	(gud-find-file): Copy gud-minor-mode to the new buffer.
	(gud-menu-map): Include entries for commands that are not always
	available, using :enable to (de)activate them.
	(gud-minor-mode-map): New map.  Add it to minor-mode-map-alist.
	(gud-mode-map): New map.
	(gud-gdb-find-file, gud-sdb-find-file, gud-dbx-find-file)
	(gud-xdb-find-file, gud-perldb-find-file, gud-pdb-find-file):
	Don't set up gud's menu (it's done by the minor-mode).
	(gud-minibuffer-local-map): New.
	Replace gdb-minibuffer-local-map and pdb-minibuffer-local-map.
	(gud-query-cmdline): New function.
	(gdb, sdb, dbx, xdb, perldb, pdb, jdb): Use it.  Set gud-minor-mode.
	(gud-mode): Use define-derived-mode.
	Don't set up gud's menu (it's done by the minor-mode).
	(gud-chop-words): Remove.
	(gud-common-init): Use split-string instead.
	(gud-new-keymap, gud-make-debug-menu): Eradicate.

	* emacs-lisp/easy-mmode.el (easy-mmode-define-keymap):
	Add keyword arg :name.

	* diff-mode.el (diff-mode-menu): Add entry for applying hunk.
	(diff-count-matches, diff-split-hunk): New functions.
	(diff-mode-map): Bind C-c C-s to diff-split-hunk.

	* pcvs-info.el (cvs-fi-conflict-face): New var.

	* progmodes/sh-script.el (sh-mode-syntax-table) <defvar>:
	Make it into a simple syntax-table, shared among all submodes.
	(sh-heredoc-face): Re-introduce.
	(sh-font-lock-syntactic-face-function): New function.
	(sh-mode): Use it.  Also use define-derived-mode.
	Remove old bogus setting of indent-region-function.
	(sh-set-shell): Don't set the syntax-table any more.
	(sh-mode-syntax-table) <defun>: Remove.

2000-11-12  Miles Bader  <miles@gnu.org>

	* textmodes/flyspell.el (flyspell-mode-on): Only output welcome
	message if interactive.

2000-11-12  Dave Love  <fx@gnu.org>

	* mail/feedmail.el: Fix header,
	(feedmail) <defgroup>: Add :link.

	* view.el: Use local-map property, not keymap on mode-line string.

	* scroll-all.el (scroll-all-mode): Customize variable.  Add
	autoload cookie to function.

	* lazy-lock.el: Remove compatibility code.

	* finder.el (finder-known-keywords): Add `files', remove `vms'.
	(finder-help-echo): New variable.
	(finder-mouse-face-on-line): Add help-echo stuff.
	(finder-list-keywords, finder-list-matches): Use mapc.

	* faces.el (face-font-registry-alternatives): Add :version.

	* progmodes/etags.el (visit-tags-table-buffer): Beware of `t' in
	tags-table-list.

	* net/browse-url.el (browse-url-browser-function): Update :version.

	* mail/sendmail.el (mail-font-lock-keywords): Use [:alpha:], not a-z.
	(mail-mode): Use [:alnum:] in some regexps.

2000-11-10  Dave Love  <fx@gnu.org>

	* ediff.el (ediff-regions-internal, ediff-documentation):
	* ediff-vers.el (rcs-ediff-view-revision): Put temp buffer into
	fundamental mode.

	* ediff-util.el (ediff-status-info, ediff-debug-info): Put temp
	buffer into fundamental mode.
	(ediff-set-difference): Use copy-sequence if available.

	* ediff-ptch.el (ediff-dispatch-file-patching-job): Check
	ediff-patch-map non-nil.
	(ediff-fixup-patch-map, ediff-fixup-patch-map)
	(ediff-fixup-patch-map, ediff-patch-file-internal): Put temp
	buffer into fundamental mode.

	* ediff-merg.el (state-or-merge): Defvar when compiling.

2000-11-10  Jason Rumney  <jasonr@gnu.org>

	* w32-fns.el (w32-add-charset-info): New function.
	(w32-charset-info-alist): Use it.

2000-11-10  Gerd Moellmann  <gerd@gnu.org>

	* faces.el (face-font-registry-alternatives): New user-option.

2000-11-10  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/texinfo.el (texinfo-block-default): New var.
	(texinfo-insert-block): Use it.  Insert a newline if needed.

	* textmodes/fill.el (fill-indent-according-to-mode): New var.
	(fill-region-as-paragraph): Use it.

	* textmodes/tex-mode.el (standard-latex-block-names): Add "math".
	(latex-mode): Tweak tex-*-(head|trail)er regexps.
	Tweak paragraph regexps to allow a leading [ \t]*.
	(tex-latex-block): Insert a newline if necessary.
	(latex-insert-item): Only insert a newline if necessary.
	(tex-guess-main-file): New function.
	(tex-main-file): Use it.  Add arg `realfile'.  Trim `.tex'.
	Set tex-main-file if TeX-master is provided.
	(tex-latex-indent-syntax-table): Map ( and ) to punctuation.

2000-11-10  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (command-line): Set the default tooltip-mode
	to t for graphical displays which implement x-show-tip.

	* tooltip.el (tooltip-mode): Add a comment about startup.el
	setting the default value of this user-option.

2000-11-09  Stefan Monnier  <monnier@cs.yale.edu>

	* font-lock.el (font-lock-*-face) <defvar>: Move.
	(font-lock-defaults-alist): Mark obsolete.
	(font-lock-mode, font-lock-mode-hook) <defvar>: Remove.
	(font-lock-mode): Use define-minor-mode.
	(font-lock-support-mode): Tweak type to default to jit-lock-mode.
	(font-lock-turn-off-thing-lock): Be more explicit.
	(font-lock-apply-syntactic-highlight): Use string-to-syntax after eval.
	(font-lock-syntactic-face-function): New var.
	(font-lock-fontify-syntactically-region): Use it.
	(font-lock-doc-face): New.

	* pcvs.el (cvs-enabledp): Ignore errors.
	(cvs-commit-filelist): Never query.
	(cvs-mode-insert): Always add a terminating / in the initial prompt.
	(cvs-mode-diff-backup): Use cvs-partition rather than delete-if-not.
	(cvs-do-removal): Use cvs-partition rather than delete-if.
	Use cvs-insert-strings, cvs-pop-to-buffer-same-frame and
	cvs-bury-buffer.

	* emacs-lisp/easy-mmode.el (easy-mmode-define-navigation):
	Allow `next' to jump to after the end of the last match.

2000-11-09  Gerd Moellmann  <gerd@gnu.org>

	* simple.el (byte-compiling-files-p): New function.

	* textmodes/ispell.el (toplevel): Use byte-compiling-files-p
	if it is there.

	* emacs-lisp/bytecomp.el (byte-compile-current-file): Bind it to
	nil again.

	* textmodes/ispell.el (ispell-library-path): Don't call
	check-ispell-version when byte-compiling because that starts
	an ispell process, and ispell might not be installed.
	(toplevel): Don't set up a menu when byte-compiling.

	* emacs-lisp/bytecomp.el (byte-compile-current-file): Don't bind
	it, so that a boundp test can be used to determine if we're
	currently byte-compiling.

2000-11-09  Dave Love  <fx@gnu.org>

	* pcvs.el (uniquify-buffer-file-name): Wrap advice in
	eval-after-load.

2000-11-09  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Patch for variable initialization when spooling.  Doc
	fix.
	(ps-output-list): Fun eliminated.
	(ps-begin-file, ps-begin-job): Code fix.

2000-11-08  Dave Love  <fx@gnu.org>

	* ediff-wind.el (ediff-control-frame-parameters): Zero
	tool-bar-lines.

2000-11-08  Gerd Moellmann  <gerd@gnu.org>

	* simple.el (shell-command, display-message-or-buffer)
	(shell-command-on-region): Mention resize-mini-windows in the doc
	string.
	(display-message-or-buffer): Take the value of resize-mini-windows
	into account.

2000-11-07  Gerd Moellmann  <gerd@gnu.org>

	* macros.el (insert-kbd-macro): Print semi-colons as `?\;'.

	* dired.el (dired-between-files): Add `^. find' as an alternative
	to the regular expression, for find-dired.

2000-11-06  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/texnfo-upd.el: Require texinfo.
	(defmacro, defgroup): Remove.
	(texinfo-section-to-generic-alist): Remove.
	Use texinfo-section-list instead (i.e. level is changed string->int).
	(texinfo-filter): New function.
	(texinfo-chapter-level-regexp, texinfo-subsubsection-level-regexp)
	(texinfo-subsection-level-regexp, texinfo-section-level-regexp):
	Use it.  And use regexp-opt.
	(texinfo-find-higher-level-node, texinfo-hierarchic-level)
	(texinfo-update-menu-region-beginning)
	(texinfo-update-menu-higher-regexps, texinfo-update-menu-lower-regexps)
	(texinfo-update-the-node, texinfo-sequentially-update-the-node)
	(texinfo-update-menu-same-level-regexps): Update.
	(texinfo-update-node, texinfo-every-node-update)
	(texinfo-sequential-node-update): Remove autoload cookie.

	* textmodes/texinfo.el (texinfo-section-list): Change majorheading.
	(texinfo-font-lock-syntactic-keywords): Use syntax-strings.
	(texinfo-chapter-level-regexp): Remove.
	(texinfo-mode): Hard code texinfo-chapter-level-regexp.

2000-11-06  Dave Love  <fx@gnu.org>

	* autoinsert.el (auto-insert-alist) <latex-mode>: Use \documentclass.

	* emacs-lisp/lisp-mode.el (lisp-imenu-generic-expression):
	Match defun*.

2000-11-06  Kenichi Handa  <handa@etl.go.jp>

	* composite.el (composition-function-table): Variable declaration
	moved to src/composite.c.
	(compose-chars-after): New optional arg object.

2000-11-06  Gerd Moellmann  <gerd@gnu.org>

	* bindings.el (mode-line-toggle-read-only)
	(mode-line-toggle-modified, mode-line-widen)
	(mode-line-abbrev-mode, mode-line-auto-fill-mode): New functions.
	(make-mode-line-mouse2-map): Rewritten.
	(mode-line-modified, mode-line-format, minor-mode-alist): Use new
	functions so that C-h k can show something with a doc string.

	* startup.el (fancy-splash-delay): Set to 10 seconds.
	(fancy-splash-max-time): New user-option.
	(fancy-splash-stop-time): New variable.
	(fancy-splash-screens): Set it.  Catch `stop-splashing'.
	(fancy-splash-screens-1): Throw `stop-splashing' when current
	time is greater than fancy-splash-stop-time.

2000-11-06  Stefan Monnier  <monnier@cs.yale.edu>

	* vc-hooks.el (vc-insert-file): Don't assume byte==char.

	* pcvs.el (cvs-mode-marked): New arg `noquery'.
	Prompt user for a file rather than raising an error.
	(cvs-enabledp): Fix call to cvs-mode-marked.
	(cvs-insert-file): New function (extracted from cvs-mode-insert).
	(cvs-mode-insert): Use it.  Change the init prompt' value.
	(cvs-mode-tree): Use cvs-status-cvstrees instead of cvs-status-trees.

	* emacs-lisp/ewoc.el (ewoc-goto-prev, ewoc-goto-next):
	Don't pass default arg to ewoc-locate.
	(ewoc-collect): Return result in the right order.

	* log-edit.el (log-edit-show-files): Use cvs-insert-strings.

	* cvs-status.el (cvs-tree-merge): Use cvs-butlast (avoid CL).
	(cvs-status-get-tags): Fix regexp.
	(cvs-status-trees, cvs-status-cvstrees):
	Combine after change hooks and don't sit-for.
	(cvs-tree-use-jisx0208): Rename from cvs-tree-dstr-2byte-ready.
	(cvs-tree-char-*): Rename from cvs-tree-dstr-char-*.
	Use make-char rather than hard-coded cryptic data.
	(cvs-status-cvstrees): Convert the buffer to multibyte if necessary.

	* pcvs-defs.el (cvs-menu): Add entries for tree and insert.

	* pcvs-util.el (cvs-butlast, cvs-nbutlast): New (copied from CL).
	(cvs-insert-strings): New function.

2000-11-06  Miles Bader  <miles@lsi.nec.co.jp>

	* mwheel.el (mouse-wheel-scroll-amount): Renamed from
	`mwheel-scroll-amount'.
	(mouse-wheel-follow-mouse): Renamed from `mwheel-follow-mouse'.
	(mouse-wheel-mode): Use (featurep 'xemacs) instead of
	string-matching against the version string.

2000-11-06  Kenichi Handa  <handa@etl.go.jp>

	* language/thai.el ("Thai"): Set a lisp form that produces
	composed string in `sample-text' language info.

	* language/tibetan.el ("Tibetan"): Set a lisp form that produces
	composed string in `sample-text' language info.

	* international/mule-cmds.el (describe-language-environment): Eval
	`sample-text' data and insert the result.

	* international/mule-conf.el (compound-text): Define this coding
	system here.  Make x-ctext and ctext aliases of it.

	* language/european.el (compound-text, ctext): Moved to
	international/mule-conf.el.

2000-11-05  Andrew Innes  <andrewi@gnu.org>

	* w32-fns.el (w32-version): New function.

2000-11-05  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/awk-mode.el: Update copyright.
	(awk-mode-abbrev-table): Remove.
	(awk-font-lock-keywords): Use regexp-opt.
	(awk-mode): Use define-derived-mode.

	* emacs-lisp/regexp-opt.el (regexp-opt-group): Sort the strings
	when extracting a suffix.

2000-11-04  Andre Spiegel  <spiegel@gnu.org>

	* vc-hooks.el (vc-insert-file): Rewritten.  Don't bother about
	auto-save-mode.

2000-11-04  Jason Rumney  <jasonr@gnu.org>

	* language/european.el (decode-mac-roman): Test against r1 not r0.

2000-11-03  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/icon.el (icon-mode-map): Don't rebind \t.
	(icon-mode): Define indent-line-function.
	(icon-comment-indent): Simplify.
	(icon-font-lock-keywords-2): Use the `words' arg to regexp-opt.

	* emacs-lisp/find-func.el (find-function-do-it): Quote the hook.

	* pcvs.el (cvs-mode-add-change-log-entry-other-window):
	Bind change-log-default-mode to defeat the caching done on it.
	Don't bother saving excursion any more.

	* menu-bar.el (minibuffer maps): Use dolist rather than mapcar.

	* frame.el (after-setting-font-hook): Rename hooks -> hook.
	(set-frame-font): Use the new name (and the old for compatibility).

	* toolbar/tool-bar.el (tool-bar-mode):
	* time.el (display-time-mode):
	* recentf.el (recentf-mode):
	* paren.el (show-paren-mode):
	* mwheel.el (mouse-wheel-mode):
	* msb.el (msb-mode):
	* jka-compr.el (auto-compression-mode):
	* image-file.el (auto-image-file-mode):
	* hl-line.el (hl-line-mode):
	* delsel.el (delete-selection-mode):
	* autoinsert.el (auto-insert-mode):
	* complete.el (partial-completion-mode): Drop unneeded positional args.

	* info.el (Info-mode):
	* comint.el (comint-mode): Don't bother with make-local-hook.

	* log-edit.el (log-edit-menu): New menu.

2000-11-03  Miles Bader  <miles@gnu.org>

	* wid-edit.el (widget-end-of-line): Reinstate, with a new
	definition, so that trailing spaces are handled properly.
	(widget-field-keymap, widget-text-keymap): Likewise C-e binding.

2000-11-03  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (fancy-splash-text, fancy-splash-text): Use a single
	tab character.
	(fancy-splash-screens): Set tab-width to 20.

2000-11-03  Dave Love  <fx@gnu.org>

	* comint.el (comint-completion-addsuffix): Fix custom type.

2000-11-02  Stefan Monnier  <monnier@cs.yale.edu>

	* font-lock.el (font-lock-buffers): Remove.
	(font-lock-global-modes): Define with easy-mmode-define-global-mode.
	(font-lock-change-major-mode): Remove.
	(turn-on-font-lock-if-enabled): Only apply to the current buffer.
	(font-lock-default-fontify-region): Extend the multiline
	fontification to whole lines.
	(font-lock-fontify-anchored-keywords)
	(font-lock-fontify-keywords-region): If matching just one
	line (with \n) only mark the \n as multiline.

	* emacs-lisp/easy-mmode.el (define-minor-mode): Remove :toggle arg.
	Correctly handle the case where several :group args are supplied.
	Allow :extra-args.
	(easy-mmode-define-global-mode): Allow :extra-args.
	Correctly handle the case where several :group args are supplied.

2000-11-02  Miles Bader  <miles@gnu.org>

	* calendar/calendar.el (diary-face, calendar-today-face)
	(holiday-face): Remove dependency on `window-system'.

2000-11-02  Ken Raeburn  <raeburn@gnu.org>

	* Makefile.in (emacs): Set EMACSLOADPATH always.
	(update-authors, .el.elc, compile-files): Don't do it explicitly
	here.
	(compile-files): Bomb out if compilation of a file fails.

2000-11-02  Dave Love  <fx@gnu.org>

	* emacs-lisp/find-func.el (find-variable-regexp): Avoid defgroup.

2000-11-02  Eli Zaretskii  <eliz@is.elta.co.il>

	* mail/emacsbug.el (report-emacs-bug): Fix whitespace and
	punctuation in the warning inserted into the *mail* buffer.

2000-11-02  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/authors.el (authors-public-domain-files): New variable.
	(authors-public-domain-p): New function.
	(authors-print): Use it.

	* help.el (view-emacs-news): Use ONEWS.* instead of NEWS.* files.

	* mail/mh-e.el, mail/mh-comp.el: Change maintainer.

2000-11-02  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Extension for even/odd printing.  Doc fix.
	(ps-print-version): New version number (6.3.1).
	(ps-even-or-odd-pages): Customization fix.
	(ps-print-page-p, ps-begin-file, ps-begin-job, ps-page-number)
	(ps-header-sheet, ps-header-page, ps-end-job): Code fix.
	(ps-page-count): Var replaced by `ps-page-column'.
	(ps-page-column, ps-page-sheet, ps-page-printed): New vars.
	(ps-print-sheet-p): New fun.

2000-11-02  Miles Bader  <miles@lsi.nec.co.jp>

	* tooltip.el (tooltip-gud-tips-setup): New function.
	(tooltip-gud-tips-p): Add :set to call tooltip-gud-tips-setup.
	(tooltip-mode): Call tooltip-gud-tips-setup.
	(tooltip-gud-tips): Use `gud-basic-call' instead of
	process-send-string, so the prompt gets frobbed appropriately.
	Handle nil return value from `tooltip-gud-print-command'.

2000-11-01  Eric M. Ludlam  <zappo@ultranet.com>

	* comint.el (comint-add-to-input-history): New function.
	(comint-send-input): Use `comint-add-to-input-history'.

2000-11-02  Miles Bader  <miles@lsi.nec.co.jp>

	* info.el (info-menu-header): New face.
	(Info-fontify-menu-headers): New function.
	(Info-fontify-node, Info-insert-dir): Call `Info-fontify-menu-headers'.

	* info.el (Info-insert-dir): Don't include blank lines at
	beginning of additional dir files (one is added automatically).

2000-11-01  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/easy-mmode.el (define-minor-mode):
	Revert the latest changes.
	Allow the three positional arguments to be skipped and replaced
	by keyword arguments.
	Add a :toggle argument to determine whether a nil arg means toggle
	or means turn-on.  The default is unchanged.
	Add a call to force-mode-line-update.

2000-11-01  Dave Love  <fx@gnu.org>

	* emacs-lisp/elp.el (elp-restore-function): Remove autoload
	cookie.

2000-11-01  Miles Bader  <miles@lsi.nec.co.jp>

	* calendar/calendar.el (diary-face, holiday-face): Add
	dark-background variants.

2000-10-31  Sam Steingold  <sds@gnu.org>

	* textmodes/tex-mode.el (tex-file): Use `default-directory' when
	`tex-main-file' does not have directory in it.

2000-10-31  Stefan Monnier  <monnier@cs.yale.edu>

	* cus-edit.el (custom-mode-map): Switch back to a sparse keymap.

2000-10-31  Thien-Thi Nguyen  <ttn@gnu.org>

	* ediff-init.el (ediff-prepare-buffer-hook): Expand docstring, no
	functional change.

2000-10-31  Gerd Moellmann  <gerd@gnu.org>

	* files.el (find-file-noselect): When we expand a wildcard, return
	a list of buffers, as we should do according to the doc string.

2000-10-31  Ken Raeburn  <raeburn@gnu.org>

	* loadup.el (top level): Adjust load path if program name is
	"../src/bootstrap-emacs", in case it's not dumped and thus the
	load path adjustment hasn't already been done.

2000-10-31  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Fix bug on selected pages for printing.  Use
	`color-values' for Emacs 21.  Ensure fontification when jit-lock
	is on.  Try to avoid warning messages when compiling.  Doc Fix.
	(ps-print-version): New version number (6.3).
	(ps-color-device): Use `color-values' to determine if device
	supports color.
	(ps-color-values): Try to use `x-color-values' when using XEmacs.
	(ps-print-page-p): Changed from defsubst to defun.
	(ps-page-number): Changed from defmacro to defun.
	(ps-header-sheet, ps-header-page): Fix bug on selected pages for
	printing.
	(ps-print-ensure-fontified): Ensure fontification when jit-lock is on.
	(ps-end-file, ps-dummy-page): Funs eliminated.
	(ps-print-color-scale): Changed default value.
	(ps-page-n-up, ps-print-page-p): New internal vars.
	(ps-print-preprint, ps-output, ps-begin-file, ps-begin-page)
	(ps-plot-region, ps-generate, ps-end-job): Code fix.

	* delim-col.el: Little programming improvement.
	(delimit-columns-str): New macro.
	(delimit-columns-region, delimit-columns-rectangle): Code fix.

2000-10-31  Kenichi Handa  <handa@etl.go.jp>

	* term/mac-win.el (decode-mac-roman, encode-mac-roman, mac-roman):
	Moved to european.el.
	(ccl-encode-mac-roman-font, fontset-mac): Modified for
	mule-unicode-2500-33ff and mule-unicode-e000-ffff.
	(mac-roman-kbd-insert, mac-roman-kbd-mode): These functions deleted.
	(mac-roman-kbd-mode, mac-roman-kbd-mode-map): These variables deleted.

2000-10-30  Dave Love  <fx@gnu.org>

	* progmodes/cc-menus.el (imenu-generic-expression)
	(imenu-progress-message): Only defvar when compiling.

	* emacs-lisp/elp.el (elp-unload-hook): New function.

	* loadhist.el (unload-feature): Call elp-restore-function,
	checking for symbols; don't use elp-restore-all.
	(loadhist-hook-functions): Doc fix.

2000-10-30  Stefan Monnier  <monnier@cs.yale.edu>

	* log-edit.el (log-edit-confirm): Fix the default.

2000-10-30  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* delim-col.el: Little fix: replace delimit-columns-align-columns by
	delimit-columns-format.
	(delimit-columns-region, delimit-columns-rectangle): Code fix.

2000-10-30  Miles Bader  <miles@lsi.nec.co.jp>

	* comint.el (comint-replace-by-expanded-history): Don't use
	comint-get-old-input (we're not looking at *old* input).
	(comint-get-old-input-default): If using fields, signal an error
	when the point is not in an input field.

2000-10-30  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-conf.el: New charsets mule-unicode-2500-33ff
	and mule-unicode-e000-ffff.

	* international/mule.el (decode-char, encode-char): New functions.
	(make-coding-system): Accept a symbol of translation table as a
	value of property `safe-chars'.

	* international/mule-cmds.el (encode-coding-char): Check property
	safe-chars instead of safe-charsets.

	* international/fontset.el (fontset-default): Modified for
	mule-unicode-2500-33ff and mule-unicode-e000-ffff.
	(x-font-name-charset-alist): Likewise.
	(ccl-encode-unicode-font): New CCL program.  Record it in
	font-ccl-encoder-alist to be used for fonts "ISO10646-1".

	* language/european.el (mac-roman-decoder, mac-roman-encoder):
	New translation tables.
	(decode-mac-roman, encode-mac-roman): Definition of these CCL
	programs are modified and moved from mac-win.el.
	(mac-roman): Definition of this coding system is modified and
	moved from mac-win.el.

2000-10-29  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff-wind.el (ediff-setup-control-frame): Enclose
	face-attribute in condition-case to avoid errors in older emacsen.

2000-10-29  Miles Bader  <miles@gnu.org>

	* custom.el (custom-add-to-group): Allow multiple entries for a
	given value OPTION, as long as their widget types are different.
	* cus-edit.el (custom-face-value-create): If face name doesn't end
	with "face", add such here (similar to custom group widgets).

	* comint.el (comint-highlight-prompt): Add :type.

2000-10-28  John Wiegley  <johnw@gnu.org>

	* textmodes/flyspell.el (flyspell-maybe-correct-transposition):
	Changed this function to operate on a temporary buffer instead of
	the main buffer.  This not only keeps flyspell from marking a
	buffer as changed that wasn't, but it solves the jumpy cursor
	problem when attempts are made to edit incorrect words.
	(flyspell-maybe-correct-doubling): Same change as for
	`flyspell-maybe-correct-transposition'.

	* calendar/timeclock.el (timeclock-log): Doc fix.
	(timeclock-last-event): Doc fix.
	(timeclock-log): Kill the timelog buffer after appending a new
	event.
	(timeclock-find-discrep): Use a temp buffer to read in the
	timelog, instead of visiting the file.
	(timeclock-log-data): A new function, along with a host of helper
	functions, for the purpose of making timelog data accessible to
	programmers.

	* eshell/esh-mode.el (window-height test): Make certain that
	`eshell-stringify-t' is non-nil.
	(eshell-password-prompt-regexp): Changed to a much simpler
	password regexp.
	(eshell-send-input): If `eshell-invoke-directly' returns t,
	directly invoke the parsed command using `eval'.  This improves
	turn-around time on simple commands by a factor of three or
	greater, such as cd, ls, pwd, etc. -- which get used very often.
	It also conserves thousands of cons cells per call (since
	`eshell-do-eval' consumes memory like a Cookie Monster set loose
	in the Pacific Cookie Company).

	* eshell/esh-test.el (eshell-test): Whitespace fix.

	* eshell/em-ls.el (eshell-ls-insert-directory): Make
	`eshell-ls-initial-args' nil when inserting directory contents.

	* eshell/em-script.el (eshell-script-initialize): Add names to
	`eshell-complex-commands, since `source' and `.' are complex.

	* eshell/esh-cmd.el (eshell-rewrite-for-command)
	(eshell-rewrite-while-command): Use `eshell-protect' instead of
	`eshell-copy-handles'.
	(eshell-rewrite-if-command): Use `eshell-protect' to wrap the call
	bodies.
	(eshell-separate-commands): Whitespace fix.
	(eshell-complex-commands): Added a new list of names, for
	determining whether a given command is as simple as it looks.
	(eshell-invoke-directly): New function.  Returns t if a command
	should be invoked directly (using `eval'), rather than indirectly
	using `eshell-do-eval'.
	(eshell-do-eval): Whitespace fix.

	* eshell/em-unix.el (eshell-default-target-is-dot): New variable,
	which provides an emulation of the DOS shell behavior of assuming
	that cp/mv/ln should copy/move/link to the current directory.
	(eshell-remove-entries): Added a doc string.
	(eshell-shuffle-files): Removed the check for `target' being null.
	(eshell-mvcp-template, eshell-mvcpln-template): Renamed
	`eshell-mvcp-template' to `eshell-mvcpln-template', and extended
	it to do a smarter check of whether a destination was provided.
	(eshell/mv, eshell/cp): Enable `:preserve-args'.
	(eshell/ln): Enable `:preserve-args', and use
	`eshell-mvcpln-template' to implement the body of the function.
	(eshell/cat, eshell/make, eshell-poor-mans-grep, eshell-grep)
	(eshell/du, eshell/diff, eshell/locate): Stringify the argument
	list after flattening it.  This makes it possible to cat files
	with numerical names.
	(eshell-unix-initialize): Added several names to
	`eshell-complex-commands.
	(eshell-unix-command-complex-p): Return t if a given command name
	may result in external processes being invoked.

	* eshell/em-glob.el (eshell-glob-show-progress): Make this
	variable nil by default, since it slows down glob processing by a
	factor of two or more, and increases memory consumption.

	* eshell/em-smart.el: Added a note about how memory consumptive
	smart display mode can be (at least this is true in Emacs 21).
	(eshell-smart-initialize): Whitespace fix.
	(eshell-refresh-windows): Use `if' instead of `when'.
	(eshell-smart-scroll-window): Calling `save-current-buffer' was
	not necessary.
	(eshell-currently-handling-window): Added a missing global
	variable.

	* eshell/em-ls.el (eshell-do-ls): Code simplification.
	(eshell-ls-sort-entries, eshell-ls-entries, eshell-ls-dir):
	Whitespace fix.
	(eshell-ls-exclude-hidden): Added this variable in addition to
	`eshell-ls-exclude-regexp'.  This one prevents files beginning
	with . from even being read, which can improve memory consumption
	quite a bit.
	(eshell-ls-dir): If `eshell-ls-exclude-hidden' is non-nil, do not
	read file entries beginning with a dot.  In home directories with
	lots of hidden files, fully two-thirds of the time spent in ls is
	used to read directory entries that are immediately thrown away.
	(eshell-ls-initial-args): Added back this configuration variable,
	for specifying default initial arguments to every call to ls.
	Much faster than using an alias to do the same thing.
	(eshell-do-ls): Use `eshell-ls-initial-args', if set.
	(eshell-ls-dir): Whitespace change.

	* eshell/em-dirs.el (eshell/pwd): Small code simplification.

	* eshell/esh-util.el: Don't require `ange-ftp' if it's not
	available.
	(eshell-stringify-t): Added a customization variable, to indicate
	whether `t' should be rendered as a string at all.  If not, one
	can still determine if the result of an expression is true using
	"file-exists-p FILE && echo true".
	(eshell-stringify): If `eshell-stringify-t' is nil, don't
	stringify t!

	* eshell/esh-module.el: Whitespace fix.

	* eshell/em-alias.el (eshell-alias-initialize): Added
	`eshell-command-aliased-p' to `eshell-complex-commands'.
	(eshell-command-aliased-p): New function that returns t if a
	command name names an aliased.

2000-10-29  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper-cmd.el (viper-preserve-cursor-color): New test that avoids
	redrawing the screen when changing cursor color.
	(viper-insert-state-pre-command-sentinel)
	(viper-replace-state-pre-command-sentinel)
	(viper-replace-state-post-command-sentinel):
	Use viper-preserve-cursor-color.
	Many functions changed to use viper= instead of = when comparing
	characters.
	* viper-util.el (viper-memq-char,viper=): New functions for
	working with characters.
	(viper-change-cursor-color): Fixed buglet.
	Many functions changed to use viper= instead of = when comparing
	characters.
	* viper.el (viper-insert-state-mode-list): Added eshell.

	* ediff-init.el (ediff-before-setup-hook): New hook.
	Several typos fixed in various docstrings.
	* ediff-merg.el (ediff-show-clashes-only): Docstring typo fixed.
	* ediff-nult.el (ediff-before-session-group-setup-hooks): New
	hook.
	(ediff-show-meta-buffer): Run ediff-before-session-group-setup-hooks.
	* ediff-util.el (ediff-setup): Run ediff-before-setup-hook.
	(ediff-other-buffer): Use selected buffers if in Buffer-menu buffer.
	(ediff-get-selected-buffers): New function.
	* ediff-vers.el (ediff-vc-internal,ediff-rcs-internal)
	(ediff-vc-merge-internal,ediff-rcs-merge-internal): Use
	save-window-excursion.
	* ediff-wind.el (ediff-skip-unsuitable-frames): More robust
	termination check in while loop.
	* ediff.el (ediff-get-default-file-name): Better defaults when in
	dired buffer.
	(ediff-files,ediff-merge-files,ediff-files3)
	(ediff-merge-files-with-ancestor): Use ediff-get-default-file-name.

2000-10-28  Dave Love  <fx@gnu.org>

	* info.el (Info-fontify-node): Add help-echo for menu items.

2000-10-28  Eli Zaretskii  <eliz@is.elta.co.il>

	* startup.el (normal-top-level): If the value of $TERM indicates
	we are running from xterm or one of its work-alikes, default to a
	light background mode.

	Support for -fg, -bg, and -rv command-line arguments for TTYs:
	* faces.el (tty-handle-reverse-video): New function.
	(tty-create-frame-with-faces): Call it.

	* frame.el (frame-notice-user-settings): Don't apply
	default-frame-alist and initial-frame-alist to MS-DOS frames.
	Call tty-handle-reverse-video, frame-set-background-mode, and
	face-set-after-frame-default for non-MS-DOS frames.

	* startup.el (tty-long-option-alist): New variable.
	(tty-handle-args): New function.
	(command-line): Call tty-handle-args.

	* term/pc-win.el (x-long-option-alist, msdos-handle-args): Remove;
	startup.el now does that for all character-terminal frames.

2000-10-28  Miles Bader  <miles@gnu.org>

	* emacs-lisp/easy-mmode.el (define-minor-mode): Generate
	`turn-on-MODE' and `turn-off-MODE' functions unless the mode is
	global.  If :global is followed by a non-nil but non-t value,
	make the mode buffer-local, but also generate a `global-MODE'
	version using `easy-mmode-define-global-mode'.  Add
	:conditional-turn-on keyword argument.

2000-10-28  Dave Love  <fx@gnu.org>

	* international/latin1-disp.el (latin1-char-displayable-p): Don't
	use window-system.

2000-10-27  Eli Zaretskii  <eliz@is.elta.co.il>

	* dos-w32.el (find-file-not-found-set-buffer-file-coding-system):
	Don't call find-buffer-file-type-coding-system.  Instead, just
	set eol-type to -unix if inhibit-eol-conversion is in effect, or
	if the file is on an untranslated filesystem.
	(add-untranslated-filesystem): Use "D" instead of "f" inside
	interactive.

2000-10-27  Dave Love  <fx@gnu.org>

	* textmodes/refill.el (refill-late-fill-paragraph-function): New var.
	(refill-mode): Use it.

2000-10-27  Stefan Monnier  <monnier@cs.yale.edu>

	* international/quail.el (quail-activate): Don't make-local-hook.

2000-10-27  Andre Spiegel  <spiegel@gnu.org>

	* vc-hooks.el (vc-version-backup-file-name): Use file.~<rev>~ for
	manual backups and file.~<rev>.~ for automatic ones.
	(vc-make-version-backup): Don't do it on MS-DOS without long file
	names.

	* vc.el (vc-version-other-window): If an automatic backup of the
	desired version exists, rename it instead of copying it.

	* vc-cvs.el (vc-cvs-checkin): Check both status and error message
	after command.  If there's an unexpected error, signal it instead
	of being silent.
	(vc-cvs-merge-news): Be prepared for no news at all.

2000-10-27  Miles Bader  <miles@lsi.nec.co.jp>

	* shell.el (shell): Add BUFFER argument.
	* comint.el (make-comint-in-buffer): New function.
	(make-comint): Use it.

	* faces.el (face-spec-choose): Change syntax so that the list of
	attribute-value pairs is now the cdr of each clause, not the cadr.
	Detect old-style entries, and handle them.  Use pop.

2000-10-26  Stefan Monnier  <monnier@cs.yale.edu>

	* cus-edit.el (custom-mode-map): Use a sparse map.
	(custom-mode): Don't bother with make-local-hook.

	* wid-edit.el (widget-add-change): Don't bother with make-local-hook.

	* vc.el (vc-start-entry): Only erase the buffer if comment is set.

2000-10-26  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Avoid compilation gripes.
	(ps-print-version): New version number (6.2.1).

2000-10-26  Dave Love  <fx@gnu.org>

	* menu-bar.el: Modify some menu item help strings.
	(menu-bar-help-menu): Add link to MORE.STUFF.

	* cus-edit.el (custom-mode): Add `special' mode-class property.

	* wid-browse.el (widget-browse-mode): Likewise.

	* wid-edit.el (widget-specify-field): Revert to using local-map
	property, not keymap.

2000-10-26  Miles Bader  <miles@lsi.nec.co.jp>

	* wid-edit.el (widget-field-end): When checking for a `boundary'
	field, do so in the correct buffer.

	* simple.el (undo): Correctly distinguish between numeric and
	non-numeric prefix args in non-transient-mark-mode, as per the doc
	string.  When in transient-mark-mode, treat all prefix-args as
	numeric.

	* simple.el (previous-matching-history-element): Miscellaneous cleanup.
	Position point on match.  Handle N == 0 correctly.

	* comint.el (comint-mode): Locally set `next-line-add-newlines' to nil.
	(comint-mode-map): Reverse order of `comint-write-output' and
	`comint-append-output-to-file'.
	(comint-append-output-to-file): Reinstate this function, for the
	benefit of the menu.

2000-10-25  Stefan Monnier  <monnier@cs.yale.edu>

	* vc.el (vc-version-other-window): Bind `file'.

2000-10-25  Gerd Moellmann  <gerd@gnu.org>

	* Makefile.in (update-authors): New target for maintenance purposes.

	* emacs-lisp/authors.el (batch-update-authors): New function.
	(authors-fixed-entries): New defconst.
	(authors-add-fixed-entries): New function.
	(authors): Call it.: Don't process lispref/.

2000-10-25  Jason Rumney  <jasonr@gnu.org>

	* cus-edit.el (custom-button-face, custom-button-pressed-face):
	Merge x w32 and mac definitions.

2000-10-25  Gerd Moellmann  <gerd@gnu.org>

	* menu-bar.el (menu-bar-options-menu): Add a help string for
	`uniquify'.

2000-10-25  Stephen Gildea  <gildea@alum.mit.edu>

	* time-stamp.el (time-stamp-string-preprocess):
	Fix a wrong type argument error.

2000-10-25  Miles Bader  <miles@gnu.org>

	* recentf.el (recentf-mode): Variable removed.
	(recentf-mode): Use `define-minor-mode'.

	* mwheel.el (mouse-wheel-mode): New global minor mode.
	(mwheel-install): Use `mouse-wheel-mode'.

2000-10-25  Dave Love  <fx@gnu.org>

	* progmodes/cperl-mode.el (cperl-mode):
	Set normal-auto-fill-function correctly.

	* wid-edit.el (widget-field-keymap, widget-text-keymap): Don't
	inherit from global-map and don't nullify menu-bar and tool-bar
	bindings.

2000-10-25  Miles Bader  <miles@lsi.nec.co.jp>

	* wid-edit.el (widget-field-at): New function.
	(widget-at, widget-field-activate): Use it.
	(widget-tabable-at): Use `widget-at'.
	(widget-specify-field): If the terminating character of the widget
	field (which is read-only) is a newline, put it into a special
	`boundary' field so that C-n/C-p act more naturally.
	(widget-field-end): Also don't subtract one if a special
	`boundary' field has been added after the widget field.

	* comint.el (comint-output-filter, comint-send-input): Don't
	bother adding stickiness fields to overlays to fool the field
	code, since it should notice the overlay insertion-types now.

	* wid-edit.el (widget-beginning-of-line, widget-end-of-line):
	Replace with aliases of the normal emacs b-o-l/e-o-l functions.
	(widget-field-keymap, widget-text-keymap): Don't bind C-a/C-e.

2000-10-24  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/authors.el (authors-aliases): Add some more aliases.
	(authors): Set file coding system to iso-2022-7bit.  Add
	file-local variables to output buffer.

	* files.el (after-find-file): Don't print any warnings if
	WARN is nil.

2000-10-24  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el (ps-generate): Fix odd/even pages printing bug.

	* delim-col.el: Now there is a column formatting mechanism.
	Modified to customization mechanisms convention.  Doc fix.
	(columns): New group for delim-col.
	(delimit-columns-before, delimit-columns-after)
	(delimit-columns-format, delimit-columns-extra, delimit-columns-start)
	(delimit-columns-end): New vars.
	(delimit-columns-customize, delimit-columns-format): New funs.
	(delimit-columns-region, delimit-columns-rectangle)
	(delimit-columns-rectangle-line): Modified to support column
	formatting.

2000-10-24  Dave Love  <fx@gnu.org>

	* log-edit.el (log-edit): Add :version and a :group for vc.

2000-10-24  Gerd Moellmann  <gerd@gnu.org>

	* files.el (after-find-file): Don't print a message ``New file''
	if WARN is nil.

	* wid-edit.el (widget-field-keymap, widget-text-keymap): Define
	the tool-bar map as nil, as for the menu-bar.  Otherwise, we'll
	get duplicate tool-bar entries because we'll see the global ones
	on more than one path through keymaps.

	* emacs-lisp/lisp.el (defun-prompt-regexp): Doc fix.

	* progmodes/cmacexp.el: Change Francesco's email address.

2000-10-24  Kenichi Handa  <handa@etl.go.jp>

	* window.el (fit-window-to-buffer): Adjust point of the window
	buffer, not that of the current buffer.

2000-10-24  Eli Zaretskii  <eliz@is.elta.co.il>

	* progmodes/cmacexp.el: Update the euthor's email address.

2000-10-24  Miles Bader  <miles@lsi.nec.co.jp>

	* faces.el (face-spec-set-match-display): Add `graphic' display
	type (the inverse of `tty').  Use `display-graphic-p' instead of
	the window-system variable.

2000-10-24  Kenichi Handa  <handa@etl.go.jp>

	* international/isearch-x.el (isearch-with-input-method): Call
	input-method-function with the first event in
	unread-command-events.

2000-10-24  Miles Bader  <miles@lsi.nec.co.jp>

	* faces.el (face-default-spec, face-user-default-spec): Make
	defsubsts.

2000-10-24  Andrew Choi  <akochoi@i-cable.com>

	* international/mule-conf.el (mac-roman-lower, mac-roman-upper):
	New charsets.

	* term/mac-win.el: Remove definitions of mac-roman-lower and
	mac-roman-upper, require dired, and define instead of set
	mac-ready-for-drag-n-drop to avoid compilation error.

2000-10-23  Andrew Innes  <andrewi@gnu.org>

	* files.el (make-backup-file-name-1) [windowsnt, ms-dos]: Remove
	superfluous calls to subst-char-in-string; instead apply
	expand-file-name after convert-standard-filename to ensure
	expected directory separators are used.

2000-10-23  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (Info-file-list-for-emacs): Add an entry for Eshell.

2000-10-23  Dave Love  <fx@gnu.org>

	* toolbar/tool-bar.el (tool-bar-add-item-from-menu)
	(tool-bar-add-item): Set foreground and background for XBM icons.

	* international/latin1-disp.el (latin1-char-displayable-p): New
	function (from Handa).
	(latin1-display-check-font): Use it.

	* imenu.el (imenu--create-keymap-2): Build menu with menu-item
	using :key-sequence, making it much more usable.  Use nconc, not
	append.
	(imenu--create-keymap-1): Avoid append.

	* textmodes/refill.el: Remove bits redundant with define-minor-mode.

2000-10-23  Miles Bader  <miles@lsi.nec.co.jp>

	[the following changes fix a bug where `define-minor-mode' didn't
	correctly generate :require clauses for defcustoms in compiled files]
	* emacs-lisp/bytecomp.el (byte-compile-last-logged-file): New variable.
	(byte-compile-log-file, byte-compile-log-1): Don't set
	`byte-compile-current-file' to nil.  Instead set
	`byte-compile-last-logged-file' to it.  Test whether
	byte-compile-current-file equals byte-compile-last-logged-file
	instead of whether its nil.
	(byte-compile-file): Bind `byte-compile-last-logged-file' to nil.

2000-10-23  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/refill.el: Fix var names in doc.
	(refill-mode): Don't bother with make-local-hook anymore.

2000-10-23  Miles Bader  <miles@lsi.nec.co.jp>

	* faces.el (face-user-default-spec, face-default-spec): New functions.
	(face-spec-choose, face-spec-set): Document nil-SPEC behavior.
	(frame-set-background-mode, face-set-after-frame-default):
	Use `face-user-default-spec'.  Simplify code slightly.

	* woman.el (woman-italic-face, woman-bold-face)
	(woman-unknown-face): Add dark-background variants.
	(woman-default-faces): Renamed from `woman-colour-faces'.
	Set using the stored defaults, rather than using hard-wired colors.
	(woman-monochrome-faces): Renamed from `woman-black-faces'.
	Just make the foreground `unspecified' rather than "black".
	(woman-menu): Rename menu entries accordingly.

	* faces.el (header-line): Make more reasonable on mono/grayscale
	displays.

2000-10-23  Andrew Choi  <akochoi@i-cable.com>

	* cus-edit.el (custom-button-face): Use 3D look for mac.
	(custom-button-pressed-face): Likewise.

	* faces.el (set-face-attributes-from-resources): Handle mac frames
	in the same way as x and w32 frames.
	(face-valid-attribute-values): Likewise.
	(read-face-attribute): Likewise.
	(defined-colors): Likewise.
	(color-defined-p): Likewise.
	(color-values): Likewise.
	(display-grayscale-p): Likewise.
	(face-set-after-frame-default): Likewise.
	(mode-line): Same default face as for x and w32.
	(tool-bar): Likewise.

	* frame.el: Remove call to frame-notice-user-settings at end of
	the file.

	* info.el (Info-fontify-node): make underlines invisible for mac
	as for x, pc, and w32 frame types.

	* term/mac-win.el: New file.

2000-10-22  Dave Love  <fx@gnu.org>

	* textmodes/refill.el: New file.

2000-10-22  Andre Spiegel  <spiegel@gnu.org>

	* vc-hooks.el (vc-version-backup-file-name): New optional args
	MANUAL and REGEXP.
	(vc-delete-automatic-version-backups, vc-make-version-backup):
	New functions.
	(vc-before-save): Use the latter.
	(vc-default-make-version-backups-p): Added `-p' suffix to avoid
	confusion.

	* vc-cvs.el (vc-cvs-make-version-backups-p): Added `-p' suffix as
	expected by vc[-hooks].el.

	* vc.el (vc-checkout): Added `-p' suffix in call to
	vc-make-version-backups-p; use vc-make-version-backup to actually
	make the backup.
	(vc-version-other-window, vc-version-backup-file): Handle both
	automatic and manual backups.
	(vc-revert-file): Use vc-delete-automatic-version-backups to get rid
	of all of them.

2000-10-22  Miles Bader  <miles@gnu.org>

	* comint.el (comint-highlight-input, comint-highlight-prompt):
	Renamed, `-face' at end removed.
	(comint-send-input, comint-output-filter): Use renamed faces.

	* window.el (fit-window-to-buffer): Change defaulting of
	MAX-HEIGHT slightly.

	* faces.el (color-values, color-defined-p): Use `member', not
	`memq', because it works correctly for strings.
	(frame-set-background-mode): Actually, "unspecified-fg" and
	"unspecified-bg" *are* strings.  Use `member', not `memq', and
	`equal', not `eq', when a string value is possible.

2000-10-21  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (Info-file-list-for-emacs): Add an entry for Speedbar.

2000-10-21  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/sh-script.el (sh-mode-map): Remove bindings for
	sh-electric-rparen, sh-electric-less and sh-electric-hash.
	(sh-st-punc, sh-here-doc-syntax): Use string-to-syntax.
	(sh-font-lock-heredoc, sh-font-lock-paren): New funs.
	(sh-font-lock-syntactic-keywords): Use them.
	(sh-heredoc-face, sh-st-face, sh-special-syntax): Remove.
	(sh-mkword-regexp, sh-electric-rparen-needed-here): Remove.
	(sh-mode): Don't override font-lock-unfontify-region-function.
	Use a copy of sh-font-lock-syntactic-keywords.
	(sh-set-shell): Don't set sh-electric-rparen-needed-here.
	Don't call sh-scan-buffer since font-lock does it on the fly.
	(sh-get-indent-info): Use `face' rather than `syntax-table'
	text-property to detect here-documents.
	Replace sh-special-syntax with sh-st-punc.
	(sh-prev-line): Use `face' rather than `syntax-table'
	text-property to skip over here-documents.
	(sh-font-lock-unfontify-region-function, sh-check-paren-in-case)
	(sh-set-char-syntax, sh-electric-rparen, sh-electric-hash)
	(sh-electric-less, sh-set-here-doc-region)
	(sh-remove-our-text-properties, sh-search-word, sh-scan-case)
	(sh-scan-buffer, sh-rescan-buffer): Remove.

2000-10-21  Andrew Innes  <andrewi@gnu.org>

	* w32-fns.el (make-auto-save-file-name): Don't apply conversion to
	remote (ange-ftp) file names.

2000-10-21  Miles Bader  <miles@gnu.org>

	* window.el (fit-window-to-buffer): New function.
	(shrink-window-if-larger-than-buffer): Use it.
	(window-text-height): Don't expect minibuffers to have mode-lines.

	* help.el (resize-temp-buffer-window): Use `fit-window-to-buffer'.
	* international/quail.el (quail-update-guidance): Use
	`fit-window-to-buffer' instead of `set-window-text-height'.

	* international/quail.el (quail-show-guidance-buf): Make sure
	guidance window really has enough room.
	(quail-update-guidance): If quail-guidance-win is already shown,
	make sure its height is OK.

	* window.el (window-text-height, set-window-text-height):
	New functions.
	(shrink-window-if-larger-than-buffer): Use `window-text-height'
	instead of `window-height' & `mode-line-window-height-fudge'.
	(mode-line-window-height-fudge): Add FACE parameter.
	* help.el (resize-temp-buffer-window): Use `set-window-text-height'
	instead of `enlarge-window' & `mode-line-window-height-fudge'.

2000-10-20  Miles Bader  <miles@gnu.org>

	* window.el (height-affecting-face-attributes): Use `defconst'.

	* textmodes/ispell.el (ispell-mode-line-window-height-fudge):
	New function, conditionally aliased to `mode-line-window-height-fudge'.
	(ispell-help): Use it.
	(ispell-choices-win-default-height): Don't include mode-line fudge.
	(ispell-choices-win-default-height): New function.
	(ispell-show-choices, ispell-command-loop): Use function
	`ispell-choices-win-default-height' instead of variable.

2000-10-20  Miles Bader  <miles@lsi.nec.co.jp>

	* window.el (mode-line-window-height-fudge): New variable.
	(height-affecting-face-attributes): New variable.
	(mode-line-window-height-fudge): New function.
	(shrink-window-if-larger-than-buffer): Use it.
	* help.el (resize-temp-buffer-window): Likewise.

	* info.el (Info-fontify-node): Add support for @subsubsection
	titles, which use `Info-title-4-face'.
	(Info-title-4-face): New face.
	(Info-title-3-face): Inherit from Info-title-4-face instead of
	variable-pitch.

2000-10-19  Jason Rumney  <jasonr@gnu.org>

	* dired.el (dired-insert-directory): Do not let errors signalled by
	attempt to run dired-free-space-program prevent dired from working.

2000-10-19  Stefan Monnier  <monnier@cs.yale.edu>

	* diff-mode.el (diff-find-file-name): Fix regex subgroup number.

2000-10-19  Gerd Moellmann  <gerd@gnu.org>

	* dirtrack.el (dirtrack): Fix call to run-hooks.

	* cmuscheme.el (cmuscheme-program-name): Renamed from
	scheme-program-name because xscheme.el contains a defcustom with
	the same name.  As a consequence, customizing group `cmuscheme'
	loaded `xscheme' which redefined run-scheme.
	(run-scheme): Use cmuscheme-program-name.

	* ps-print.el (ps-print-emacs-type): Move into the
	eval-and-compile.

	* play/doctor.el (doctor-death): Update the Samaritans'
	anonymous address, and add a website for Befrienders International.

2000-10-19  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Even/odd pages fix.  Fix little bug on XEmacs.
	Avoid compilation gripes.  Doc fix.
	(ps-print-version): New version number (6.2).
	(ps-x-color-instance-p, ps-x-color-instance-rgb-components)
	(ps-x-color-name, ps-x-color-specifier-p, ps-x-copy-coding-system)
	(ps-x-device-class, ps-x-extent-end-position, ps-x-extent-face)
	(ps-x-extent-priority, ps-x-extent-start-position)
	(ps-x-face-font-instance, ps-x-find-coding-system)
	(ps-x-font-instance-properties, ps-x-make-color-instance)
	(ps-x-map-extents): Alias for functions without the prefix `ps-x-', to
	avoid compilation gripes without defining functions.
	(ps-e-find-composition): Alias for function find-composition, to have a
	suitable function depending on Emacs version.
	(ps-color-device, ps-color-values, ps-face-foreground-name)
	(ps-face-background-name, ps-face-bold-p, ps-face-italic-p, ps-mapper)
	(ps-extent-sorter, ps-xemacs-face-kind-p, ps-xemacs-color-name)
	(ps-print-ensure-fontified): Function definitions surrounded by
	`eval-and-compile' to avoid compilation gripes.
	(ps-font-lock-face-attributes): `font-lock-face-attributes' evaluated
	by symbol-value to avoid compilation gripes.
	(ps-end-file, ps-header-sheet, ps-plot-region): Even/odd pages fix.
	(ps-generate-postscript-with-faces): Fix little bug on XEmacs.

2000-10-19  Miles Bader  <miles@lsi.nec.co.jp>

	* startup.el (normal-top-level): Call `frame-set-background-mode'
	after `frame-notice-user-settings' because the latter doesn't call
	the former on a tty.

	* faces.el (frame-set-background-mode): `unspecified' &c are
	symbols, not strings.

2000-10-19  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/tty-colors.el (color-name-rgb-alist): Add a comment explaining
	why some "light*" colors are deliberately absent from the alist.

	* info.el (Info-title-1-face, Info-title-2-face, Info-title-3-face):
	Change colors for tty's, as suggested by Miles Bader.

2000-10-19  Kenichi Handa  <handa@etl.go.jp>

	* international/fontset.el: Use registry "MuleTibetan-2" for Tibetan.
	(ccl-encode-mule-unicode-0100-24ff): New CCL program.  Register it
	for ISO10646-1 fonts.
	(x-font-name-charset-alist): Add an entry for "iso10646-1".

2000-10-19  Eli Zaretskii  <eliz@is.elta.co.il>

	* faces.el (frame-set-background-mode): If a tty frame defines a
	background color, use that to compute the background mode, instead
	of always defaulting to "dark".

2000-10-19  Miles Bader  <miles@lsi.nec.co.jp>

	* comint.el (comint-write-output): New function.
	(comint-mode-map): Add it to the menu.
	Bind `C-c C-s' to comint-write-output.

2000-10-18  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (fancy-splash-screens): Set buffer-undo-list to t.
	Use fancy-splash-delay.

2000-10-18  Alex Schroeder  <alex@gnu.org>

	* progmodes/sql.el (sql-sybase-options): New option.
	(sql-sybase): Use it.  Add sql-database to the list of parameters
	provided for login.  The options -w 2048 -n are not used any more.

	* comint.el (comint-read-input-ring): Bugfix such that the first
	and the last entry of the input ring file are not lost.

2000-10-18  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Internal variable changes to defcustom,
	make-local-hook changes to defvar.  Doc fix.
	(ps-print-version): New version number (6.1).
	(ps-setup, ps-do-despool): Code fix.
	(ps-printer-name): Customization fix.
	(ps-printer-name-option): Now is a defcustom instead of an
	internal variable.
	(ps-print-hook, ps-print-begin-sheet-hook, ps-print-begin-page-hook)
	(ps-print-begin-column-hook): Now are defvar instead of
	make-local-hook.

2000-10-18  Miles Bader  <miles@gnu.org>

	* comint.el (comint-delete-output): Renamed from `comint-kill-output'.
	(comint-kill-output): Changed into an alias for `comint-delete-output',
	and made obsolete.
	(comint-mode-map): Rename references to comint-kill-output.

2000-10-18  Eli Zaretskii  <eliz@is.elta.co.il>

	* diff-mode.el (diff-header-face, diff-file-header-face)
	(diff-changed-face): Add bold and italic attributes to tty faces.
	(diff-function-face): New face.
	(diff-font-lock-keywords): Use it.

2000-10-18  Miles Bader  <miles@lsi.nec.co.jp>

	* comint.el (comint-output-filter): Fixup comint-last-input-end too.
	Remove commented-out call to force-mode-line-update.
	(comint-kill-output): Use `forward-line 0' instead of
	beginning-of-line to make sure we get past the prompt.

2000-10-17  Stefan Monnier  <monnier@cs.yale.edu>

	* diff-mode.el (diff-header-face, diff-file-header-face):
	Add specific setting for dark background.
	(diff-context-face): Renamed from diff-comment-face.
	Set explicitly rather than inheriting from font-lock-comment-face.

2000-10-17  Eli Zaretskii  <eliz@is.elta.co.il>

	* startup.el (command-line): Move the code which sets the default
	TTY colors to before before-init-hook.

2000-10-17  Gerd Moellmann  <gerd@gnu.org>

	* jit-lock.el (jit-lock-stealth-time): Doc fix.

2000-10-17  Eli Zaretskii  <eliz@is.elta.co.il>

	* files.el (auto-mode-alist): Add .dif and .pat as diff-mode
	extensions, for MS-DOS.

	* diff-mode.el (diff-header-face, diff-file-header-face)
	(diff-changed-face): Define tty-specific colors.

2000-10-17  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (fancy-splash-text): Realign the text.

2000-10-17  Eli Zaretskii  <eliz@is.elta.co.il>

	* font-lock.el (font-lock-comment-face): Define a separate default
	for dark-background tty's.

2000-10-17  Miles Bader  <miles@gnu.org>

	* help.el (resize-temp-buffer-window): Add hack to avoid last line
	being obscured by whizzy mode-lines on graphics displays.

2000-10-17  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (Info-title-1-face, Info-title-2-face)
	(Info-title-3-face): Define colors for tty's.
	(info-header-node): Remove unneeded tty-specific definition.

2000-10-16  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/pc-win.el (msdos-handle-reverse-video): Don't remove
	reverse from the frame parameters, and don't invert foreground and
	background colors.

2000-10-16  Miles Bader  <miles@gnu.org>

	* info.el (Info-set-mode-line): Use `%b' instead of hardwired
	string "*Info*".  Call propertized-buffer-identification to spruce
	up the result.

2000-10-16  Gerd Moellmann  <gerd@gnu.org>

	* help.el: Provide `help' for the sake of define-minor-mode
	which generates defcustoms with requires.

	* jit-lock.el (jit-lock-after-change): If we're in text that
	matches a multi-line font-lock pattern, make sure the whole text
	will be redisplayed.

	* emacs-lisp/authors.el (authors-add): Don't add an entry if
	author's name is unknown.

	* eshell/esh-var.el, eshell/esh-util.el, eshell/esh-test.el,
	* eshell/esh-proc.el, eshell/esh-opt.el, eshell/esh-mode.el,
	* eshell/esh-maint.el, eshell/esh-io.el, eshell/esh-ext.el,
	* eshell/esh-cmd.el, eshell/esh-arg.el, eshell/em-xtra.el,
	* eshell/em-unix.el, eshell/em-term.el, eshell/em-smart.el,
	* eshell/em-script.el, eshell/em-rebind.el, eshell/em-prompt.el,
	* eshell/em-pred.el, eshell/em-ls.el, eshell/em-hist.el,
	* eshell/em-glob.el, shell/em-dirs.el, eshell/em-cmpl.el,
	* eshell/em-basic.el, eshell/em-banner.el, eshell/em-alias.el:
	Add author information.

2000-10-16  Miles Bader  <miles@lsi.nec.co.jp>

	* toolbar/up_arrow.xpm, toolbar/right_arrow.xpm:
	* toolbar/left_arrow.xpm, toolbar/home.xpm: Re-convert from
	full-color version (using the Gimp) to eliminate dithering artifacts.

2000-10-15  Stefan Monnier  <monnier@cs.yale.edu>

	* font-lock.el (font-lock-syntactic-keywords): Fix docstring.

	* simple.el (syntax-flag-table, string-to-syntax): Remove.

2000-10-15  Dave Love  <fx@gnu.org>

	* progmodes/sh-script.el: Require skeleton and comint when
	compiling.

	* pcomplete.el (pcomplete) <defgroup>: Add :version.

	* whitespace.el: Doc fixes.
	(top-level): Don't add hooks here.
	(whitespace-running-emacs): Deleted.
	(timer): Don't require.
	(whitespace): Add back :version conditional on xemacs test.
	(whitespace-spacetab-regexp, whitespace-indent-regexp)
	(whitespace-ateol-regexp, whitespace-modes): Fix custom type.
	(whitespace-force-mode-line-update, whitespace-refresh-rescan-list)
	(whitespace-tickle-timer, whitespace-rescan-files-in-buffers):
	Avoid specific xemacs test.
	(whitespace-global-mode): New option.
	(whitespace-global-mode): New command.
	(whitespace-unload-hook): New function.

	* info.el (Info-mouse-follow-nearest-node): Use mouse-set-point.
	(Info-fontify-node, Info-goto-node, Info-mode-menu)
	(Info-fontify-node): `Goto' goes to `Go to'.
	(Info-fontify-node): Add help-echo to xref links.

2000-10-15  Eli Zaretskii  <eliz@is.elta.co.il>

	* eshell/em-unix.el (eshell-du-prefer-over-ange): Doc fix.

2000-10-15  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/easy-mmode.el (easy-mmode-define-syntax):
	Use plist-get and allow :inherit.

	* emacs-lisp/cl-macs.el (cl-do-arglist):
	Use plist-get and plist-member instead of memq.

	* emacs-lisp/ewoc.el (ewoc-location): New function.
	(ewoc-enter-after, ewoc-enter-before): Document return value.
	* pcvs.el (cvs-make-cvs-buffer, cvs-run-process):
	Don't need make-local-hook any more.
	(cvs-addto-collection): Return the new tin.
	(cvs-mode-insert): Jump to the new line.

	* jit-lock.el (jit-lock-fontify-buffer): Remove.

	* arc-mode.el (archive-zoo-summarize): Fix from gnu.emacs.bug.

	* font-lock.el (font-lock-syntactically-fontified): New var.
	(font-lock-fontify-syntactic-keywords-region): Use it.
	(font-lock-mode): Fix docstring.  Don't need make-local-hook anymore.

	* diff-mode.el (diff-find-file-name): Fix regexp.

	* emacs-lisp/cl-extra.el (cl-builtin-gethash, cl-builtin-remhash)
	(cl-builtin-clrhash, cl-builtin-maphash): Add for byte-compatibility.

	* progmodes/sh-script.el (sh-imenu-generic-expression): Fix.
	(sh-mode-syntax-table): Add punctuation syntax for < and >.
	(sh-mode): Don't make all vars local here.
	(sh-kw): Reformat.
	(sh-set-shell): Use dolist.  Don't set indent-region-function.
	(sh-mode-syntax-table): Use pop.
	(sh-remember-variable): Use push.
	(sh-help-string-for-variable): Use memq.
	(sh-safe-backward-sexp): Remove.
	(sh-safe-forward-sexp): Add ARG.
	(sh-get-indent-info, sh-prev-stmt): Use it.
	(sh-prev-line): Simplify by using forward-comment.
	(sh-this-is-a-continuation): Simplify.
	(sh-learn-buffer-indent): Use dolist.
	(sh-do-nothing): Remove.
	(sh-set-char-syntax, sh-set-here-doc-region):
	Use inhibit-modification-hooks.
	(sh-name-style): Use mapcar and push.
	(sh-load-style): Use dolist.
	(sh-save-styles-to-buffer): Use with-current-buffer and pp.
	(sh-case, sh-while-getopts): Use propertize directly rather
	than sh-electric-rparen.

2000-10-14  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/tex-mode.el: Require CL when compiling.
	(tex-mode-syntax-table): Init immediately.
	(tex-mode-map): Bind M-RET to latex-insert-item.
	(latex-mode): Set indent-line-function to latex-indent.
	(tex-common-initialization): Don't setup the syntax-table any more.
	(latex-insert-item): New skeleton.
	(tex-next-unmatched-end): Fix copy/paste braino.
	(latex-syntax-after, latex-skip-close-parens, latex-down-list)
	(latex-indent, latex-find-indent): New functions.
	(tex-indent-allhanging, tex-indent-arg, tex-latex-indent-syntax-table)
	(tex-indent-item, tex-indent-item-re, tex-indent-basic): New vars.
	(tex-compilation-parse-errors): Use with-syntax-table.

2000-10-15  Miles Bader  <miles@gnu.org>

	* font-lock.el (font-lock-comment-face): Change dark-background,
	color, non-tty, default to `chocolate1'.

2000-10-13  John Wiegley  <johnw@gnu.org>

	* eshell/esh-util.el (require): Added a missing `require' form,
	needed when compiling (for an ange-ftp macro definition).

2000-10-13  Dave Love  <fx@gnu.org>

	* toolbar/paste.pbm, toolbar/saveas.pbm: Retouch.

2000-10-13  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/lisp.el (down-list, backward-up-list, up-list): Doc
	fix.

	* toolbar/*.xpm: Reduce to max. 8 colors (mogrify -colorspace
	transparent -colors 8).

2000-10-13  Stephen Gildea  <gildea@alum.mit.edu>

	* time-stamp.el (time-stamp): Fixed bug in new multi-line code
	that breaks with old list format timestamps.
	(time-stamp-warn-inactive, time-stamp-old-format-warn)
	(time-stamp-count, time-stamp-conversion-warn): Improved doc
	strings.

2000-10-13  John Wiegley  <johnw@gnu.org>

	* align.el, pcomplete.el, calendar/timeclock.el,
	eshell/esh-module.el, eshell/eshell.el: Removed URL reference.

	* calendar/timeclock.el (timeclock-find-discrep): A fix to some
	faulty math, where holiday hours were being computing as seconds.

2000-10-13  John Wiegley  <johnw@gnu.org>

	* desktop.el (desktop-buffer-modes-to-save): Added a global for
	specifying what "other" kinds of buffers should be saved.  This
	used to be hard-coded.
	(desktop-buffer-misc-functions): A global for specifying how
	auxiliary data should be determined for special buffer types.
	(desktop-save-buffer-p): Use `desktop-buffer-modes-to-save',
	instead of hard-coding the special buffer types.
	(desktop-save): Run `desktop-buffer-misc-functions' to gather
	auxiliary data, instead of hard-coding for Info buffers and dired.
	(desktop-buffer-info-misc-data): Aux function for determining Info
	buffer auxiliary info.
	(desktop-buffer-dired-misc-data): Likewise, but for dired buffers.
	(desktop-buffer-info): Changed this function to use the info
	gathered above.
	(desktop-create-buffer): Be a little more careful about what
	`minor-mode' means before calling it.  This is important for some
	buffer types.

2000-10-13  John Wiegley  <johnw@gnu.org>

	* eshell/esh-util.el: Added a global form which declares an
	autoload for `parse-time-string', if that function is not already
	defined, and if parse-time.el is available on the user's system.

	* eshell/em-ls.el (eshell-ls-applicable): Extended this function
	to be aware of ange-ftp user info.
	(eshell-do-ls): Bind `ange-cache'.  Also, use
	`eshell-file-attributes'.
	(eshell-ls-annotate): Use `eshell-file-attributes'.
	(eshell-ls-file): Made the user-id printing code a bit smarter.

	* eshell/esh-util.el (eshell-ange-ls-uids): Added variable, to
	allow identification of alias user ids in remote directories.
	It's manual, but there's no other way to know when the current
	user on the local machine, is also the owning user on the remote
	machine.
	(fboundp): Bind `ange-cache'.
	(eshell-directory-files-and-attributes): Re-organized the logic a
	bit to use `eshell-file-attributes' instead of `file-attributes'.
	The former is more sensitive to directories that are read via FTP,
	and knows how to use ange-ftp to determine full attribute
	information, instead of just the name and last modtime.
	(eshell-current-ange-uids): Return the current user id when in a
	remote directory.
	(eshell-parse-ange-ls): Parse a full directory listing that has
	been returned by ange-ftp.
	(eshell-file-attributes): This beefed up version of
	`file-attributes' is only special if the user is currently in a
	remote directory, in which case it does a lot of work to find out
	what the real attributes of a file are, as they appear on the
	remote machine.  This makes usage of remote directories (i.e.,
	ange-ftp pathnames) much more useful.  You can now use Eshell as a
	full-fledged FTP client, with much more manipulation ability than
	most other clients.

	* eshell/em-unix.el (eshell-du-prefer-over-ange): Added a new
	variable, which means that Eshell's du should always be preferred
	in remote directories.
	(eshell-shuffle-files): Use `eshell-file-attributes', rather than
	just `file-attributes'.
	(eshell-mvcp-template): Bind `ange-cache', to improve performance
	when reading remote directories.  This is an Eshell-specific
	variable (not part of ange-ftp).
	(eshell/ln): Bind `ange-cache'.
	(eshell/du): Added some extra logic for determining when to use
	Eshell's du (which is slow), and when to use the external version
	(which may or may not exist).

	* eshell/em-rebind.el (eshell-delchar-or-maybe-eof): Call
	`eshell-interactive-process', rather than using
	`get-buffer-process', since backgrounded processes don't count in
	the context of this function's logic.

	* eshell/esh-arg.el (eshell-parse-double-quote): Moved a call to
	`forward-char', so that null strings are parsed correctly.

2000-09-13  John Wiegley  <johnw@gnu.org>

	* eshell/em-pred.el (eshell-pred-file-type,
	eshell-pred-file-links, eshell-pred-file-size): Use
	`eshell-file-attributes'.  This is more correct over ange-ftp.

	* eshell/em-glob.el (eshell-extended-glob): Bind `ange-cache', so
	that remote file globbing is more efficient.

	* eshell/em-ls.el (eshell-ls-dir): Use `expand-file-name' when
	gathering the files and attributes within a directory.

	* eshell/em-unix.el (eshell/cat): If any of the files passed on
	the command line is a special file (not a regular file, directory
	or symlink), always attempt to call the external version of cat.

2000-09-13  John Wiegley  <johnw@gnu.org>

	* eshell/esh-mode.el (eshell-find-tag): Corrections to the
	Eshell-friendly version of find-tag.

2000-10-13  Miles Bader  <miles@lsi.nec.co.jp>

	* image-file.el (image-file-name-extensions)
	(image-file-name-regexps): Add autoload cookies.

2000-10-13  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el (select-safe-coding-system): If FROM
	is string, show it in *Warning* buffer.

2000-10-13  Eli Zaretskii  <eliz@is.elta.co.il>

	* startup.el (normal-top-level): Use display-popup-menus-p instead
	of window-system.
	(command-line): Use display-graphic-p instead of window-system.
	(command-line-1): Use display-popup-menus-p and display-mouse-p
	instead of window-system.

2000-10-12  Sam Steingold  <sds@gnu.org>

	* tooltip.el (tooltip-use-echo-area): New user variable.
	(tooltip-show): Use it to choose between `x-show-tip' and `message'.

2000-10-12  Dave Love  <fx@gnu.org>

	* recentf.el: Maintainer's checkdoc fixes.

	* startup.el (normal-top-level-add-subdirs-to-load-path): Use
	character class, not ASCII when matching file names.
	(fancy-splash-head): Add trailing slash to URL.
	(command-line): Don't require XPM support for toolbar.

	* progmodes/cperl-mode.el (cperl-tips-faces): Doc fix.
	(cperl-invalid-face): Revert last change.
	(cperl-init-faces): Quote cperl-invalid-face.

2000-10-12  Kenichi Handa  <handa@etl.go.jp>

	* startup.el (fancy-splash-text): Remove superfluous quote.

2000-10-12  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (fancy-splash-screens): Don't add a pre-command hook.
	(fancy-splash-pre-command, fancy-splash-pending-command): Removed.
	(command-line-1): Don't use fancy-splash-pending-command.
	(fancy-splash-screens-1): Goto point-min after inserting text.

	* calendar/diary-lib.el (diary-cyclic): Doc fix from Ed Reingold.

	* progmodes/scheme.el (scheme-mode-map): Use lisp-mode-shared-map
	instead of shared-lisp-mode-map.

2000-10-12  Miles Bader  <miles@lsi.nec.co.jp>

	* faces.el (header-line): Change tty-variant to use underlining.

	* isearch.el (isearch-set-lazy-highlight-faces-at): New function.
	(isearch-highlight): Restore lazy-isearch face properties at old
	position, and suppress them at new position.
	(isearch-dehighlight): Restore lazy-isearch face properties.
	(isearch-lazy-highlight-update): Add lazy-isearch overlays even
	over the real isearch overlay, but in that case, don't give it a
	face property.  Use `push'.

2000-10-12  Kenichi Handa  <handa@etl.go.jp>

	* man.el (Man-getpage-in-background): Fix previous change.
	Decode the process output only when we are in multibyte mode.

2000-10-11  Dave Love  <fx@gnu.org>

	* info.el (Info-mode-menu): Fix some help.
	(info-tool-bar-map): Add entry for Info-last.

	* toolbar/cancel.xpm, toolbar/jump_to.xpm, toolbar/right_arrow.xpm:
	* toolbar/close.xpm, toolbar/left_arrow.xpm, toolbar/save.xpm:
	* toolbar/copy.xpm, toolbar/mail.xpm, toolbar/saveas.xpm:
	* toolbar/cut.xpm, toolbar/mail_compose.xpm:
	* toolbar/search-replace.xpm, toolbar/exit.xpm:
	* toolbar/mail_send.xpm, toolbar/search.xpm, toolbar/fld_open.xpm:
	* toolbar/new.xpm, toolbar/spell.xpm, toolbar/help.xpm:
	* toolbar/open.xpm, toolbar/undo.xpm, toolbar/home.xpm:
	* toolbar/paste.xpm, toolbar/up_arrow.xpm, toolbar/index.xpm:
	* toolbar/preferences.xpm, toolbar/info.xpm, toolbar/print.xpm:
	Reduce colour requirements to 25 overall.  (Probably wants
	revisiting from the originals to reduce further.)

2000-10-11  Eli Zaretskii  <eliz@is.elta.co.il>

	* hexl.el (hexlify-buffer): Bind coding-system-for-write to
	buffer-file-coding-system, instead of raw-text.
	(dehexlify-buffer): Bind coding-system-for-read to
	buffer-file-coding-system, instead of raw-text.

2000-10-11  Sam Steingold  <sds@gnu.org>

	* progmodes/cperl-mode.el (cperl-invalid-face): double-quote
	`underline' - fixes the bug introduced on 2000-09-21.

2000-10-11  Dave Love  <fx@gnu.org>

	* progmodes/scheme.el (scheme-mode-variables, dsssl-mode): Avoid
	compiler warnings.
	(scheme-mode): Doc fix.
	(scheme-font-lock-keywords-1): Match `define-syntax'.

2000-10-11  Miles Bader  <miles@lsi.nec.co.jp>

	* faces.el (frame-set-background-mode): Pay attention to saved
	face specs as well as default ones.  Only do anything if the
	bg-mode or display-type has actually changed.  Use `dolist'.
	(region): Make dark-background `region' face less in-your-face.

2000-10-10  Sam Steingold  <sds@gnu.org>

	* chistory.el, ielm.el, ledit.el:
	* progmodes/inf-lisp.el, progmodes/scheme.el:
	Use `lisp-mode-shared-map' instead of `shared-lisp-mode-map'.

2000-10-10  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/texinfo.el: Update copyright and fix typo.

	* desktop.el (desktop-modes-not-to-save): New var.
	(desktop-save-buffer-p): Use it.
	Also, obey desktop-buffers-n