2007-05-20  L$,1 q(Brentey K,Aa(Broly  <lorentey@elte.hu>

	* emacs.c (REPORT_EMACS_BUG_PRETEST_ADDRESS): Revert to
	official Emacs pretest bug report address.

2007-05-19  Dan Nicolaescu  <dann@ics.uci.edu>

	* frame.c (Fmake_terminal_frame): Disable output method test. 

	* s/darwin.h (SYSTEM_PURESIZE_EXTRA): Define here.
	(SYSTEM_PURESIZE_EXTRA): Only define on Carbon.

	* termhooks.h (union display_info): Add mac_display_info.

	* term.c (init_tty): Only use terminal->kboard when MULTI_KBOARD
	is defined.

	* macterm.h (struct mac_display_info): Add terminal.

	* w32term.c (w32_initialize): Make static.

	* macterm.c (XTset_terminal_modes): Add a terminal parameter.
	(XTreset_terminal_modes): Likewise.
	(x_clear_frame): Add a frame parameter.
	(note_mouse_movement): Get rif from the frame.
	(mac_term_init): Initialize the terminal.
	(mac_initialize): Make static and move terminal initialization ...
	(mac_create_terminal): ... in this new function.

	* macmenu.c: Reorder includes.
	(Fx_popup_menu): Use terminal specific mouse_position_hook.

	* macfns.c (x_set_mouse_color): Get rif from the frame.
	(x_set_tool_bar_lines): Don't use updating_frame.
	(mac_window): Add 2 new parameters for consistency with other
	systems.  
	(Fx_create_frame): Fix doc string. Rename the parameter.
	(Fx_create_frame): Set the frame parameters following what is done
	in X11 and w32.
	(Fx_open_connection): Remove window-system check.
	(start_hourglass): Likewise.
	(x_create_tip_frame): Get the keyboard from the terminal.
	(Fx_create_frame): Don't use FRAME_MAC_DISPLAY_INFO.

	* w32fns.c (Fx_create_frame): Use kboard from the terminal.

2007-05-17  Jason Rumney  <jasonr@gnu.org>

	* w32fns.c (x_create_tip_frame): Set window_system.

2007-05-17  Dan Nicolaescu  <dann@ics.uci.edu>

	* term.c (init_tty): Better initialize ttys in windows.
	* w32fns.c (Fx_create_frame): Set the default minibuffer frame,
	window_system and the rest of the frame parameters following what
	is done in X11.

2007-05-17  Jason Rumney  <jasonr@gnu.org>

	* w32term.h (x_output): Remove foreground_pixel and background_pixel.
	(w32_clear_rect, w32_clear_area): Use background from frame.

	* w32term.c (w32_term_init): Call add_keyboard_wait_descriptor.

	* w32fns.c (x_create_tip_frame): Set terminal and ref count.

2007-05-16  Jason Rumney  <jasonr@gnu.org>

	* makefile.w32-in: Update dependancies from Makefile.in

2007-05-15  Jason Rumney  <jasonr@gnu.org>

	* frame.c (Fdelete_frame): Only get kboard when MULTI_KBOARD
	defined.

	* keyboard.c (restore_kboard_configuration): Only define when
	MULTI_KBOARD defined.

	* terminal.c (init_initial_terminal): Only set initial_kboard when
	MULTI_KBOARD defined.

	* term.c (dissociate_if_controlling_tty) [WINDOWSNT]: Don't
	define function body.
	(init_tty) [WINDOWSNT]: Use selected_frame for initializing.

	* fringe.c (w32_init_fringe w32_reset_fringes) [HAVE_NTGUI]:
	(mac_init_fringe) [MAC_OS]: Get rif from selected_frame.

	* termhooks.h (display_info) [WINDOWSNT]: Add w32.

	* xdisp.c (display_menu_bar) [HAVE_NTGUI]: Check frame type.

	* frame.c (make_terminal_frame) [WINDOWSNT]: Initialize terminal.

	* w32.c (request_sigio, unrequest_sigio): Remove 

	* w32inevt.h, w32inevt.c (w32_console_read_socket): Make first
	arg a frame.

	* w32console.c (w32con_move_cursor, w32con_clear_to_end):
	(w32con_clear_frame, w32con_clear_end_of_line):
	(w32con_ins_del_lines, w32con_insert_glyphs, w32con_write_glyphs):
	(w32con_delete_glyphs, w32con_set_terminal_window):
	(scroll_line, w32_sys_ring_bell): Add frame arg.
	(w32con_set_terminal_modes, w32con_reset_terminal_modes): Add
	terminal arg.
	(PICK_FRAME): Remove.
	(w32con_write_glyphs): Use frame specific terminal coding.
	(one_and_only_w32cons): New global variable.
	(initialize_w32_display): Use it for storing hooks.
	(create_w32cons_output): New function.

	* w32menu.c (Fx_popup_menu): Use terminal specific
	mouse_position_hook.

	* w32fns.c (x_set_tool_bar_lines): Don't use updating_frame.
	(Fx_create_frame): Set terminal and ref count.
	(Fx_open_connection): Remove window-system check.

	* w32term.c (w32_set_terminal_modes, w32_reset_terminal_modes):
	Add terminal arg.
	(x_clear_frame, x_delete_glyphs, w32_ring_bell, x_ins_del_lines):
	Add frame arg.
	(x_delete_terminal, w32_create_terminal): New functions.
	(w32_term_init): Create a terminal.
	(w32_initialize): Move terminal specific initialization to
	w32_create_terminal.

	* w32term.h (w32_display_info): Add terminal.
	(w32_sys_ring_bell, x_delete_display): Declare here.

	* makefile.w32-in (OBJ1): Add terminal.$(O)

	* s/ms-w32.h (SYSTEM_PURESIZE_EXTRA): Bump to 50k.

2007-05-12  L$,1 q(Brentey K,Aa(Broly  <lorentey@elte.hu>

	This placeholder will be replaced by the Arch logs of the
	multi-tty branch.

;; Local Variables:
;; coding: iso-2022-7bit
;; add-log-time-zone-rule: t
;; End:

    Copyright (C) 2007 Free Software Foundation, Inc.

  This file is part of GNU Emacs.

  GNU Emacs is free software; you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation; either version 2, or (at your option)
  any later version.

  GNU Emacs is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with GNU Emacs; see the file COPYING.  If not, write to the
  Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
  Boston, MA 02110-1301, USA.

;;; arch-tag: 4015a0e0-033e-11dc-807c-00114368b55b
